{
  "title": "Water Metering Tenant Dashboard",
  "image": null,
  "mobileHide": false,
  "mobileOrder": null,
  "configuration": {
    "widgets": {
      "2cbc9189-b947-2d31-e748-c928f036ff96": {
        "isSystemType": true,
        "bundleAlias": "maps_v2",
        "typeAlias": "openstreetmap",
        "type": "latest",
        "title": "New widget",
        "sizeX": 24,
        "sizeY": 9,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "latitude",
                  "type": "attribute",
                  "label": "latitude",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.525753975363191
                },
                {
                  "name": "longitude",
                  "type": "attribute",
                  "label": "longitude",
                  "color": "#4caf50",
                  "settings": {},
                  "_hash": 0.8217317221020777
                },
                {
                  "name": "dailyConsumptionThresholdExceeded",
                  "type": "attribute",
                  "label": "dailyConsumptionThresholdExceeded",
                  "color": "#f44336",
                  "settings": {},
                  "_hash": 0.06040300070054716
                },
                {
                  "name": "weeklyConsumptionThresholdExceeded",
                  "type": "attribute",
                  "label": "weeklyConsumptionThresholdExceeded",
                  "color": "#ffc107",
                  "settings": {},
                  "_hash": 0.4111575212453731
                },
                {
                  "name": "deviceInactive",
                  "type": "attribute",
                  "label": "deviceInactive",
                  "color": "#607d8b",
                  "settings": {},
                  "_hash": 0.11395495902088215
                },
                {
                  "name": "lowBattery",
                  "type": "attribute",
                  "label": "lowBattery",
                  "color": "#9c27b0",
                  "settings": {},
                  "_hash": 0.0962009936577215
                },
                {
                  "name": "temperatureUnderThreshold",
                  "type": "attribute",
                  "label": "temperatureUnderThreshold",
                  "color": "#8bc34a",
                  "settings": {},
                  "_hash": 0.4202814614892829
                },
                {
                  "name": "address",
                  "type": "attribute",
                  "label": "address",
                  "color": "#3f51b5",
                  "settings": {},
                  "_hash": 0.8220975883869006
                },
                {
                  "name": "weeklyConsumption",
                  "type": "timeseries",
                  "label": "weeklyConsumption",
                  "color": "#e91e63",
                  "settings": {},
                  "_hash": 0.12530134493062772,
                  "postFuncBody": "return value || 0;",
                  "decimals": null,
                  "usePostProcessing": true,
                  "units": null,
                  "funcBody": null
                },
                {
                  "name": "temperature",
                  "type": "timeseries",
                  "label": "temperature",
                  "color": "#ffeb3b",
                  "settings": {},
                  "_hash": 0.28692501330670206,
                  "postFuncBody": "if (typeof value === 'number') {\n    return value.toFixed(1) +' &#8451;';\n} else {\n    return '';\n}",
                  "usePostProcessing": true,
                  "units": null,
                  "decimals": null,
                  "funcBody": null
                },
                {
                  "name": "dailyConsumption",
                  "type": "timeseries",
                  "label": "dailyConsumption",
                  "color": "#03a9f4",
                  "settings": {},
                  "_hash": 0.5230550094879332,
                  "decimals": null,
                  "postFuncBody": "return value || 0;"
                },
                {
                  "name": "type",
                  "type": "entityField",
                  "label": "Type",
                  "color": "#ff9800",
                  "settings": {},
                  "_hash": 0.39971338276440593
                }
              ]
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031165,
                "endTimeMs": 1678176431165
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "fitMapBounds": true,
            "latKeyName": "latitude",
            "lngKeyName": "longitude",
            "showLabel": true,
            "label": "${entityName}",
            "markerImageSize": 34,
            "useColorFunction": false,
            "markerImages": [
              "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzciIHZpZXdCb3g9IjAgMCAzMCAzNyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTUgMzUuNTg4MkMxNSAzNS41ODgyIDI5IDI2LjAyNjEgMjkgMTVDMjkgNy4yNjgwMSAyMi43MzIgMSAxNSAxQzcuMjY4MDEgMSAxIDcuMjY4MDEgMSAxNUMxIDI2LjAyNjEgMTUgMzUuNTg4MiAxNSAzNS41ODgyWk0xNC44MzU0IDI0LjcxNzZDMjAuMTExMyAyNC43MTc2IDI0LjM4ODMgMjAuNDQwNiAyNC4zODgzIDE1LjE2NDdDMjQuMzg4MyA5Ljg4ODc2IDIwLjExMTMgNS42MTE3NiAxNC44MzU0IDUuNjExNzZDOS41NTk0MSA1LjYxMTc2IDUuMjgyNDEgOS44ODg3NiA1LjI4MjQxIDE1LjE2NDdDNS4yODI0MSAyMC40NDA2IDkuNTU5NDEgMjQuNzE3NiAxNC44MzU0IDI0LjcxNzZaIiBmaWxsPSJ3aGl0ZSIvPgogICAgPHBhdGggZD0iTTE1IDM1LjU4ODJMMTQuNzE4IDM2LjAwMTFMMTUgMzYuMTkzN0wxNS4yODIgMzYuMDAxMUwxNSAzNS41ODgyWk0yOC41IDE1QzI4LjUgMjAuMzE1MSAyNS4xMTM4IDI1LjM0MTIgMjEuNjMzNiAyOS4wODg3QzE5LjkwMzQgMzAuOTUxNyAxOC4xNzE2IDMyLjQ3NTggMTYuODcxOCAzMy41MzQxQzE2LjIyMjMgMzQuMDYzIDE1LjY4MTYgMzQuNDc0OCAxNS4zMDQzIDM0Ljc1MzhDMTUuMTE1NyAzNC44OTMyIDE0Ljk2OCAzNC45OTk0IDE0Ljg2OCAzNS4wNzAzQzE0LjgxOCAzNS4xMDU4IDE0Ljc3OTkgMzUuMTMyNCAxNC43NTQ2IDM1LjE1QzE0Ljc0MiAzNS4xNTg4IDE0LjczMjUgMzUuMTY1MyAxNC43MjY0IDM1LjE2OTZDMTQuNzIzMyAzNS4xNzE3IDE0LjcyMTEgMzUuMTczMiAxNC43MTk3IDM1LjE3NDJDMTQuNzE5IDM1LjE3NDcgMTQuNzE4NSAzNS4xNzUgMTQuNzE4MiAzNS4xNzUyQzE0LjcxODEgMzUuMTc1MyAxNC43MTggMzUuMTc1MyAxNC43MTc5IDM1LjE3NTRDMTQuNzE3OSAzNS4xNzU0IDE0LjcxOCAzNS4xNzU0IDE1IDM1LjU4ODJDMTUuMjgyIDM2LjAwMTEgMTUuMjgyMiAzNi4wMDEgMTUuMjgyNCAzNi4wMDA5QzE1LjI4MjUgMzYuMDAwOCAxNS4yODI4IDM2LjAwMDYgMTUuMjgzMSAzNi4wMDA0QzE1LjI4MzYgMzYgMTUuMjg0NCAzNS45OTk1IDE1LjI4NTQgMzUuOTk4OEMxNS4yODc0IDM1Ljk5NzQgMTUuMjkwMiAzNS45OTU1IDE1LjI5MzkgMzUuOTkyOUMxNS4zMDEyIDM1Ljk4NzkgMTUuMzExOSAzNS45ODA1IDE1LjMyNTcgMzUuOTcwOUMxNS4zNTM0IDM1Ljk1MTYgMTUuMzk0IDM1LjkyMzIgMTUuNDQ2NSAzNS44ODZDMTUuNTUxNiAzNS44MTE1IDE1LjcwNDYgMzUuNzAxNCAxNS44OTg4IDM1LjU1NzlDMTYuMjg3MSAzNS4yNzA4IDE2Ljg0MDIgMzQuODQ5NCAxNy41MDMyIDM0LjMwOTZDMTguODI4NCAzMy4yMzA1IDIwLjU5NjYgMzEuNjc0OSAyMi4zNjY0IDI5Ljc2OTJDMjUuODg2MiAyNS45NzkgMjkuNSAyMC43MTEgMjkuNSAxNUgyOC41Wk0xNSAxLjVDMjIuNDU1OCAxLjUgMjguNSA3LjU0NDE2IDI4LjUgMTVIMjkuNUMyOS41IDYuOTkxODcgMjMuMDA4MSAwLjUgMTUgMC41VjEuNVpNMS41IDE1QzEuNSA3LjU0NDE2IDcuNTQ0MTYgMS41IDE1IDEuNVYwLjVDNi45OTE4NyAwLjUgMC41IDYuOTkxODcgMC41IDE1SDEuNVpNMTUgMzUuNTg4MkMxNS4yODIgMzUuMTc1NCAxNS4yODIxIDM1LjE3NTQgMTUuMjgyMSAzNS4xNzU0QzE1LjI4MiAzNS4xNzUzIDE1LjI4MTkgMzUuMTc1MyAxNS4yODE4IDM1LjE3NTJDMTUuMjgxNSAzNS4xNzUgMTUuMjgxIDM1LjE3NDcgMTUuMjgwMyAzNS4xNzQyQzE1LjI3ODkgMzUuMTczMiAxNS4yNzY3IDM1LjE3MTcgMTUuMjczNiAzNS4xNjk2QzE1LjI2NzUgMzUuMTY1MyAxNS4yNTggMzUuMTU4OCAxNS4yNDU0IDM1LjE1QzE1LjIyMDEgMzUuMTMyNCAxNS4xODIgMzUuMTA1OCAxNS4xMzIgMzUuMDcwM0MxNS4wMzIgMzQuOTk5NCAxNC44ODQzIDM0Ljg5MzIgMTQuNjk1NyAzNC43NTM4QzE0LjMxODQgMzQuNDc0OCAxMy43Nzc3IDM0LjA2MyAxMy4xMjgyIDMzLjUzNDFDMTEuODI4NCAzMi40NzU4IDEwLjA5NjYgMzAuOTUxNyA4LjM2NjM4IDI5LjA4ODdDNC44ODYxOSAyNS4zNDEyIDEuNSAyMC4zMTUxIDEuNSAxNUgwLjVDMC41IDIwLjcxMSA0LjExMzgxIDI1Ljk3OSA3LjYzMzYyIDI5Ljc2OTJDOS40MDM0MiAzMS42NzQ5IDExLjE3MTYgMzMuMjMwNSAxMi40OTY4IDM0LjMwOTZDMTMuMTU5OCAzNC44NDk0IDEzLjcxMjkgMzUuMjcwOCAxNC4xMDEyIDM1LjU1NzlDMTQuMjk1NCAzNS43MDE0IDE0LjQ0ODQgMzUuODExNSAxNC41NTM1IDM1Ljg4NkMxNC42MDYgMzUuOTIzMiAxNC42NDY2IDM1Ljk1MTYgMTQuNjc0MyAzNS45NzA5QzE0LjY4ODEgMzUuOTgwNSAxNC42OTg4IDM1Ljk4NzkgMTQuNzA2MSAzNS45OTI5QzE0LjcwOTggMzUuOTk1NSAxNC43MTI2IDM1Ljk5NzQgMTQuNzE0NiAzNS45OTg4QzE0LjcxNTYgMzUuOTk5NSAxNC43MTY0IDM2IDE0LjcxNjkgMzYuMDAwNEMxNC43MTcyIDM2LjAwMDYgMTQuNzE3NSAzNi4wMDA4IDE0LjcxNzYgMzYuMDAwOUMxNC43MTc4IDM2LjAwMSAxNC43MTggMzYuMDAxMSAxNSAzNS41ODgyWk0yMy44ODgzIDE1LjE2NDdDMjMuODg4MyAyMC4xNjQ1IDE5LjgzNTIgMjQuMjE3NiAxNC44MzU0IDI0LjIxNzZWMjUuMjE3NkMyMC4zODc0IDI1LjIxNzYgMjQuODg4MyAyMC43MTY4IDI0Ljg4ODMgMTUuMTY0N0gyMy44ODgzWk0xNC44MzU0IDYuMTExNzZDMTkuODM1MiA2LjExMTc2IDIzLjg4ODMgMTAuMTY0OSAyMy44ODgzIDE1LjE2NDdIMjQuODg4M0MyNC44ODgzIDkuNjEyNjIgMjAuMzg3NCA1LjExMTc2IDE0LjgzNTQgNS4xMTE3NlY2LjExMTc2Wk01Ljc4MjQxIDE1LjE2NDdDNS43ODI0MSAxMC4xNjQ5IDkuODM1NTUgNi4xMTE3NiAxNC44MzU0IDYuMTExNzZWNS4xMTE3NkM5LjI4MzI2IDUuMTExNzYgNC43ODI0MSA5LjYxMjYyIDQuNzgyNDEgMTUuMTY0N0g1Ljc4MjQxWk0xNC44MzU0IDI0LjIxNzZDOS44MzU1NSAyNC4yMTc2IDUuNzgyNDEgMjAuMTY0NSA1Ljc4MjQxIDE1LjE2NDdINC43ODI0MUM0Ljc4MjQxIDIwLjcxNjggOS4yODMyNiAyNS4yMTc2IDE0LjgzNTQgMjUuMjE3NlYyNC4yMTc2WiIgZmlsbD0iI0UwRTBFMCIvPgogICAgPGNpcmNsZSBjeD0iMTUuMDAwMSIgY3k9IjE1LjAwMDEiIHI9IjYuMzM3MjEiIGZpbGw9IiM2RkNGOTciIHN0cm9rZT0iIzIxOTY1MyIvPgo8L3N2Zz4=",
              "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzciIHZpZXdCb3g9IjAgMCAzMCAzNyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTUgMzUuNTg4MkMxNSAzNS41ODgyIDI5IDI2LjAyNjEgMjkgMTVDMjkgNy4yNjgwMSAyMi43MzIgMSAxNSAxQzcuMjY4MDEgMSAxIDcuMjY4MDEgMSAxNUMxIDI2LjAyNjEgMTUgMzUuNTg4MiAxNSAzNS41ODgyWk0xNC44MzU0IDI0LjcxNzZDMjAuMTExMyAyNC43MTc2IDI0LjM4ODMgMjAuNDQwNiAyNC4zODgzIDE1LjE2NDdDMjQuMzg4MyA5Ljg4ODc2IDIwLjExMTMgNS42MTE3NiAxNC44MzU0IDUuNjExNzZDOS41NTk0MSA1LjYxMTc2IDUuMjgyNDEgOS44ODg3NiA1LjI4MjQxIDE1LjE2NDdDNS4yODI0MSAyMC40NDA2IDkuNTU5NDEgMjQuNzE3NiAxNC44MzU0IDI0LjcxNzZaIiBmaWxsPSJ3aGl0ZSIvPgogICAgPHBhdGggZD0iTTE1IDM1LjU4ODJMMTQuNzE4IDM2LjAwMTFMMTUgMzYuMTkzN0wxNS4yODIgMzYuMDAxMUwxNSAzNS41ODgyWk0yOC41IDE1QzI4LjUgMjAuMzE1MSAyNS4xMTM4IDI1LjM0MTIgMjEuNjMzNiAyOS4wODg3QzE5LjkwMzQgMzAuOTUxNyAxOC4xNzE2IDMyLjQ3NTggMTYuODcxOCAzMy41MzQxQzE2LjIyMjMgMzQuMDYzIDE1LjY4MTYgMzQuNDc0OCAxNS4zMDQzIDM0Ljc1MzhDMTUuMTE1NyAzNC44OTMyIDE0Ljk2OCAzNC45OTk0IDE0Ljg2OCAzNS4wNzAzQzE0LjgxOCAzNS4xMDU4IDE0Ljc3OTkgMzUuMTMyNCAxNC43NTQ2IDM1LjE1QzE0Ljc0MiAzNS4xNTg4IDE0LjczMjUgMzUuMTY1MyAxNC43MjY0IDM1LjE2OTZDMTQuNzIzMyAzNS4xNzE3IDE0LjcyMTEgMzUuMTczMiAxNC43MTk3IDM1LjE3NDJDMTQuNzE5IDM1LjE3NDcgMTQuNzE4NSAzNS4xNzUgMTQuNzE4MiAzNS4xNzUyQzE0LjcxODEgMzUuMTc1MyAxNC43MTggMzUuMTc1MyAxNC43MTc5IDM1LjE3NTRDMTQuNzE3OSAzNS4xNzU0IDE0LjcxOCAzNS4xNzU0IDE1IDM1LjU4ODJDMTUuMjgyIDM2LjAwMTEgMTUuMjgyMiAzNi4wMDEgMTUuMjgyNCAzNi4wMDA5QzE1LjI4MjUgMzYuMDAwOCAxNS4yODI4IDM2LjAwMDYgMTUuMjgzMSAzNi4wMDA0QzE1LjI4MzYgMzYgMTUuMjg0NCAzNS45OTk1IDE1LjI4NTQgMzUuOTk4OEMxNS4yODc0IDM1Ljk5NzQgMTUuMjkwMiAzNS45OTU1IDE1LjI5MzkgMzUuOTkyOUMxNS4zMDEyIDM1Ljk4NzkgMTUuMzExOSAzNS45ODA1IDE1LjMyNTcgMzUuOTcwOUMxNS4zNTM0IDM1Ljk1MTYgMTUuMzk0IDM1LjkyMzIgMTUuNDQ2NSAzNS44ODZDMTUuNTUxNiAzNS44MTE1IDE1LjcwNDYgMzUuNzAxNCAxNS44OTg4IDM1LjU1NzlDMTYuMjg3MSAzNS4yNzA4IDE2Ljg0MDIgMzQuODQ5NCAxNy41MDMyIDM0LjMwOTZDMTguODI4NCAzMy4yMzA1IDIwLjU5NjYgMzEuNjc0OSAyMi4zNjY0IDI5Ljc2OTJDMjUuODg2MiAyNS45NzkgMjkuNSAyMC43MTEgMjkuNSAxNUgyOC41Wk0xNSAxLjVDMjIuNDU1OCAxLjUgMjguNSA3LjU0NDE2IDI4LjUgMTVIMjkuNUMyOS41IDYuOTkxODcgMjMuMDA4MSAwLjUgMTUgMC41VjEuNVpNMS41IDE1QzEuNSA3LjU0NDE2IDcuNTQ0MTYgMS41IDE1IDEuNVYwLjVDNi45OTE4NyAwLjUgMC41IDYuOTkxODcgMC41IDE1SDEuNVpNMTUgMzUuNTg4MkMxNS4yODIgMzUuMTc1NCAxNS4yODIxIDM1LjE3NTQgMTUuMjgyMSAzNS4xNzU0QzE1LjI4MiAzNS4xNzUzIDE1LjI4MTkgMzUuMTc1MyAxNS4yODE4IDM1LjE3NTJDMTUuMjgxNSAzNS4xNzUgMTUuMjgxIDM1LjE3NDcgMTUuMjgwMyAzNS4xNzQyQzE1LjI3ODkgMzUuMTczMiAxNS4yNzY3IDM1LjE3MTcgMTUuMjczNiAzNS4xNjk2QzE1LjI2NzUgMzUuMTY1MyAxNS4yNTggMzUuMTU4OCAxNS4yNDU0IDM1LjE1QzE1LjIyMDEgMzUuMTMyNCAxNS4xODIgMzUuMTA1OCAxNS4xMzIgMzUuMDcwM0MxNS4wMzIgMzQuOTk5NCAxNC44ODQzIDM0Ljg5MzIgMTQuNjk1NyAzNC43NTM4QzE0LjMxODQgMzQuNDc0OCAxMy43Nzc3IDM0LjA2MyAxMy4xMjgyIDMzLjUzNDFDMTEuODI4NCAzMi40NzU4IDEwLjA5NjYgMzAuOTUxNyA4LjM2NjM4IDI5LjA4ODdDNC44ODYxOSAyNS4zNDEyIDEuNSAyMC4zMTUxIDEuNSAxNUgwLjVDMC41IDIwLjcxMSA0LjExMzgxIDI1Ljk3OSA3LjYzMzYyIDI5Ljc2OTJDOS40MDM0MiAzMS42NzQ5IDExLjE3MTYgMzMuMjMwNSAxMi40OTY4IDM0LjMwOTZDMTMuMTU5OCAzNC44NDk0IDEzLjcxMjkgMzUuMjcwOCAxNC4xMDEyIDM1LjU1NzlDMTQuMjk1NCAzNS43MDE0IDE0LjQ0ODQgMzUuODExNSAxNC41NTM1IDM1Ljg4NkMxNC42MDYgMzUuOTIzMiAxNC42NDY2IDM1Ljk1MTYgMTQuNjc0MyAzNS45NzA5QzE0LjY4ODEgMzUuOTgwNSAxNC42OTg4IDM1Ljk4NzkgMTQuNzA2MSAzNS45OTI5QzE0LjcwOTggMzUuOTk1NSAxNC43MTI2IDM1Ljk5NzQgMTQuNzE0NiAzNS45OTg4QzE0LjcxNTYgMzUuOTk5NSAxNC43MTY0IDM2IDE0LjcxNjkgMzYuMDAwNEMxNC43MTcyIDM2LjAwMDYgMTQuNzE3NSAzNi4wMDA4IDE0LjcxNzYgMzYuMDAwOUMxNC43MTc4IDM2LjAwMSAxNC43MTggMzYuMDAxMSAxNSAzNS41ODgyWk0yMy44ODgzIDE1LjE2NDdDMjMuODg4MyAyMC4xNjQ1IDE5LjgzNTIgMjQuMjE3NiAxNC44MzU0IDI0LjIxNzZWMjUuMjE3NkMyMC4zODc0IDI1LjIxNzYgMjQuODg4MyAyMC43MTY4IDI0Ljg4ODMgMTUuMTY0N0gyMy44ODgzWk0xNC44MzU0IDYuMTExNzZDMTkuODM1MiA2LjExMTc2IDIzLjg4ODMgMTAuMTY0OSAyMy44ODgzIDE1LjE2NDdIMjQuODg4M0MyNC44ODgzIDkuNjEyNjIgMjAuMzg3NCA1LjExMTc2IDE0LjgzNTQgNS4xMTE3NlY2LjExMTc2Wk01Ljc4MjQxIDE1LjE2NDdDNS43ODI0MSAxMC4xNjQ5IDkuODM1NTUgNi4xMTE3NiAxNC44MzU0IDYuMTExNzZWNS4xMTE3NkM5LjI4MzI2IDUuMTExNzYgNC43ODI0MSA5LjYxMjYyIDQuNzgyNDEgMTUuMTY0N0g1Ljc4MjQxWk0xNC44MzU0IDI0LjIxNzZDOS44MzU1NSAyNC4yMTc2IDUuNzgyNDEgMjAuMTY0NSA1Ljc4MjQxIDE1LjE2NDdINC43ODI0MUM0Ljc4MjQxIDIwLjcxNjggOS4yODMyNiAyNS4yMTc2IDE0LjgzNTQgMjUuMjE3NlYyNC4yMTc2WiIgZmlsbD0iI0UwRTBFMCIvPgogICAgPGNpcmNsZSBjeD0iMTUuMDAwMSIgY3k9IjE1LjAwMDEiIHI9IjYuMzM3MjEiIGZpbGw9IiNGMjk5NEEiIHN0cm9rZT0iI0RFODUzNiIvPgo8L3N2Zz4=",
              "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzciIHZpZXdCb3g9IjAgMCAzMCAzNyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTUgMzUuNTg4MkMxNSAzNS41ODgyIDI5IDI2LjAyNjEgMjkgMTVDMjkgNy4yNjgwMSAyMi43MzIgMSAxNSAxQzcuMjY4MDEgMSAxIDcuMjY4MDEgMSAxNUMxIDI2LjAyNjEgMTUgMzUuNTg4MiAxNSAzNS41ODgyWk0xNC44MzU0IDI0LjcxNzZDMjAuMTExMyAyNC43MTc2IDI0LjM4ODMgMjAuNDQwNiAyNC4zODgzIDE1LjE2NDdDMjQuMzg4MyA5Ljg4ODc2IDIwLjExMTMgNS42MTE3NiAxNC44MzU0IDUuNjExNzZDOS41NTk0MSA1LjYxMTc2IDUuMjgyNDEgOS44ODg3NiA1LjI4MjQxIDE1LjE2NDdDNS4yODI0MSAyMC40NDA2IDkuNTU5NDEgMjQuNzE3NiAxNC44MzU0IDI0LjcxNzZaIiBmaWxsPSJ3aGl0ZSIvPgogICAgPHBhdGggZD0iTTE1IDM1LjU4ODJMMTQuNzE4IDM2LjAwMTFMMTUgMzYuMTkzN0wxNS4yODIgMzYuMDAxMUwxNSAzNS41ODgyWk0yOC41IDE1QzI4LjUgMjAuMzE1MSAyNS4xMTM4IDI1LjM0MTIgMjEuNjMzNiAyOS4wODg3QzE5LjkwMzQgMzAuOTUxNyAxOC4xNzE2IDMyLjQ3NTggMTYuODcxOCAzMy41MzQxQzE2LjIyMjMgMzQuMDYzIDE1LjY4MTYgMzQuNDc0OCAxNS4zMDQzIDM0Ljc1MzhDMTUuMTE1NyAzNC44OTMyIDE0Ljk2OCAzNC45OTk0IDE0Ljg2OCAzNS4wNzAzQzE0LjgxOCAzNS4xMDU4IDE0Ljc3OTkgMzUuMTMyNCAxNC43NTQ2IDM1LjE1QzE0Ljc0MiAzNS4xNTg4IDE0LjczMjUgMzUuMTY1MyAxNC43MjY0IDM1LjE2OTZDMTQuNzIzMyAzNS4xNzE3IDE0LjcyMTEgMzUuMTczMiAxNC43MTk3IDM1LjE3NDJDMTQuNzE5IDM1LjE3NDcgMTQuNzE4NSAzNS4xNzUgMTQuNzE4MiAzNS4xNzUyQzE0LjcxODEgMzUuMTc1MyAxNC43MTggMzUuMTc1MyAxNC43MTc5IDM1LjE3NTRDMTQuNzE3OSAzNS4xNzU0IDE0LjcxOCAzNS4xNzU0IDE1IDM1LjU4ODJDMTUuMjgyIDM2LjAwMTEgMTUuMjgyMiAzNi4wMDEgMTUuMjgyNCAzNi4wMDA5QzE1LjI4MjUgMzYuMDAwOCAxNS4yODI4IDM2LjAwMDYgMTUuMjgzMSAzNi4wMDA0QzE1LjI4MzYgMzYgMTUuMjg0NCAzNS45OTk1IDE1LjI4NTQgMzUuOTk4OEMxNS4yODc0IDM1Ljk5NzQgMTUuMjkwMiAzNS45OTU1IDE1LjI5MzkgMzUuOTkyOUMxNS4zMDEyIDM1Ljk4NzkgMTUuMzExOSAzNS45ODA1IDE1LjMyNTcgMzUuOTcwOUMxNS4zNTM0IDM1Ljk1MTYgMTUuMzk0IDM1LjkyMzIgMTUuNDQ2NSAzNS44ODZDMTUuNTUxNiAzNS44MTE1IDE1LjcwNDYgMzUuNzAxNCAxNS44OTg4IDM1LjU1NzlDMTYuMjg3MSAzNS4yNzA4IDE2Ljg0MDIgMzQuODQ5NCAxNy41MDMyIDM0LjMwOTZDMTguODI4NCAzMy4yMzA1IDIwLjU5NjYgMzEuNjc0OSAyMi4zNjY0IDI5Ljc2OTJDMjUuODg2MiAyNS45NzkgMjkuNSAyMC43MTEgMjkuNSAxNUgyOC41Wk0xNSAxLjVDMjIuNDU1OCAxLjUgMjguNSA3LjU0NDE2IDI4LjUgMTVIMjkuNUMyOS41IDYuOTkxODcgMjMuMDA4MSAwLjUgMTUgMC41VjEuNVpNMS41IDE1QzEuNSA3LjU0NDE2IDcuNTQ0MTYgMS41IDE1IDEuNVYwLjVDNi45OTE4NyAwLjUgMC41IDYuOTkxODcgMC41IDE1SDEuNVpNMTUgMzUuNTg4MkMxNS4yODIgMzUuMTc1NCAxNS4yODIxIDM1LjE3NTQgMTUuMjgyMSAzNS4xNzU0QzE1LjI4MiAzNS4xNzUzIDE1LjI4MTkgMzUuMTc1MyAxNS4yODE4IDM1LjE3NTJDMTUuMjgxNSAzNS4xNzUgMTUuMjgxIDM1LjE3NDcgMTUuMjgwMyAzNS4xNzQyQzE1LjI3ODkgMzUuMTczMiAxNS4yNzY3IDM1LjE3MTcgMTUuMjczNiAzNS4xNjk2QzE1LjI2NzUgMzUuMTY1MyAxNS4yNTggMzUuMTU4OCAxNS4yNDU0IDM1LjE1QzE1LjIyMDEgMzUuMTMyNCAxNS4xODIgMzUuMTA1OCAxNS4xMzIgMzUuMDcwM0MxNS4wMzIgMzQuOTk5NCAxNC44ODQzIDM0Ljg5MzIgMTQuNjk1NyAzNC43NTM4QzE0LjMxODQgMzQuNDc0OCAxMy43Nzc3IDM0LjA2MyAxMy4xMjgyIDMzLjUzNDFDMTEuODI4NCAzMi40NzU4IDEwLjA5NjYgMzAuOTUxNyA4LjM2NjM4IDI5LjA4ODdDNC44ODYxOSAyNS4zNDEyIDEuNSAyMC4zMTUxIDEuNSAxNUgwLjVDMC41IDIwLjcxMSA0LjExMzgxIDI1Ljk3OSA3LjYzMzYyIDI5Ljc2OTJDOS40MDM0MiAzMS42NzQ5IDExLjE3MTYgMzMuMjMwNSAxMi40OTY4IDM0LjMwOTZDMTMuMTU5OCAzNC44NDk0IDEzLjcxMjkgMzUuMjcwOCAxNC4xMDEyIDM1LjU1NzlDMTQuMjk1NCAzNS43MDE0IDE0LjQ0ODQgMzUuODExNSAxNC41NTM1IDM1Ljg4NkMxNC42MDYgMzUuOTIzMiAxNC42NDY2IDM1Ljk1MTYgMTQuNjc0MyAzNS45NzA5QzE0LjY4ODEgMzUuOTgwNSAxNC42OTg4IDM1Ljk4NzkgMTQuNzA2MSAzNS45OTI5QzE0LjcwOTggMzUuOTk1NSAxNC43MTI2IDM1Ljk5NzQgMTQuNzE0NiAzNS45OTg4QzE0LjcxNTYgMzUuOTk5NSAxNC43MTY0IDM2IDE0LjcxNjkgMzYuMDAwNEMxNC43MTcyIDM2LjAwMDYgMTQuNzE3NSAzNi4wMDA4IDE0LjcxNzYgMzYuMDAwOUMxNC43MTc4IDM2LjAwMSAxNC43MTggMzYuMDAxMSAxNSAzNS41ODgyWk0yMy44ODgzIDE1LjE2NDdDMjMuODg4MyAyMC4xNjQ1IDE5LjgzNTIgMjQuMjE3NiAxNC44MzU0IDI0LjIxNzZWMjUuMjE3NkMyMC4zODc0IDI1LjIxNzYgMjQuODg4MyAyMC43MTY4IDI0Ljg4ODMgMTUuMTY0N0gyMy44ODgzWk0xNC44MzU0IDYuMTExNzZDMTkuODM1MiA2LjExMTc2IDIzLjg4ODMgMTAuMTY0OSAyMy44ODgzIDE1LjE2NDdIMjQuODg4M0MyNC44ODgzIDkuNjEyNjIgMjAuMzg3NCA1LjExMTc2IDE0LjgzNTQgNS4xMTE3NlY2LjExMTc2Wk01Ljc4MjQxIDE1LjE2NDdDNS43ODI0MSAxMC4xNjQ5IDkuODM1NTUgNi4xMTE3NiAxNC44MzU0IDYuMTExNzZWNS4xMTE3NkM5LjI4MzI2IDUuMTExNzYgNC43ODI0MSA5LjYxMjYyIDQuNzgyNDEgMTUuMTY0N0g1Ljc4MjQxWk0xNC44MzU0IDI0LjIxNzZDOS44MzU1NSAyNC4yMTc2IDUuNzgyNDEgMjAuMTY0NSA1Ljc4MjQxIDE1LjE2NDdINC43ODI0MUM0Ljc4MjQxIDIwLjcxNjggOS4yODMyNiAyNS4yMTc2IDE0LjgzNTQgMjUuMjE3NlYyNC4yMTc2WiIgZmlsbD0iI0UwRTBFMCIvPgogICAgPGNpcmNsZSBjeD0iMTUuMDAwMSIgY3k9IjE1LjAwMDEiIHI9IjYuMzM3MjEiIGZpbGw9IiNFQjU3NTciIHN0cm9rZT0iI0Q3NDM0MyIvPgo8L3N2Zz4="
            ],
            "useMarkerImageFunction": true,
            "color": "#fe7569",
            "mapProvider": "CartoDB.Positron",
            "showTooltip": true,
            "autocloseTooltip": true,
            "defaultCenterPosition": "0,0",
            "showTooltipAction": "hover",
            "polygonKeyName": "coordinates",
            "polygonOpacity": 0.5,
            "polygonStrokeOpacity": 1,
            "polygonStrokeWeight": 1,
            "showPolygon": false,
            "markerImage": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzciIHZpZXdCb3g9IjAgMCAzMCAzNyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTUgMzUuNTg4MkMxNSAzNS41ODgyIDI5IDI2LjAyNjEgMjkgMTVDMjkgNy4yNjgwMSAyMi43MzIgMSAxNSAxQzcuMjY4MDEgMSAxIDcuMjY4MDEgMSAxNUMxIDI2LjAyNjEgMTUgMzUuNTg4MiAxNSAzNS41ODgyWk0xNC44MzU0IDI0LjcxNzZDMjAuMTExMyAyNC43MTc2IDI0LjM4ODMgMjAuNDQwNiAyNC4zODgzIDE1LjE2NDdDMjQuMzg4MyA5Ljg4ODc2IDIwLjExMTMgNS42MTE3NiAxNC44MzU0IDUuNjExNzZDOS41NTk0MSA1LjYxMTc2IDUuMjgyNDEgOS44ODg3NiA1LjI4MjQxIDE1LjE2NDdDNS4yODI0MSAyMC40NDA2IDkuNTU5NDEgMjQuNzE3NiAxNC44MzU0IDI0LjcxNzZaIiBmaWxsPSJ3aGl0ZSIvPgogICAgPHBhdGggZD0iTTE1IDM1LjU4ODJMMTQuNzE4IDM2LjAwMTFMMTUgMzYuMTkzN0wxNS4yODIgMzYuMDAxMUwxNSAzNS41ODgyWk0yOC41IDE1QzI4LjUgMjAuMzE1MSAyNS4xMTM4IDI1LjM0MTIgMjEuNjMzNiAyOS4wODg3QzE5LjkwMzQgMzAuOTUxNyAxOC4xNzE2IDMyLjQ3NTggMTYuODcxOCAzMy41MzQxQzE2LjIyMjMgMzQuMDYzIDE1LjY4MTYgMzQuNDc0OCAxNS4zMDQzIDM0Ljc1MzhDMTUuMTE1NyAzNC44OTMyIDE0Ljk2OCAzNC45OTk0IDE0Ljg2OCAzNS4wNzAzQzE0LjgxOCAzNS4xMDU4IDE0Ljc3OTkgMzUuMTMyNCAxNC43NTQ2IDM1LjE1QzE0Ljc0MiAzNS4xNTg4IDE0LjczMjUgMzUuMTY1MyAxNC43MjY0IDM1LjE2OTZDMTQuNzIzMyAzNS4xNzE3IDE0LjcyMTEgMzUuMTczMiAxNC43MTk3IDM1LjE3NDJDMTQuNzE5IDM1LjE3NDcgMTQuNzE4NSAzNS4xNzUgMTQuNzE4MiAzNS4xNzUyQzE0LjcxODEgMzUuMTc1MyAxNC43MTggMzUuMTc1MyAxNC43MTc5IDM1LjE3NTRDMTQuNzE3OSAzNS4xNzU0IDE0LjcxOCAzNS4xNzU0IDE1IDM1LjU4ODJDMTUuMjgyIDM2LjAwMTEgMTUuMjgyMiAzNi4wMDEgMTUuMjgyNCAzNi4wMDA5QzE1LjI4MjUgMzYuMDAwOCAxNS4yODI4IDM2LjAwMDYgMTUuMjgzMSAzNi4wMDA0QzE1LjI4MzYgMzYgMTUuMjg0NCAzNS45OTk1IDE1LjI4NTQgMzUuOTk4OEMxNS4yODc0IDM1Ljk5NzQgMTUuMjkwMiAzNS45OTU1IDE1LjI5MzkgMzUuOTkyOUMxNS4zMDEyIDM1Ljk4NzkgMTUuMzExOSAzNS45ODA1IDE1LjMyNTcgMzUuOTcwOUMxNS4zNTM0IDM1Ljk1MTYgMTUuMzk0IDM1LjkyMzIgMTUuNDQ2NSAzNS44ODZDMTUuNTUxNiAzNS44MTE1IDE1LjcwNDYgMzUuNzAxNCAxNS44OTg4IDM1LjU1NzlDMTYuMjg3MSAzNS4yNzA4IDE2Ljg0MDIgMzQuODQ5NCAxNy41MDMyIDM0LjMwOTZDMTguODI4NCAzMy4yMzA1IDIwLjU5NjYgMzEuNjc0OSAyMi4zNjY0IDI5Ljc2OTJDMjUuODg2MiAyNS45NzkgMjkuNSAyMC43MTEgMjkuNSAxNUgyOC41Wk0xNSAxLjVDMjIuNDU1OCAxLjUgMjguNSA3LjU0NDE2IDI4LjUgMTVIMjkuNUMyOS41IDYuOTkxODcgMjMuMDA4MSAwLjUgMTUgMC41VjEuNVpNMS41IDE1QzEuNSA3LjU0NDE2IDcuNTQ0MTYgMS41IDE1IDEuNVYwLjVDNi45OTE4NyAwLjUgMC41IDYuOTkxODcgMC41IDE1SDEuNVpNMTUgMzUuNTg4MkMxNS4yODIgMzUuMTc1NCAxNS4yODIxIDM1LjE3NTQgMTUuMjgyMSAzNS4xNzU0QzE1LjI4MiAzNS4xNzUzIDE1LjI4MTkgMzUuMTc1MyAxNS4yODE4IDM1LjE3NTJDMTUuMjgxNSAzNS4xNzUgMTUuMjgxIDM1LjE3NDcgMTUuMjgwMyAzNS4xNzQyQzE1LjI3ODkgMzUuMTczMiAxNS4yNzY3IDM1LjE3MTcgMTUuMjczNiAzNS4xNjk2QzE1LjI2NzUgMzUuMTY1MyAxNS4yNTggMzUuMTU4OCAxNS4yNDU0IDM1LjE1QzE1LjIyMDEgMzUuMTMyNCAxNS4xODIgMzUuMTA1OCAxNS4xMzIgMzUuMDcwM0MxNS4wMzIgMzQuOTk5NCAxNC44ODQzIDM0Ljg5MzIgMTQuNjk1NyAzNC43NTM4QzE0LjMxODQgMzQuNDc0OCAxMy43Nzc3IDM0LjA2MyAxMy4xMjgyIDMzLjUzNDFDMTEuODI4NCAzMi40NzU4IDEwLjA5NjYgMzAuOTUxNyA4LjM2NjM4IDI5LjA4ODdDNC44ODYxOSAyNS4zNDEyIDEuNSAyMC4zMTUxIDEuNSAxNUgwLjVDMC41IDIwLjcxMSA0LjExMzgxIDI1Ljk3OSA3LjYzMzYyIDI5Ljc2OTJDOS40MDM0MiAzMS42NzQ5IDExLjE3MTYgMzMuMjMwNSAxMi40OTY4IDM0LjMwOTZDMTMuMTU5OCAzNC44NDk0IDEzLjcxMjkgMzUuMjcwOCAxNC4xMDEyIDM1LjU1NzlDMTQuMjk1NCAzNS43MDE0IDE0LjQ0ODQgMzUuODExNSAxNC41NTM1IDM1Ljg4NkMxNC42MDYgMzUuOTIzMiAxNC42NDY2IDM1Ljk1MTYgMTQuNjc0MyAzNS45NzA5QzE0LjY4ODEgMzUuOTgwNSAxNC42OTg4IDM1Ljk4NzkgMTQuNzA2MSAzNS45OTI5QzE0LjcwOTggMzUuOTk1NSAxNC43MTI2IDM1Ljk5NzQgMTQuNzE0NiAzNS45OTg4QzE0LjcxNTYgMzUuOTk5NSAxNC43MTY0IDM2IDE0LjcxNjkgMzYuMDAwNEMxNC43MTcyIDM2LjAwMDYgMTQuNzE3NSAzNi4wMDA4IDE0LjcxNzYgMzYuMDAwOUMxNC43MTc4IDM2LjAwMSAxNC43MTggMzYuMDAxMSAxNSAzNS41ODgyWk0yMy44ODgzIDE1LjE2NDdDMjMuODg4MyAyMC4xNjQ1IDE5LjgzNTIgMjQuMjE3NiAxNC44MzU0IDI0LjIxNzZWMjUuMjE3NkMyMC4zODc0IDI1LjIxNzYgMjQuODg4MyAyMC43MTY4IDI0Ljg4ODMgMTUuMTY0N0gyMy44ODgzWk0xNC44MzU0IDYuMTExNzZDMTkuODM1MiA2LjExMTc2IDIzLjg4ODMgMTAuMTY0OSAyMy44ODgzIDE1LjE2NDdIMjQuODg4M0MyNC44ODgzIDkuNjEyNjIgMjAuMzg3NCA1LjExMTc2IDE0LjgzNTQgNS4xMTE3NlY2LjExMTc2Wk01Ljc4MjQxIDE1LjE2NDdDNS43ODI0MSAxMC4xNjQ5IDkuODM1NTUgNi4xMTE3NiAxNC44MzU0IDYuMTExNzZWNS4xMTE3NkM5LjI4MzI2IDUuMTExNzYgNC43ODI0MSA5LjYxMjYyIDQuNzgyNDEgMTUuMTY0N0g1Ljc4MjQxWk0xNC44MzU0IDI0LjIxNzZDOS44MzU1NSAyNC4yMTc2IDUuNzgyNDEgMjAuMTY0NSA1Ljc4MjQxIDE1LjE2NDdINC43ODI0MUM0Ljc4MjQxIDIwLjcxNjggOS4yODMyNiAyNS4yMTc2IDE0LjgzNTQgMjUuMjE3NlYyNC4yMTc2WiIgZmlsbD0iI0UwRTBFMCIvPgogICAgPGNpcmNsZSBjeD0iMTUuMDAwMSIgY3k9IjE1LjAwMDEiIHI9IjYuMzM3MjEiIGZpbGw9IiM2RkNGOTciIHN0cm9rZT0iIzIxOTY1MyIvPgo8L3N2Zz4=",
            "markerImageFunction": "var res = {\n    url: images[0],\n    size: 34\n};\nvar dailyConsumptionThresholdExceeded = (dsData[dsIndex]['dailyConsumptionThresholdExceeded'] && dsData[dsIndex]['dailyConsumptionThresholdExceeded'] === 'true');\nvar weeklyConsumptionThresholdExceeded = (dsData[dsIndex]['weeklyConsumptionThresholdExceeded'] && dsData[dsIndex]['weeklyConsumptionThresholdExceeded'] === 'true');\nvar inactive = (dsData[dsIndex]['deviceInactive'] && dsData[dsIndex]['deviceInactive'] === 'true');\nvar lowBattery = (dsData[dsIndex]['lowBattery'] && dsData[dsIndex]['lowBattery'] === 'true');\nvar lowTemperature = (dsData[dsIndex]['temperatureUnderThreshold'] && dsData[dsIndex]['temperatureUnderThreshold'] === 'true');\n\nif (inactive) {\n    res.url = images[2];\n} else if (dailyConsumptionThresholdExceeded || weeklyConsumptionThresholdExceeded || \n            lowBattery || lowTemperature) {\n    res.url = images[1];\n}\nreturn res;",
            "useTooltipFunction": true,
            "customProviderTileUrl": "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
            "zoomOnClick": true,
            "showCoverageOnHover": true,
            "animate": true,
            "maxClusterRadius": 80,
            "removeOutsideVisibleBounds": true,
            "tooltipFunction": "var dailyConsumptionThresholdExceeded = (dsData[dsIndex]['dailyConsumptionThresholdExceeded'] && dsData[dsIndex]['dailyConsumptionThresholdExceeded'] === 'true');\nvar weeklyConsumptionThresholdExceeded = (dsData[dsIndex]['weeklyConsumptionThresholdExceeded'] && dsData[dsIndex]['weeklyConsumptionThresholdExceeded'] === 'true');\nvar inactive = (dsData[dsIndex]['deviceInactive'] && dsData[dsIndex]['deviceInactive'] === 'true');\nvar lowBattery = (dsData[dsIndex]['lowBattery'] && dsData[dsIndex]['lowBattery'] === 'true');\nvar lowTemperature = (dsData[dsIndex]['temperatureUnderThreshold'] && dsData[dsIndex]['temperatureUnderThreshold'] === 'true');\n\nvar generalInfo = '<div><b style=\"line-height: 2; font-size: 14px;\">${entityName}</b><br/><span style=\"line-height: 2;\">Address: ${address}</span></div>';\nvar telemetryInfo = '<div><span>Consumed per week: ${weeklyConsumption:2} m<sup style=\"font-size: 9px;\">3</sup></span><br/><span>Consumed per day: ${dailyConsumption:2} m<sup style=\"font-size: 9px;\">3</sup></span><br/><span>Temperature: ${temperature:1}</span></div>';\n\nvar alarmsInfo = '';\nif (inactive) {\n    alarmsInfo += '<br/><span>Device inactive.</span>';\n} else {\n    if (dailyConsumptionThresholdExceeded) {\n        alarmsInfo += '<br/><span>Daily consumption threshold exceeded.</span>';\n    } \n    if (weeklyConsumptionThresholdExceeded) {\n        alarmsInfo += '<br/><span>Weekly consumption threshold exceeded.</span>';\n    } \n    if (lowBattery) {\n        alarmsInfo += '<br/><span>Low battery.</span>';\n    } \n    if (lowTemperature) {\n        alarmsInfo += '<br/><span>Low temperature.</span>';\n    }\n}\n\nvar label = generalInfo + telemetryInfo;\n\nif (alarmsInfo) {\n    label += '<div style=\"margin-top: 8px;\"><span>Alarms:</span>' + alarmsInfo + '</div>'\n}\n\nreturn label;",
            "provider": "openstreet-map",
            "mapPageSize": 16384,
            "tooltipPattern": "<b>${entityName}</b><br/><br/><b>Latitude:</b> ${latitude:7}<br/><b>Longitude:</b> ${longitude:7}",
            "useClusterMarkers": true
          },
          "title": "New OpenStreetMap",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "actions": {
            "markerClick": [
              {
                "id": "e2fbb18a-e0b7-67ef-52cb-414b3d606d30",
                "name": "Device Details",
                "icon": "more_horiz",
                "type": "openDashboardState",
                "targetDashboardStateId": "device_details",
                "setEntityId": true
              }
            ]
          },
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "displayTimewindow": true
        },
        "id": "2cbc9189-b947-2d31-e748-c928f036ff96"
      },
      "80ac9372-6c45-28e7-6c88-baf76fe78318": {
        "isSystemType": true,
        "bundleAlias": "alarm_widgets",
        "typeAlias": "alarms_table",
        "type": "alarm",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 14,
        "config": {
          "timewindow": {
            "realtime": {
              "interval": 1000,
              "timewindowMs": 2592000000
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSelection": true,
            "enableSearch": true,
            "displayDetails": false,
            "allowAcknowledgment": false,
            "allowClear": true,
            "displayPagination": false,
            "defaultPageSize": 10,
            "defaultSortOrder": "-createdTime",
            "alarmsTitle": "Active Alarms",
            "enableSelectColumnDisplay": true,
            "enableFilter": true
          },
          "title": "Active Alarms",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "alarmSource": {
            "type": "entity",
            "name": "alarms",
            "entityAliasId": "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
            "filterId": null,
            "dataKeys": [
              {
                "name": "createdTime",
                "type": "alarm",
                "label": "Created time",
                "color": "#2196f3",
                "settings": {},
                "_hash": 0.8381664834025695
              },
              {
                "name": "originator",
                "type": "alarm",
                "label": "Originator",
                "color": "#4caf50",
                "settings": {},
                "_hash": 0.2921772271979377
              },
              {
                "name": "type",
                "type": "alarm",
                "label": "Type",
                "color": "#f44336",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "useCellContentFunction": false
                },
                "_hash": 0.29133570655221086
              }
            ]
          },
          "alarmSearchStatus": "ACTIVE",
          "alarmsPollingInterval": 5,
          "datasources": [],
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "displayTimewindow": false,
          "actions": {
            "headerButton": [
              {
                "id": "1f58fb76-87bf-235a-4ce8-e3b67bf3c834",
                "name": "Alarms Details",
                "icon": "fullscreen",
                "type": "updateDashboardState",
                "targetDashboardStateId": "alarms",
                "setEntityId": false
              }
            ]
          },
          "alarmsMaxCountLoad": 0,
          "alarmsFetchSize": 100,
          "alarmStatusList": [
            "ACTIVE"
          ],
          "alarmSeverityList": [],
          "alarmTypeList": [
            "Daily Consumption Threshold Exceeded",
            "Weekly Consumption Threshold Exceeded",
            "Low Battery",
            "Low Temperature",
            "Device Inactive",
            "Leakage Detected"
          ],
          "searchPropagatedAlarms": false
        },
        "id": "80ac9372-6c45-28e7-6c88-baf76fe78318"
      },
      "b790fdaa-727a-2572-b2a2-c72a55444cbc": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "entities_table",
        "type": "latest",
        "title": "New widget",
        "sizeX": 12,
        "sizeY": 4,
        "config": {
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031165,
                "endTimeMs": 1678176431165
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSearch": true,
            "displayPagination": false,
            "defaultPageSize": 10,
            "displayEntityName": true,
            "displayEntityType": false,
            "defaultSortOrder": "entityName",
            "entitiesTitle": "Water Meters",
            "enableSelectColumnDisplay": true,
            "entityNameColumnTitle": "Serial Number",
            "displayEntityLabel": false,
            "entityLabelColumnTitle": "Label",
            "enableStickyHeader": true,
            "enableStickyAction": true,
            "reserveSpaceForHiddenAction": "true",
            "useRowStyleFunction": false
          },
          "title": "Water Meters",
          "dropShadow": false,
          "enableFullscreen": true,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "pulseCounter",
                  "type": "timeseries",
                  "label": "Latest reading",
                  "color": "#2196f3",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.6622074305397865,
                  "units": "mÂ³",
                  "decimals": 2,
                  "postFuncBody": "return value || 0;",
                  "usePostProcessing": true,
                  "funcBody": null
                },
                {
                  "name": "active",
                  "type": "attribute",
                  "label": "Status",
                  "color": "#ffc107",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.9076421001622259,
                  "postFuncBody": "if (value === 'true') {\n    return 'Active';\n} else {\n    return 'Inactive';\n}"
                },
                {
                  "name": "battery",
                  "type": "timeseries",
                  "label": "Battery level",
                  "color": "#ffc107",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.0013008241290599631,
                  "units": "%",
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "displayTimewindow": true,
          "actions": {
            "headerButton": [
              {
                "name": "Add Device",
                "icon": "add",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "customPretty",
                "customHtml": "<form #addDeviceForm=\"ngForm\" [formGroup]=\"addDeviceFormGroup\" class=\"add-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"add-device-form-toolbar\" fxLayout=\"row\">\n            <h2>Add Device</h2>\n            <span fxFlex></span>\n            <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n                <mat-icon class=\"material-icons\">close</mat-icon>\n            </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Serial Number</mat-label>\n                    <input matInput formControlName=\"deviceName\" required>\n                    <mat-error *ngIf=\"addDeviceFormGroup.get('deviceName').hasError('required')\">\n                        Serial Number is required.\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"deviceLabel\" >\n                </mat-form-field>\n            </div>\n            <div formGroupName=\"attributes\" fxLayout=\"column\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Address</mat-label>\n                    <input matInput formControlName=\"address\">\n                </mat-form-field>\n            </div>\n            <mat-form-field class=\"mat-block\">\n                <mat-label>Select device owner</mat-label>\n                <mat-select formControlName=\"targetOwner\" required>\n                    <mat-select-trigger>\n                        {{addDeviceFormGroup.get('targetOwner').value?.name}}\n                    </mat-select-trigger>\n                    <mat-option *ngFor=\"let owner of availableOwners\" [value]=\"owner\">\n                        {{owner?.name}}\n                    </mat-option>\n                    <mat-option *ngIf=\"!availableOwners?.length\" disabled [value]=\"null\">\n                        No owners available\n                    </mat-option>\n                </mat-select>\n                <mat-error *ngIf=\"addDeviceFormGroup.get('targetOwner').hasError('required')\">\n                    Target owner is required.\n                </mat-error>\n            </mat-form-field>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"add-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || addDeviceForm.invalid || !addDeviceForm.dirty\">\n            Create\n        </button>\n    </div>\n</form>",
                "customCss": ".add-device-form mat-toolbar.add-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.add-device-form .add-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    deviceService = $injector.get(widgetContext.servicesMap.get('deviceService')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService')),\n    entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService')),\n    entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService'));\n    entityService = $injector.get(widgetContext.servicesMap.get('entityService'));\n    // userPermissionsService = $injector.get(widgetContext.servicesMap.get('userPermissionsService'));\n\nopenAddDeviceDialog();\n\nfunction openAddDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, AddDeviceDialogController).subscribe();\n}\n\nfunction AddDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.deviceType = 'Water Meter';\n\n    // vm.ownerId = userPermissionsService.getUserOwnerId();\n    // vm.excludeOwnerIds = [vm.ownerId.id];\n\n    vm.addDeviceFormGroup = vm.fb.group({\n        deviceName: ['', [vm.validators.required]],\n        deviceLabel: [null],\n        attributes: vm.fb.group({\n            address: [null]\n        }),\n        targetOwner: [null, [vm.validators.required]]\n    });\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.addDeviceFormGroup.markAsPristine();\n        const formValues = vm.addDeviceFormGroup.value;\n        let device = {\n            name: formValues.deviceName,\n            type: vm.deviceType,\n            label: formValues.deviceLabel\n        };\n        let targetOwner = formValues.targetOwner;\n        if (targetOwner.id.entityType === 'CUSTOMER') {\n            device.customerId = targetOwner.id;\n        }\n        deviceService.saveDevice(device).subscribe(\n            (device) => {\n                widgetContext.rxjs.forkJoin([\n                    saveAttributes(device.id),\n                    addRelation(device.id, targetOwner)\n                ]).subscribe(\n                    () => {\n                        vm.loading = false;\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n    \n    init();\n    \n    function init() {\n        vm.availableOwners = [\n            {\n                name: 'Tenant',\n                id: {id: widgetContext.currentUser.tenantId, entityType: 'TENANT' }\n            }\n        ];\n        getEntityGroupByName('Water Metering', 'CUSTOMER').subscribe((waterMeteringGroup) => {\n          if (waterMeteringGroup) {\n              var query = {\n                  entityFilter: {\n                      type: 'entityGroup',\n                      groupType: 'CUSTOMER',\n                      entityGroup: waterMeteringGroup.id.id\n                  },\n                  pageLink: {\n                      pageSize: 100,\n                      page: 0\n                  },\n                  entityFields: [\n                      {\n                          key: 'name',\n                          type: 'ENTITY_FIELD'\n                      }\n                  ]\n              };\n              entityService.findEntityDataByQuery(query).subscribe(\n                  (data) => {\n                      const availableCustomers = data.data.map((entityData) => {\n                          return {\n                              id: entityData.entityId,\n                              name: entityData.latest[\"ENTITY_FIELD\"].name.value\n                          };\n                      });\n                      vm.availableOwners = vm.availableOwners.concat(availableCustomers);\n                  }\n              );\n          }\n      });\n    }\n\n    function saveAttributes(entityId) {\n        let attributes = vm.addDeviceFormGroup.get('attributes').value;\n        attributes.inactivityTimeout = 7200000;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== null) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        } else {\n            return widgetContext.rxjs.of([]);\n        }\n    }\n    \n    function addRelation(deviceId, targetOwner) {\n        if (targetOwner.id.entityType === 'TENANT') {\n            return widgetContext.rxjs.of(null);\n        } else {\n            let relation = {\n                type: 'Owns',\n                typeGroup: 'COMMON',\n                from: targetOwner.id,\n                to: deviceId\n            };\n    \n            return entityRelationService.saveRelation(relation);\n        }\n    }\n    \n    function getEntityGroupByName(groupName, groupType) {\n      var entityGroupsPageLink = widgetContext.pageLink(10, 0, groupName);\n      return entityGroupService.getEntityGroupsByPageLink(entityGroupsPageLink, groupType, {ignoreLoading: true}).pipe(\n          widgetContext.rxjs.map((data) => {\n            if (data.data.length) {\n                return data.data.find((group) => group.name === groupName);\n            } else {\n                return null;\n            }\n          })\n      );\n  }\n\n}",
                "customResources": [],
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "43825616-f5df-93df-cda9-26a711cee096"
              }
            ],
            "rowClick": [
              {
                "id": "ccdbb8cb-7173-340c-663a-be72ceb9c340",
                "name": "Device Details",
                "icon": "more_horiz",
                "type": "openDashboardState",
                "targetDashboardStateId": "device_details",
                "setEntityId": true
              }
            ]
          }
        },
        "id": "b790fdaa-727a-2572-b2a2-c72a55444cbc"
      },
      "94d73536-d206-eb83-651a-36691a0abc2e": {
        "isSystemType": true,
        "bundleAlias": "charts",
        "typeAlias": "timeseries_bars_flot",
        "type": "timeseries",
        "title": "New widget",
        "sizeX": 12,
        "sizeY": 4,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "9da9bd9c-a7cc-244f-16ac-3e2045cff5b1",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "dailyConsumption",
                  "type": "timeseries",
                  "label": "Daily Consumption",
                  "color": "#2196f3",
                  "settings": {
                    "excludeFromStacking": false,
                    "hideDataByDefault": false,
                    "disableDataHiding": false,
                    "removeFromLegend": false,
                    "showLines": false,
                    "fillLines": false,
                    "showPoints": false,
                    "showPointShape": "circle",
                    "pointShapeFormatter": "var size = radius * Math.sqrt(Math.PI) / 2;\nctx.moveTo(x - size, y - size);\nctx.lineTo(x + size, y + size);\nctx.moveTo(x - size, y + size);\nctx.lineTo(x + size, y - size);",
                    "showPointsLineWidth": 5,
                    "showPointsRadius": 3,
                    "showSeparateAxis": false,
                    "axisPosition": "left",
                    "thresholds": [
                      {
                        "thresholdValueSource": "predefinedValue"
                      }
                    ],
                    "comparisonSettings": {
                      "showValuesForComparison": true
                    }
                  },
                  "_hash": 0.03819717256158417,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "interval": 43200000,
              "timewindowMs": 604800000
            },
            "aggregation": {
              "type": "SUM",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "shadowSize": 4,
            "fontColor": "#545454",
            "fontSize": 10,
            "xaxis": {
              "showLabels": true,
              "color": "#545454"
            },
            "yaxis": {
              "showLabels": true,
              "color": "#545454",
              "tickDecimals": 1
            },
            "grid": {
              "color": "#ffffff",
              "tickColor": "#DDDDDD",
              "verticalLines": false,
              "horizontalLines": true,
              "outlineWidth": 1
            },
            "stack": true,
            "tooltipIndividual": false,
            "defaultBarWidth": 43200000,
            "timeForComparison": "months",
            "xaxisSecond": {
              "axisPosition": "top",
              "showLabels": true
            },
            "barAlignment": "left"
          },
          "title": "Water Consumption",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "mobileHeight": null,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "useDashboardTimewindow": true,
          "showLegend": true,
          "actions": {},
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "units": "mÂ³",
          "decimals": 2,
          "displayTimewindow": false,
          "legendConfig": {
            "direction": "column",
            "position": "bottom",
            "sortDataKeys": false,
            "showMin": false,
            "showMax": false,
            "showAvg": false,
            "showTotal": true
          }
        },
        "id": "94d73536-d206-eb83-651a-36691a0abc2e"
      },
      "0f9314f3-6f25-3e97-e2a4-8e2a16feda2b": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "dataKeys": [
                {
                  "name": "weeklyConsumption",
                  "type": "timeseries",
                  "label": "weeklyConsumption",
                  "color": "#4caf50",
                  "settings": {},
                  "_hash": 0.6873469556096485,
                  "postFuncBody": "return value || 0;"
                }
              ],
              "entityAliasId": "9da9bd9c-a7cc-244f-16ac-3e2045cff5b1"
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031165,
                "endTimeMs": 1678176431165
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   border: 1px solid #E0E0E0;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 22px 30px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .value {\n    font-size: 1.5em;\n    font-weight: bold;\n    line-height: 1.5;\n    color: #333333;\n    text-align: center;\n}\n\n.card .description {\n    font-size: 1em;\n    font-weight: normal;\n    line-height: 1.5;\n    color: #333333;\n    text-align: center;\n}\n\n@media (min-width: 960px) and (max-width: 1200px) {\n    .card .value {\n        font-size: 1.2em;\n        line-height: 1;\n    }\n    \n    .card .description {\n        font-size: 0.8em;\n        line-height: 1;\n    }\n}",
            "cardHtml": "<div class='card' id=\"analyticsCard\">\n    <div class='content' id=\"analyticsCard\">\n        <div class='value' id=\"analyticsCard\">\n            ${weeklyConsumption:2} m<sup>3</sup>\n        </div> \n        <div class='description' id=\"analyticsCard\">\n            Consumed per current week\n        </div>\n    </div>\n</div>"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "name": "analyticsCard",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "analytics",
                "setEntityId": false,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "id": "6580398e-9bb7-d7c7-8cde-c1a190adb9cd"
              }
            ]
          },
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "displayTimewindow": true
        },
        "id": "0f9314f3-6f25-3e97-e2a4-8e2a16feda2b"
      },
      "17543c57-af4a-2c1e-bf12-53a7b46791e6": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entityCount",
              "name": "",
              "entityAliasId": "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
              "filterId": "f5f657e4-89f6-c90d-fd0f-16d0d3bb91ec",
              "dataKeys": [
                {
                  "name": "count",
                  "type": "count",
                  "label": "activeDevicesNumber",
                  "color": "#4caf50",
                  "settings": {},
                  "_hash": 0.7404827038869322,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031165,
                "endTimeMs": 1678176431165
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   border: 1px solid #E0E0E0;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 22px 30px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .value {\n    font-size: 1.5em;\n    font-weight: bold;\n    line-height: 1.5;\n    color: #333333;\n    text-align: center;\n}\n\n.card .description {\n    font-size: 1em;\n    font-weight: normal;\n    line-height: 1.5;\n    color: #333333;\n    text-align: center;\n}\n\n@media (min-width: 960px) and (max-width: 1200px) {\n    .card .value {\n        font-size: 1.2em;\n        line-height: 1;\n    }\n    \n    .card .description {\n        font-size: 0.8em;\n        line-height: 1;\n    }\n}",
            "cardHtml": "<div class='card' id=\"activeDevices\">\n    <div class='content' id=\"activeDevices\">\n        <div class='value' id=\"activeDevices\">\n            ${activeDevicesNumber:0}\n        </div> \n        <div class='description' id=\"activeDevices\">\n            Active devices\n        </div>\n    </div>\n</div>"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "name": "activeDevices",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "active_devices",
                "setEntityId": false,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "id": "ecee0df6-b0d9-9636-3665-870c35044b42"
              }
            ]
          },
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "displayTimewindow": true
        },
        "id": "17543c57-af4a-2c1e-bf12-53a7b46791e6"
      },
      "a3c7811c-0a83-865b-af64-bed805a685f2": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entityCount",
              "name": null,
              "entityAliasId": "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
              "filterId": "c5135f23-0850-88ed-3176-bdcdb8fddcba",
              "dataKeys": [
                {
                  "name": "count",
                  "type": "count",
                  "label": "lowBatteryDevicesNumber",
                  "color": "#4caf50",
                  "settings": {},
                  "_hash": 0.05443601143832355,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031165,
                "endTimeMs": 1678176431165
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   border: 1px solid #E0E0E0;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 22px 30px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .value {\n    font-size: 1.5em;\n    font-weight: bold;\n    line-height: 1.5;\n    color: #F2994A;\n    text-align: center;\n}\n\n.card .description {\n    font-size: 1em;\n    font-weight: normal;\n    line-height: 1.5;\n    color: #333333;\n    text-align: center;\n}\n\n@media (min-width: 960px) and (max-width: 1200px) {\n    .card .value {\n        font-size: 1.2em;\n        line-height: 1;\n    }\n    \n    .card .description {\n        font-size: 0.8em;\n        line-height: 1;\n    }\n}",
            "cardHtml": "<div class='card' id=\"lowBatteryDevices\">\n    <div class='content' id=\"lowBatteryDevices\">\n        <div class='value' id=\"lowBatteryDevices\">\n            ${lowBatteryDevicesNumber:0}\n        </div> \n        <div class='description' id=\"lowBatteryDevices\">\n            Low battery devices\n        </div>\n    </div>\n</div>"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "name": "lowBatteryDevices",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "low_battery_devices",
                "setEntityId": false,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "id": "b1c76d34-d6e4-a698-386d-721a6fad6f8a"
              }
            ]
          },
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "displayTimewindow": true
        },
        "id": "a3c7811c-0a83-865b-af64-bed805a685f2"
      },
      "457136f8-c871-1835-c9fc-276a3231ec86": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entityCount",
              "name": null,
              "entityAliasId": "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
              "filterId": "0f79c9b4-ffdb-f8fa-e860-a45095837597",
              "dataKeys": [
                {
                  "name": "count",
                  "type": "count",
                  "label": "inactiveDevicesNumber",
                  "color": "#4caf50",
                  "settings": {},
                  "_hash": 0.7518461373516785,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031165,
                "endTimeMs": 1678176431165
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   border: 1px solid #E0E0E0;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 22px 30px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .value {\n    font-size: 1.5em;\n    font-weight: bold;\n    line-height: 1.5;\n    color: #EB5757;\n    text-align: center;\n}\n\n.card .description {\n    font-size: 1em;\n    font-weight: normal;\n    line-height: 1.5;\n    color: #333333;\n    text-align: center;\n}\n\n@media (min-width: 960px) and (max-width: 1200px) {\n    .card .value {\n        font-size: 1.2em;\n        line-height: 1;\n    }\n    \n    .card .description {\n        font-size: 0.8em;\n        line-height: 1;\n    }\n}",
            "cardHtml": "<div class='card' id=\"inactiveDevices\">\n    <div class='content' id=\"inactiveDevices\">\n        <div class='value' id=\"inactiveDevices\">\n            ${inactiveDevicesNumber:0}\n        </div> \n        <div class='description' id=\"inactiveDevices\">\n            Inactive devices\n        </div>\n    </div>\n</div>"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "name": "inactiveDevices",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "inactive_devices",
                "setEntityId": false,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "id": "20174295-39d9-1284-46b1-d9325c928cca"
              }
            ]
          },
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "displayTimewindow": true
        },
        "id": "457136f8-c871-1835-c9fc-276a3231ec86"
      },
      "ccc94584-ce53-cdfc-ea3b-ecd21fa19abf": {
        "isSystemType": true,
        "bundleAlias": "charts",
        "typeAlias": "basic_timeseries",
        "type": "timeseries",
        "title": "New widget",
        "sizeX": 24,
        "sizeY": 13,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": "Sensors",
              "entityAliasId": "9da9bd9c-a7cc-244f-16ac-3e2045cff5b1",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "dailyConsumption",
                  "type": "timeseries",
                  "label": "Consumption",
                  "color": "#2196f3",
                  "settings": {
                    "showLines": true,
                    "fillLines": false,
                    "showPoints": false,
                    "showPointsRadius": 3,
                    "showSeparateAxis": false,
                    "axisPosition": "left",
                    "showPointShape": "circle",
                    "pointShapeFormatter": "var size = radius * Math.sqrt(Math.PI) / 2;\nctx.moveTo(x - size, y - size);\nctx.lineTo(x + size, y + size);\nctx.moveTo(x - size, y + size);\nctx.lineTo(x + size, y - size);",
                    "showPointsLineWidth": 5,
                    "comparisonSettings": {
                      "showValuesForComparison": true,
                      "color": "#a5d6a7"
                    }
                  },
                  "_hash": 0.04598716421616311,
                  "units": "mÂ³",
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "timewindow": {
            "hideInterval": false,
            "hideAggregation": false,
            "hideAggInterval": false,
            "hideTimezone": false,
            "selectedTab": 1,
            "history": {
              "historyType": 2,
              "timewindowMs": 60000,
              "interval": 1800000,
              "fixedTimewindow": {
                "startTimeMs": 1616088611969,
                "endTimeMs": 1616175011969
              },
              "quickInterval": "CURRENT_WEEK_ISO"
            },
            "aggregation": {
              "type": "NONE",
              "limit": 2500
            },
            "timezone": "UTC"
          },
          "showTitle": true,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "shadowSize": 4,
            "fontColor": "#545454",
            "fontSize": 10,
            "xaxis": {
              "showLabels": true,
              "color": "#545454"
            },
            "yaxis": {
              "showLabels": true,
              "color": "#545454",
              "tickDecimals": 1
            },
            "grid": {
              "color": "#ffffff",
              "tickColor": "#DDDDDD",
              "verticalLines": false,
              "horizontalLines": true,
              "outlineWidth": 1
            },
            "stack": false,
            "tooltipIndividual": false,
            "smoothLines": true,
            "timeForComparison": "previousInterval",
            "xaxisSecond": {
              "axisPosition": "top",
              "showLabels": true
            },
            "comparisonEnabled": true,
            "customLegendEnabled": false,
            "dataKeysListForLabels": []
          },
          "title": "Water Consumption",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "mobileHeight": null,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "useDashboardTimewindow": false,
          "displayTimewindow": true,
          "showLegend": true,
          "legendConfig": {
            "direction": "row",
            "position": "bottom",
            "sortDataKeys": null,
            "showMin": false,
            "showMax": true,
            "showAvg": true,
            "showTotal": true
          },
          "actions": {},
          "decimals": 2
        },
        "id": "ccc94584-ce53-cdfc-ea3b-ecd21fa19abf"
      },
      "251d21ce-9e8b-5ca7-2f73-037ede2cdb99": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n    opacity: 0.5;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content'>\n        <div class='description'>\n            Total\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation: Total",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {}
        },
        "id": "251d21ce-9e8b-5ca7-2f73-037ede2cdb99"
      },
      "bc571516-ba90-ae54-66d0-ed9c2568ec34": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Analytics",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "analytics",
                "icon": "more_horiz",
                "type": "custom",
                "customFunction": "openDashboardState('analytics');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              }
            ]
          }
        },
        "id": "bc571516-ba90-ae54-66d0-ed9c2568ec34"
      },
      "20e020b4-4030-4f44-b4fd-a755f80c7655": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Devices",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "devices",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "devices",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "20e020b4-4030-4f44-b4fd-a755f80c7655"
      },
      "2a550cd5-86ad-eae5-18e2-5969c6b9cb84": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id='customers'>\n        <div class='description' id='customers'>\n            Customers\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Customers",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "Navigate to the list of customers",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "name": "customers",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "customers",
                "setEntityId": false,
                "stateEntityParamName": null,
                "openRightLayout": null,
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207"
              }
            ]
          }
        },
        "id": "2a550cd5-86ad-eae5-18e2-5969c6b9cb84"
      },
      "3e16be85-537b-efc5-8a98-82f124103bcf": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"alarms\">\n        <div class='description' id=\"alarms\">\n            Alarms\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Alarms",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "alarms",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "alarms",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "3e16be85-537b-efc5-8a98-82f124103bcf"
      },
      "265668f3-eeba-ab67-ffc2-014bdf20a6ae": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"settings\">\n        <div class='description' id=\"settings\">\n            Settings\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Settings",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "settings",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "settings",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "265668f3-eeba-ab67-ffc2-014bdf20a6ae"
      },
      "a864701f-57f3-e665-21bc-a3ad1f8438da": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"total\">\n        <div class='description' id=\"total\">\n            Total\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation: Total",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "1d64528e-686d-0ba7-6e3a-8124e612a0f1",
                "name": "total",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "default",
                "setEntityId": false
              }
            ],
            "headerButton": []
          }
        },
        "id": "a864701f-57f3-e665-21bc-a3ad1f8438da"
      },
      "ee542aaf-7305-9baa-3022-34a9da7b45ed": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n    opacity: 0.5;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Analytics",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "analytics",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "analytics",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "ee542aaf-7305-9baa-3022-34a9da7b45ed"
      },
      "d3ea68cf-4dd0-a261-a04f-7008b3d2eed4": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Devices",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "devices",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "devices",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "d3ea68cf-4dd0-a261-a04f-7008b3d2eed4"
      },
      "117490c6-fa7f-34cf-1de9-dfbc6068bbdb": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"alarms\">\n        <div class='description' id=\"alarms\">\n            Alarms\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Alarms",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "alarms",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "alarms",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "117490c6-fa7f-34cf-1de9-dfbc6068bbdb"
      },
      "66e7a232-0011-b462-e359-c5d99a2a9c56": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"settings\">\n        <div class='description' id=\"settings\">\n            Settings\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Settings",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "settings",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "settings",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "66e7a232-0011-b462-e359-c5d99a2a9c56"
      },
      "5b171713-09c1-5b9a-2572-8b8b731d180d": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"total\">\n        <div class='description' id=\"total\">\n            Total\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation: Total",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "1d64528e-686d-0ba7-6e3a-8124e612a0f1",
                "name": "total",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "default",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "5b171713-09c1-5b9a-2572-8b8b731d180d"
      },
      "7cfe3a55-4100-6f3c-7873-db3a2e175602": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"total\">\n        <div class='description' id=\"total\">\n            Total\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation: Total",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "1d64528e-686d-0ba7-6e3a-8124e612a0f1",
                "name": "total",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "default",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "7cfe3a55-4100-6f3c-7873-db3a2e175602"
      },
      "b85b4e51-42dd-1ea6-84a6-14d701fd8875": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"total\">\n        <div class='description' id=\"total\">\n            Total\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation: Total",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "1d64528e-686d-0ba7-6e3a-8124e612a0f1",
                "name": "total",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "default",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "b85b4e51-42dd-1ea6-84a6-14d701fd8875"
      },
      "1b2ee163-50d8-ae49-46ba-9b616bc63631": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Analytics",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "analytics",
                "icon": "more_horiz",
                "type": "custom",
                "customFunction": "openDashboardState('analytics');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              }
            ]
          }
        },
        "id": "1b2ee163-50d8-ae49-46ba-9b616bc63631"
      },
      "efc2c22c-ece5-bcfe-d5f1-1b15125b7f01": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Analytics",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "analytics",
                "icon": "more_horiz",
                "type": "custom",
                "customFunction": "openDashboardState('analytics');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              }
            ]
          }
        },
        "id": "efc2c22c-ece5-bcfe-d5f1-1b15125b7f01"
      },
      "6c91bf1f-bdf6-6af7-de49-079b89bee211": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Analytics",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "analytics",
                "icon": "more_horiz",
                "type": "custom",
                "customFunction": "openDashboardState('analytics');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              }
            ]
          }
        },
        "id": "6c91bf1f-bdf6-6af7-de49-079b89bee211"
      },
      "7bf92548-b95f-2874-92c4-6675571878ad": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n    opacity: 0.5;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Devices",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": []
          }
        },
        "id": "7bf92548-b95f-2874-92c4-6675571878ad"
      },
      "5a352e8c-34bd-d93b-2fb3-c41905cf9e3a": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Devices",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "devices",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "devices",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "5a352e8c-34bd-d93b-2fb3-c41905cf9e3a"
      },
      "05cb8c19-3d4f-b147-a377-8ab72aa3057d": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Devices",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "devices",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "devices",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "05cb8c19-3d4f-b147-a377-8ab72aa3057d"
      },
      "e91e4167-68c3-5d5d-efc5-a19ec8fb999c": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"alarms\">\n        <div class='description' id=\"alarms\">\n            Alarms\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Alarms",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "alarms",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "alarms",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "e91e4167-68c3-5d5d-efc5-a19ec8fb999c"
      },
      "6727afe1-7b86-7c58-5873-a9700a83edec": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n    opacity: 0.5;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content'>\n        <div class='description'>\n            Alarms\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Alarms",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": []
          }
        },
        "id": "6727afe1-7b86-7c58-5873-a9700a83edec"
      },
      "70b3ca21-cc98-46ea-1676-16d3edea2a65": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"alarms\">\n        <div class='description' id=\"alarms\">\n            Alarms\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Alarms",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "alarms",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "alarms",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "70b3ca21-cc98-46ea-1676-16d3edea2a65"
      },
      "be3eb9bd-21f7-250c-ccf5-1d2dd67b73e2": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"settings\">\n        <div class='description' id=\"settings\">\n            Settings\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Settings",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "settings",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "settings",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "be3eb9bd-21f7-250c-ccf5-1d2dd67b73e2"
      },
      "9ac96f6f-ed61-67b2-5695-3fe61064b7f8": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"settings\">\n        <div class='description' id=\"settings\">\n            Settings\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Settings",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "settings",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "settings",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "9ac96f6f-ed61-67b2-5695-3fe61064b7f8"
      },
      "936cf52c-f762-628e-00e8-363b53e1af4f": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n    opacity: 0.5\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content'>\n        <div class='description'>\n            Settings\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Settings",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": []
          }
        },
        "id": "936cf52c-f762-628e-00e8-363b53e1af4f"
      },
      "291ab4b2-f371-9897-6856-385e5745f430": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "entities_table",
        "type": "latest",
        "title": "New widget",
        "sizeX": 24,
        "sizeY": 16,
        "config": {
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031165,
                "endTimeMs": 1678176431165
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSearch": true,
            "displayPagination": false,
            "defaultPageSize": 10,
            "displayEntityName": true,
            "displayEntityType": false,
            "defaultSortOrder": "entityName",
            "entitiesTitle": "Water Meters",
            "displayEntityLabel": true,
            "enableSelectColumnDisplay": true,
            "entityNameColumnTitle": "Serial Number",
            "entityLabelColumnTitle": "Label",
            "enableStickyHeader": true,
            "enableStickyAction": true,
            "reserveSpaceForHiddenAction": "true",
            "useRowStyleFunction": false
          },
          "title": "Water Meters",
          "dropShadow": false,
          "enableFullscreen": true,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "pulseCounter",
                  "type": "timeseries",
                  "label": "Latest reading",
                  "color": "#2196f3",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.6622074305397865,
                  "units": "mÂ³",
                  "decimals": 2,
                  "postFuncBody": "return value || 0;",
                  "usePostProcessing": true,
                  "funcBody": null
                },
                {
                  "name": "address",
                  "type": "attribute",
                  "label": "Address",
                  "color": "#f44336",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.9392023657375805
                },
                {
                  "name": "active",
                  "type": "attribute",
                  "label": "Status",
                  "color": "#ffc107",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.9076421001622259,
                  "postFuncBody": "if (value === 'true') {\n    return 'Active';\n} else {\n    return 'Inactive';\n}"
                },
                {
                  "name": "leakage",
                  "type": "timeseries",
                  "label": "Leakage",
                  "color": "#8bc34a",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": true,
                    "useCellContentFunction": true,
                    "cellStyleFunction": "var color;\nif (value == 'true') {\n    color = '#EB5757';\n} else {\n    color = '#27AE60';\n}\nreturn {\n    color: color,\n    fontSize: '18px'\n};",
                    "cellContentFunction": "value = '&#11044;';\nreturn value;"
                  },
                  "_hash": 0.9508568110027811,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "displayTimewindow": true,
          "actions": {
            "headerButton": [
              {
                "name": "Add device",
                "icon": "add",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "customPretty",
                "customHtml": "<form #addDeviceForm=\"ngForm\" [formGroup]=\"addDeviceFormGroup\" class=\"add-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"add-device-form-toolbar\" fxLayout=\"row\">\n            <h2>Add Device</h2>\n            <span fxFlex></span>\n            <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n                <mat-icon class=\"material-icons\">close</mat-icon>\n            </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Serial Number</mat-label>\n                    <input matInput formControlName=\"deviceName\" required>\n                    <mat-error *ngIf=\"addDeviceFormGroup.get('deviceName').hasError('required')\">\n                        Serial Number is required.\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"deviceLabel\" >\n                </mat-form-field>\n            </div>\n            <div formGroupName=\"attributes\" fxLayout=\"column\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Address</mat-label>\n                    <input matInput formControlName=\"address\">\n                </mat-form-field>\n            </div>\n            <mat-form-field class=\"mat-block\">\n                <mat-label>Select device owner</mat-label>\n                <mat-select formControlName=\"targetOwner\" required>\n                    <mat-select-trigger>\n                        {{addDeviceFormGroup.get('targetOwner').value?.name}}\n                    </mat-select-trigger>\n                    <mat-option *ngFor=\"let owner of availableOwners\" [value]=\"owner\">\n                        {{owner?.name}}\n                    </mat-option>\n                    <mat-option *ngIf=\"!availableOwners?.length\" disabled [value]=\"null\">\n                        No owners available\n                    </mat-option>\n                </mat-select>\n                <mat-error *ngIf=\"addDeviceFormGroup.get('targetOwner').hasError('required')\">\n                    Target owner is required.\n                </mat-error>\n            </mat-form-field>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"add-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || addDeviceForm.invalid || !addDeviceForm.dirty\">\n            Create\n        </button>\n    </div>\n</form>",
                "customCss": ".add-device-form mat-toolbar.add-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.add-device-form .add-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    deviceService = $injector.get(widgetContext.servicesMap.get('deviceService')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService')),\n    entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService')),\n    entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService'));\n    entityService = $injector.get(widgetContext.servicesMap.get('entityService'));\n    // userPermissionsService = $injector.get(widgetContext.servicesMap.get('userPermissionsService'));\n\nopenAddDeviceDialog();\n\nfunction openAddDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, AddDeviceDialogController).subscribe();\n}\n\nfunction AddDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.deviceType = 'Water Meter';\n\n    // vm.ownerId = userPermissionsService.getUserOwnerId();\n    // vm.excludeOwnerIds = [vm.ownerId.id];\n\n    vm.addDeviceFormGroup = vm.fb.group({\n        deviceName: ['', [vm.validators.required]],\n        deviceLabel: [null],\n        attributes: vm.fb.group({\n            address: [null]\n        }),\n        targetOwner: [null, [vm.validators.required]]\n    });\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.addDeviceFormGroup.markAsPristine();\n        const formValues = vm.addDeviceFormGroup.value;\n        let device = {\n            name: formValues.deviceName,\n            type: vm.deviceType,\n            label: formValues.deviceLabel\n        };\n        let targetOwner = formValues.targetOwner;\n        if (targetOwner.id.entityType === 'CUSTOMER') {\n            device.customerId = targetOwner.id;\n        }\n        deviceService.saveDevice(device).subscribe(\n            (device) => {\n                widgetContext.rxjs.forkJoin([\n                    saveAttributes(device.id),\n                    addRelation(device.id, targetOwner)\n                ]).subscribe(\n                    () => {\n                        vm.loading = false;\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n    \n    init();\n    \n    function init() {\n        vm.availableOwners = [\n            {\n                name: 'Tenant',\n                id: {id: widgetContext.currentUser.tenantId, entityType: 'TENANT' }\n            }\n        ];\n        getEntityGroupByName('Water Metering', 'CUSTOMER').subscribe((waterMeteringGroup) => {\n          if (waterMeteringGroup) {\n              var query = {\n                  entityFilter: {\n                      type: 'entityGroup',\n                      groupType: 'CUSTOMER',\n                      entityGroup: waterMeteringGroup.id.id\n                  },\n                  pageLink: {\n                      pageSize: 100,\n                      page: 0\n                  },\n                  entityFields: [\n                      {\n                          key: 'name',\n                          type: 'ENTITY_FIELD'\n                      }\n                  ]\n              };\n              entityService.findEntityDataByQuery(query).subscribe(\n                  (data) => {\n                      const availableCustomers = data.data.map((entityData) => {\n                          return {\n                              id: entityData.entityId,\n                              name: entityData.latest[\"ENTITY_FIELD\"].name.value\n                          };\n                      });\n                      vm.availableOwners = vm.availableOwners.concat(availableCustomers);\n                  }\n              );\n          }\n      });\n    }\n\n    function saveAttributes(entityId) {\n        let attributes = vm.addDeviceFormGroup.get('attributes').value;\n        attributes.inactivityTimeout = 7200000;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== null) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        } else {\n            return widgetContext.rxjs.of([]);\n        }\n    }\n    \n    function addRelation(deviceId, targetOwner) {\n        if (targetOwner.id.entityType === 'TENANT') {\n            return widgetContext.rxjs.of(null);\n        } else {\n            let relation = {\n                type: 'Owns',\n                typeGroup: 'COMMON',\n                from: targetOwner.id,\n                to: deviceId\n            };\n    \n            return entityRelationService.saveRelation(relation);\n        }\n    }\n    \n    function getEntityGroupByName(groupName, groupType) {\n      var entityGroupsPageLink = widgetContext.pageLink(10, 0, groupName);\n      return entityGroupService.getEntityGroupsByPageLink(entityGroupsPageLink, groupType, {ignoreLoading: true}).pipe(\n          widgetContext.rxjs.map((data) => {\n            if (data.data.length) {\n                return data.data.find((group) => group.name === groupName);\n            } else {\n                return null;\n            }\n          })\n      );\n  }\n\n}",
                "customResources": [],
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "1044aeb8-0967-9f56-cee1-cf700dc861ca"
              }
            ],
            "rowClick": [
              {
                "id": "81dffda7-f420-5b50-05ff-fa08077b9eb9",
                "name": "Device Details",
                "icon": "more_horiz",
                "type": "openDashboardState",
                "targetDashboardStateId": "device_details",
                "setEntityId": true
              }
            ],
            "actionCellButton": [
              {
                "name": "Edit Info",
                "icon": "edit",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "customPretty",
                "customHtml": "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Edit Device</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Serial Number</mat-label>\n                    <input matInput formControlName=\"deviceName\" required>\n                    <mat-error *ngIf=\"editDeviceFormGroup.get('deviceName').hasError('required')\">\n                        Serial Number is required.\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"deviceLabel\" >\n                </mat-form-field>\n            </div>\n            <mat-form-field class=\"mat-block\">\n                <mat-label>Select device owner</mat-label>\n                <mat-select formControlName=\"targetOwner\" required>\n                    <mat-select-trigger>\n                        {{editDeviceFormGroup.get('targetOwner').value?.name}}\n                    </mat-select-trigger>\n                    <mat-option *ngFor=\"let owner of availableOwners\" [value]=\"owner\">\n                        {{owner?.name}}\n                    </mat-option>\n                    <mat-option *ngIf=\"!availableOwners?.length\" disabled [value]=\"null\">\n                        No owners available\n                    </mat-option>\n                </mat-select>\n                <mat-error *ngIf=\"editDeviceFormGroup.get('targetOwner').hasError('required')\">\n                    Target owner is required.\n                </mat-error>\n            </mat-form-field>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss": ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    deviceService = $injector.get(widgetContext.servicesMap.get('deviceService')),\n    entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService')),\n    entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService'));\n    entityService = $injector.get(widgetContext.servicesMap.get('entityService'));\n// userPermissionsService = $injector.get(widgetContext.servicesMap.get('userPermissionsService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.device = {};\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        deviceName: ['', [vm.validators.required]],\n        deviceLabel: [null],\n        targetOwner: [null, [vm.validators.required]]\n    });\n\n    init().subscribe(() => {\n        getEntityInfo();\n    });\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        saveDevice().subscribe(\n            (/*device*/) => {\n                changeDeviceOwner().subscribe(\n                    () => {\n                        vm.loading = false;\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n    \n    function init() {\n        vm.availableOwners = [\n            {\n                name: 'Tenant',\n                id: {id: widgetContext.currentUser.tenantId, entityType: 'TENANT' }\n            }\n        ];\n        return getEntityGroupByName('Water Metering', 'CUSTOMER').pipe(\n            widgetContext.rxjs.switchMap((waterMeteringGroup) => {\n               if (waterMeteringGroup) {\n                    var query = {\n                      entityFilter: {\n                          type: 'entityGroup',\n                          groupType: 'CUSTOMER',\n                          entityGroup: waterMeteringGroup.id.id\n                      },\n                      pageLink: {\n                          pageSize: 100,\n                          page: 0\n                      },\n                      entityFields: [\n                          {\n                              key: 'name',\n                              type: 'ENTITY_FIELD'\n                          }\n                      ]\n                  };\n                  return entityService.findEntityDataByQuery(query).pipe(\n                      widgetContext.rxjs.switchMap((data) => {\n                          const availableCustomers = data.data.map((entityData) => {\n                              return {\n                                  id: entityData.entityId,\n                                  name: entityData.latest[\"ENTITY_FIELD\"].name.value\n                              };\n                          });\n                          vm.availableOwners = vm.availableOwners.concat(availableCustomers);\n                          return widgetContext.rxjs.of(null);\n                      })\n                  );\n            } else {\n                return widgetContext.rxjs.of(null);\n            }\n        }\n      ));\n    }\n\n    function getEntityInfo() {\n        vm.loading = true;\n        deviceService.getDevice(entityId.id).subscribe(\n            (device) => {\n                vm.device = device;\n                let ownerId = vm.device.ownerId;\n                let targetOwner = vm.availableOwners.find((owner) => owner.id.id === ownerId.id);\n                vm.editDeviceFormGroup.patchValue({\n                    deviceName: vm.device.name,\n                    deviceLabel: vm.device.label,\n                    targetOwner: targetOwner\n                }, {emitEvent: false});\n                vm.loading = false;\n            }\n        );\n    }\n\n    function saveDevice() {\n        const formValues = vm.editDeviceFormGroup.value;\n        if (vm.device.name !== formValues.deviceName || (vm.device.label !== formValues.deviceLabel)) {\n            vm.device.name = formValues.deviceName;\n            vm.device.label = formValues.deviceLabel;\n            return deviceService.saveDevice(vm.device);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n\n    function changeDeviceOwner() {\n        let newOwner = vm.editDeviceFormGroup.get('targetOwner').value;\n        if (newOwner.id !== vm.device.ownerId.id) {\n            return widgetContext.rxjs.forkJoin([\n                entityGroupService.changeEntityOwner(newOwner.id, vm.device.id),\n                saveRelations(vm.device.id, vm.device.ownerId, newOwner.id)\n            ]);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n\n    function saveRelations(deviceId, currentOwnerId, newOwnerId) {\n        let tasks = [\n            deleteRelation(deviceId, currentOwnerId),\n            addRelation(deviceId, newOwnerId)\n        ];\n        return widgetContext.rxjs.forkJoin(tasks);\n    }\n\n    function addRelation(deviceId, targetOwnerId) {\n        if (targetOwnerId.entityType === 'TENANT') {\n            return widgetContext.rxjs.of(null);\n        } else {\n            let relation = {\n                type: 'Owns',\n                typeGroup: 'COMMON',\n                from: targetOwnerId,\n                to: deviceId\n            };\n    \n            return entityRelationService.saveRelation(relation);\n        }\n    }\n\n    function deleteRelation(deviceId, currentOwnerId) {\n        if (currentOwnerId.entityType === 'TENANT') {\n            return widgetContext.rxjs.of(null);\n        } else {\n            let relation = {\n                type: 'Owns',\n                from: currentOwnerId,\n                to: deviceId\n            };\n    \n            return entityRelationService.deleteRelation(relation.from, relation.type, relation.to);\n        }\n    }\n    \n    function getEntityGroupByName(groupName, groupType) {\n      var entityGroupsPageLink = widgetContext.pageLink(10, 0, groupName);\n      return entityGroupService.getEntityGroupsByPageLink(entityGroupsPageLink, groupType, {ignoreLoading: true}).pipe(\n          widgetContext.rxjs.map((data) => {\n            if (data.data.length) {\n                return data.data.find((group) => group.name === groupName);\n            } else {\n                return null;\n            }\n          })\n      );\n   }\n}",
                "customResources": [],
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "702a8de4-6902-3545-223d-be481a8a29f5"
              },
              {
                "name": "Set Location Parameters",
                "icon": "location_on",
                "type": "openDashboardState",
                "targetDashboardStateId": "set-location",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openInSeparateDialog": true,
                "dialogTitle": "",
                "dialogHideDashboardToolbar": true,
                "dialogWidth": null,
                "dialogHeight": null,
                "openRightLayout": false,
                "id": "8e19b15c-7b8c-2ba8-fc43-d995ad0b1bbb"
              },
              {
                "name": "Set Alarm Thresholds",
                "icon": "notifications",
                "type": "customPretty",
                "customHtml": "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Thresholds Configuration</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Daily Consumption Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"dailyConsumptionThreshold\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Weekly Consumption Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"weeklyConsumptionThreshold\" >\n                </mat-form-field>\n            </div>\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Low Battery Threshold (%)</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"lowBattThreshold\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Low Temperature Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"lowTempThreshold\" >\n                </mat-form-field>\n            </div>\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Inactivity Timeout (ms)</mat-label>\n                <input matInput type=\"number\" step=\"1\" formControlName=\"inactivityTimeout\">\n                <mat-error *ngIf=\"editDeviceFormGroup.get('inactivityTimeout').hasError('pattern')\">\n                    Invalid value\n                </mat-error>\n            </mat-form-field>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss": ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.attributes = {};\n    let attributesKeys = ['dailyConsumptionThreshold', 'weeklyConsumptionThreshold',\n        'lowBattThreshold', 'lowTempThreshold', 'inactivityTimeout'];\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        dailyConsumptionThreshold: [null],\n        weeklyConsumptionThreshold: [null],\n        lowBattThreshold: [null],\n        lowTempThreshold: [null],\n        inactivityTimeout: [null, [vm.validators.pattern(/^-?[0-9]+$/)]]\n    });\n\n    getEntityInfo(attributesKeys);\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        saveAttributes(entityId).subscribe(\n            () => {\n                vm.loading = false;\n                vm.dialogRef.close(null);\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function getEntityInfo(attributesKeys) {\n        vm.loading = true;\n        attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE', attributesKeys).subscribe(\n            (data) => {\n                if (data.length) {\n                    getEntityAttributes(data);\n                    vm.editDeviceFormGroup.patchValue(vm.attributes, {emitEvent: false});\n                }\n                vm.loading = false;\n            }\n        );\n    }\n\n    function getEntityAttributes(attributes) {\n        for (let i = 0; i < attributes.length; i++) {\n            vm.attributes[attributes[i].key] = attributes[i].value;\n        }\n    }\n\n    function saveAttributes(entityId) {\n        let attributes = vm.editDeviceFormGroup.value;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== vm.attributes[key]) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n}",
                "customResources": [],
                "id": "f0ff3379-9600-c51d-fbe4-911a7d0d5af4"
              },
              {
                "name": "Delete device",
                "icon": "delete",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "var $injector = widgetContext.$scope.$injector;\nvar dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\nvar deviceService = $injector.get(widgetContext.servicesMap.get('deviceService'));\n\nopenDeleteDeviceDialog();\n\nfunction openDeleteDeviceDialog() {\n  var title = 'Are you sure you want to delete the device ' + entityName + '?';\n  var content = 'Be careful, after the confirmation, the device and all related data will become unrecoverable!';\n  dialogs.confirm(title, content, 'Cancel', 'Delete').subscribe(\n    function(result) {\n      if (result) {\n        deleteDevice();\n      }\n    }\n  );\n}\n\nfunction deleteDevice() {\n  deviceService.deleteDevice(entityId.id).subscribe(\n    function() {\n      widgetContext.updateAliases();\n    }\n  );\n}\n",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "f5a42d04-7112-3ec5-f1b0-7402fbec2bfb"
              }
            ]
          }
        },
        "id": "291ab4b2-f371-9897-6856-385e5745f430"
      },
      "c33ce26b-a96e-4de0-ae3b-7ddf92cf6555": {
        "isSystemType": true,
        "bundleAlias": "alarm_widgets",
        "typeAlias": "alarms_table",
        "type": "alarm",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 16,
        "config": {
          "timewindow": {
            "realtime": {
              "interval": 1000,
              "timewindowMs": 2592000000
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSelection": true,
            "enableSearch": true,
            "displayDetails": false,
            "allowAcknowledgment": false,
            "allowClear": true,
            "displayPagination": false,
            "defaultPageSize": 10,
            "defaultSortOrder": "-createdTime",
            "alarmsTitle": "Active Alarms",
            "enableSelectColumnDisplay": true,
            "enableFilter": true
          },
          "title": "Active Alarms",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "alarmSource": {
            "type": "entity",
            "name": "alarms",
            "entityAliasId": "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
            "filterId": null,
            "dataKeys": [
              {
                "name": "createdTime",
                "type": "alarm",
                "label": "Created time",
                "color": "#2196f3",
                "settings": {},
                "_hash": 0.8381664834025695
              },
              {
                "name": "originator",
                "type": "alarm",
                "label": "Originator",
                "color": "#4caf50",
                "settings": {},
                "_hash": 0.2921772271979377
              },
              {
                "name": "type",
                "type": "alarm",
                "label": "Type",
                "color": "#f44336",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": ""
                },
                "_hash": 0.5983551827511795
              }
            ]
          },
          "alarmSearchStatus": "ACTIVE",
          "alarmsPollingInterval": 5,
          "datasources": [],
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "displayTimewindow": false,
          "actions": {
            "headerButton": [
              {
                "id": "1f58fb76-87bf-235a-4ce8-e3b67bf3c834",
                "name": "Alarms Details",
                "icon": "fullscreen",
                "type": "updateDashboardState",
                "targetDashboardStateId": "alarms",
                "setEntityId": false
              }
            ]
          },
          "alarmsMaxCountLoad": 0,
          "alarmsFetchSize": 100,
          "alarmStatusList": [
            "ACTIVE"
          ],
          "alarmSeverityList": [],
          "alarmTypeList": [
            "Daily Consumption Threshold Exceeded",
            "Weekly Consumption Threshold Exceeded",
            "Low Battery",
            "Low Temperature",
            "Device Inactive",
            "Leakage Detected"
          ],
          "searchPropagatedAlarms": true
        },
        "id": "c33ce26b-a96e-4de0-ae3b-7ddf92cf6555"
      },
      "c2bdcb20-9d23-3ef4-34fd-950d8e322152": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "entities_table",
        "type": "latest",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 16,
        "config": {
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031165,
                "endTimeMs": 1678176431165
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSearch": true,
            "displayPagination": false,
            "defaultPageSize": 10,
            "displayEntityName": true,
            "displayEntityType": false,
            "defaultSortOrder": "entityName",
            "entitiesTitle": "Water Meters",
            "enableSelectColumnDisplay": true,
            "entityNameColumnTitle": "Serial Number"
          },
          "title": "Water Meters",
          "dropShadow": false,
          "enableFullscreen": true,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "datasources": [
            {
              "type": "entity",
              "dataKeys": [
                {
                  "name": "meterReading",
                  "type": "timeseries",
                  "label": "Consumed",
                  "color": "#2196f3",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.6622074305397865,
                  "units": "mÂ³",
                  "decimals": 2,
                  "postFuncBody": "return value || 0;"
                },
                {
                  "name": "active",
                  "type": "attribute",
                  "label": "Status",
                  "color": "#ffc107",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.9076421001622259,
                  "postFuncBody": "if (value === 'true') {\n    return 'Active';\n} else {\n    return 'Inactive';\n}"
                }
              ],
              "entityAliasId": "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d"
            }
          ],
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "displayTimewindow": true,
          "actions": {
            "rowClick": [
              {
                "id": "7f27dc96-fe24-d16d-91ce-9e11c875febb",
                "name": "Device Details",
                "icon": "more_horiz",
                "type": "openDashboardState",
                "targetDashboardStateId": "device_details",
                "setEntityId": true
              }
            ],
            "headerButton": []
          }
        },
        "id": "c2bdcb20-9d23-3ef4-34fd-950d8e322152"
      },
      "db53f985-2418-e36d-6b5d-c51eb80c6264": {
        "isSystemType": true,
        "bundleAlias": "alarm_widgets",
        "typeAlias": "alarms_table",
        "type": "alarm",
        "title": "New widget",
        "sizeX": 24,
        "sizeY": 16,
        "config": {
          "timewindow": {
            "realtime": {
              "interval": 1000,
              "timewindowMs": 2592000000
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSelection": true,
            "enableSearch": true,
            "displayDetails": true,
            "allowAcknowledgment": true,
            "allowClear": true,
            "displayPagination": true,
            "defaultPageSize": 10,
            "defaultSortOrder": "-createdTime",
            "alarmsTitle": "Alarms",
            "enableSelectColumnDisplay": true,
            "enableFilter": true
          },
          "title": "Alarms",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "alarmSource": {
            "type": "entity",
            "name": "alarms",
            "entityAliasId": "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
            "filterId": null,
            "dataKeys": [
              {
                "name": "createdTime",
                "type": "alarm",
                "label": "Created time",
                "color": "#2196f3",
                "settings": {},
                "_hash": 0.8381664834025695
              },
              {
                "name": "originator",
                "type": "alarm",
                "label": "Originator",
                "color": "#4caf50",
                "settings": {},
                "_hash": 0.2921772271979377
              },
              {
                "name": "type",
                "type": "alarm",
                "label": "Type",
                "color": "#f44336",
                "settings": {},
                "_hash": 0.3769001942764416
              },
              {
                "name": "severity",
                "type": "alarm",
                "label": "Severity",
                "color": "#ffc107",
                "settings": {},
                "_hash": 0.45046333683628226
              },
              {
                "name": "status",
                "type": "alarm",
                "label": "Status",
                "color": "#607d8b",
                "settings": {},
                "_hash": 0.7071153699227859
              }
            ]
          },
          "alarmSearchStatus": "ANY",
          "alarmsPollingInterval": 5,
          "datasources": [],
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "displayTimewindow": false,
          "actions": {},
          "alarmsMaxCountLoad": 0,
          "alarmsFetchSize": 100,
          "alarmStatusList": [],
          "alarmSeverityList": [],
          "alarmTypeList": [
            "Daily Consumption Threshold Exceeded",
            "Weekly Consumption Threshold Exceeded",
            "Low Battery",
            "Low Temperature",
            "Device Inactive",
            "Leakage Detected"
          ],
          "searchPropagatedAlarms": true
        },
        "id": "db53f985-2418-e36d-6b5d-c51eb80c6264"
      },
      "2f9a86a1-b6ac-6fee-e67c-cbe72f2d41a7": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "dataKeys": [
                {
                  "name": "weeklyConsumption",
                  "type": "timeseries",
                  "label": "weeklyConsumption",
                  "color": "#4caf50",
                  "settings": {},
                  "_hash": 0.5838592690087288,
                  "postFuncBody": "return value || 0;"
                }
              ],
              "entityAliasId": "2754dd92-28a3-a689-d65c-ab9001a86f73"
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031165,
                "endTimeMs": 1678176431165
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   border: 1px solid #E0E0E0;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 22px 30px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .value {\n    font-size: 1.5em;\n    font-weight: bold;\n    line-height: 1.5;\n    color: #333333;\n    text-align: center;\n}\n\n.card .description {\n    font-size: 1em;\n    font-weight: normal;\n    line-height: 1.5;\n    color: #333333;\n    text-align: center;\n}\n\n@media (min-width: 960px) and (max-width: 1200px) {\n    .card .value {\n        font-size: 1.2em;\n        line-height: 1;\n    }\n    \n    .card .description {\n        font-size: 0.8em;\n        line-height: 1;\n    }\n}",
            "cardHtml": "<div class='card'>\n    <div class='content'>\n        <div class='value'>\n            ${weeklyConsumption:2} m<sup>3</sup>\n        </div> \n        <div class='description'>\n            Consumed per week\n        </div>\n    </div>\n</div>"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {},
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "displayTimewindow": true
        },
        "id": "2f9a86a1-b6ac-6fee-e67c-cbe72f2d41a7"
      },
      "6f23568a-5ed0-db6d-ce47-bf6ba1683e6c": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"total\">\n        <div class='description' id=\"total\">\n            Total\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation: Total",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "1d64528e-686d-0ba7-6e3a-8124e612a0f1",
                "name": "total",
                "icon": "more_horiz",
                "type": "custom",
                "customFunction": "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\n\nopenDashboardState('default');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              }
            ]
          }
        },
        "id": "6f23568a-5ed0-db6d-ce47-bf6ba1683e6c"
      },
      "391e3afb-9cd1-6d1c-e6e6-ddc788d6bef2": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Analytics",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "analytics",
                "icon": "more_horiz",
                "type": "custom",
                "customFunction": "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('analytics');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              }
            ]
          }
        },
        "id": "391e3afb-9cd1-6d1c-e6e6-ddc788d6bef2"
      },
      "8838c3d4-e8d7-05b9-f97f-a79ff9a03d3b": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Devices",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "devices",
                "icon": "more_horiz",
                "type": "custom",
                "customFunction": "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('devices');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              }
            ]
          }
        },
        "id": "8838c3d4-e8d7-05b9-f97f-a79ff9a03d3b"
      },
      "04a5ced4-7ce0-ec3a-fb79-a6a8e47e0d7e": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"alarms\">\n        <div class='description' id=\"alarms\">\n            Alarms\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Alarms",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "alarms",
                "icon": "more_horiz",
                "type": "custom",
                "customFunction": "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('alarms');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              }
            ]
          }
        },
        "id": "04a5ced4-7ce0-ec3a-fb79-a6a8e47e0d7e"
      },
      "2dc142e5-6fa4-263c-0f42-1e67db568682": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"settings\">\n        <div class='description' id=\"settings\">\n            Settings\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Settings",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "settings",
                "icon": "more_horiz",
                "type": "custom",
                "customFunction": "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('settings');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              }
            ]
          }
        },
        "id": "2dc142e5-6fa4-263c-0f42-1e67db568682"
      },
      "1bfaeb7d-8b3c-d7cb-20bb-3cb9bcca4b7c": {
        "isSystemType": true,
        "bundleAlias": "alarm_widgets",
        "typeAlias": "alarms_table",
        "type": "alarm",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 12,
        "config": {
          "timewindow": {
            "realtime": {
              "interval": 1000,
              "timewindowMs": 2592000000
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSelection": true,
            "enableSearch": true,
            "displayDetails": false,
            "allowAcknowledgment": false,
            "allowClear": true,
            "displayPagination": false,
            "defaultPageSize": 10,
            "defaultSortOrder": "-createdTime",
            "alarmsTitle": "Active Alarms",
            "enableSelectColumnDisplay": true,
            "enableFilter": true,
            "enableStickyHeader": true
          },
          "title": "Active Alarms",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "alarmSource": {
            "type": "entity",
            "name": "alarms",
            "entityAliasId": "2754dd92-28a3-a689-d65c-ab9001a86f73",
            "filterId": null,
            "dataKeys": [
              {
                "name": "createdTime",
                "type": "alarm",
                "label": "Created time",
                "color": "#2196f3",
                "settings": {},
                "_hash": 0.8381664834025695
              },
              {
                "name": "type",
                "type": "alarm",
                "label": "Type",
                "color": "#f44336",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": ""
                },
                "_hash": 0.6632477787428679
              }
            ]
          },
          "alarmSearchStatus": "ACTIVE",
          "alarmsPollingInterval": 5,
          "datasources": [],
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "displayTimewindow": false,
          "actions": {
            "headerButton": [
              {
                "id": "1f58fb76-87bf-235a-4ce8-e3b67bf3c834",
                "name": "Alarms Details",
                "icon": "fullscreen",
                "type": "openDashboardState",
                "targetDashboardStateId": "device_alarms",
                "setEntityId": false
              }
            ]
          },
          "alarmsMaxCountLoad": 0,
          "alarmsFetchSize": 100,
          "alarmTypeList": [
            "Daily Consumption Threshold Exceeded",
            "Weekly Consumption Threshold Exceeded",
            "Low Battery",
            "Low Temperature",
            "Device Inactive",
            "Leakage Detected"
          ]
        },
        "id": "1bfaeb7d-8b3c-d7cb-20bb-3cb9bcca4b7c"
      },
      "6fb621cb-94da-2f0e-1561-83699315ee3e": {
        "isSystemType": true,
        "bundleAlias": "charts",
        "typeAlias": "timeseries_bars_flot",
        "type": "timeseries",
        "title": "New widget",
        "sizeX": 24,
        "sizeY": 11,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "2754dd92-28a3-a689-d65c-ab9001a86f73",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "meterReadingDelta",
                  "type": "timeseries",
                  "label": "Consumption",
                  "color": "#2196f3",
                  "settings": {
                    "showLines": false,
                    "fillLines": false,
                    "showPoints": false,
                    "showPointsRadius": 3,
                    "showSeparateAxis": false,
                    "axisPosition": "left",
                    "showPointShape": "circle",
                    "pointShapeFormatter": "var size = radius * Math.sqrt(Math.PI) / 2;\nctx.moveTo(x - size, y - size);\nctx.lineTo(x + size, y + size);\nctx.moveTo(x - size, y + size);\nctx.lineTo(x + size, y - size);",
                    "showPointsLineWidth": 5,
                    "comparisonSettings": {
                      "showValuesForComparison": true
                    }
                  },
                  "_hash": 0.5140945609133167,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "interval": 3600000,
              "timewindowMs": 604800000
            },
            "aggregation": {
              "type": "SUM",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "shadowSize": 4,
            "fontColor": "#545454",
            "fontSize": 10,
            "xaxis": {
              "showLabels": true,
              "color": "#545454"
            },
            "yaxis": {
              "showLabels": true,
              "color": "#545454",
              "tickDecimals": 1
            },
            "grid": {
              "color": "#ffffff",
              "tickColor": "#DDDDDD",
              "verticalLines": false,
              "horizontalLines": true,
              "outlineWidth": 1
            },
            "stack": true,
            "tooltipIndividual": false,
            "defaultBarWidth": 1800000,
            "timeForComparison": "months",
            "xaxisSecond": {
              "axisPosition": "top",
              "showLabels": true
            },
            "barAlignment": "center"
          },
          "title": "Water Consumption",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "mobileHeight": null,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "useDashboardTimewindow": true,
          "showLegend": true,
          "actions": {},
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "units": "mÂ³",
          "decimals": 2,
          "displayTimewindow": false,
          "legendConfig": {
            "direction": "column",
            "position": "bottom",
            "sortDataKeys": false,
            "showMin": false,
            "showMax": false,
            "showAvg": false,
            "showTotal": true
          }
        },
        "id": "6fb621cb-94da-2f0e-1561-83699315ee3e"
      },
      "6f390f15-d267-3d9d-3afd-5b18247ddc2d": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "2754dd92-28a3-a689-d65c-ab9001a86f73",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "pulseCounter",
                  "type": "timeseries",
                  "label": "totalConsumption",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.9485144836240813,
                  "postFuncBody": "return value || 0;",
                  "usePostProcessing": true,
                  "units": null,
                  "decimals": null,
                  "funcBody": null
                }
              ]
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031165,
                "endTimeMs": 1678176431165
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   border: 1px solid #E0E0E0;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 22px 30px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .value {\n    font-size: 1.5em;\n    font-weight: bold;\n    line-height: 1.5;\n    color: #333333;\n    text-align: center;\n}\n\n.card .description {\n    font-size: 1em;\n    font-weight: normal;\n    line-height: 1.5;\n    color: #333333;\n    text-align: center;\n}\n\n@media (min-width: 960px) and (max-width: 1200px) {\n    .card .value {\n        font-size: 1.2em;\n        line-height: 1;\n    }\n    \n    .card .description {\n        font-size: 0.8em;\n        line-height: 1;\n    }\n}",
            "cardHtml": "<div class='card'>\n    <div class='content'>\n        <div class='value'>\n            ${totalConsumption:2} m<sup>3</sup>\n        </div> \n        <div class='description'>\n            Consumed for all time\n        </div>\n    </div>\n</div>"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {},
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "displayTimewindow": true
        },
        "id": "6f390f15-d267-3d9d-3afd-5b18247ddc2d"
      },
      "328e8d85-ed7c-ae06-d537-3edc002de94c": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "2754dd92-28a3-a689-d65c-ab9001a86f73",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "temperature",
                  "type": "timeseries",
                  "label": "temperature",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.21584949493784333,
                  "postFuncBody": "if (typeof value === 'number') {\n    return value.toFixed(1) +' &#8451;';\n} else {\n    return value;\n}",
                  "decimals": 1,
                  "usePostProcessing": true,
                  "units": null,
                  "funcBody": null
                }
              ]
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031165,
                "endTimeMs": 1678176431165
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   border: 1px solid #E0E0E0;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 22px 30px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .value {\n    font-size: 1.5em;\n    font-weight: bold;\n    line-height: 1.5;\n    color: #333333;\n    text-align: center;\n}\n\n.card .description {\n    font-size: 1em;\n    font-weight: normal;\n    line-height: 1.5;\n    color: #333333;\n    text-align: center;\n}\n\n@media (min-width: 960px) and (max-width: 1200px) {\n    .card .value {\n        font-size: 1.2em;\n        line-height: 1;\n    }\n    \n    .card .description {\n        font-size: 0.8em;\n        line-height: 1;\n    }\n}",
            "cardHtml": "<div class='card'>\n    <div class='content'>\n        <div class='value'>\n            ${temperature:0}\n        </div> \n        <div class='description'>\n            Temperature\n        </div>\n    </div>\n</div>"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {},
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "displayTimewindow": true
        },
        "id": "328e8d85-ed7c-ae06-d537-3edc002de94c"
      },
      "b96457f0-6b59-a580-4c3d-2eb919d56603": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "2754dd92-28a3-a689-d65c-ab9001a86f73",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "battery",
                  "type": "timeseries",
                  "label": "battery",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.7691945203875652,
                  "postFuncBody": "if (typeof value === 'number') {\n    return value.toFixed(1) + '%';\n} else {\n    return value;\n}",
                  "decimals": 1,
                  "usePostProcessing": true,
                  "units": null,
                  "funcBody": null
                }
              ]
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031165,
                "endTimeMs": 1678176431165
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardHtml": "<div class='card'>\n    <div class='content'>\n        <div class='value'>\n            ${battery:0}\n        </div> \n        <div class='description'>\n            Battery level\n        </div>\n    </div>\n</div>",
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   border: 1px solid #E0E0E0;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 22px 30px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .value {\n    font-size: 1.5em;\n    font-weight: bold;\n    line-height: 1.5;\n    color: #333333;\n    text-align: center;\n}\n\n.card .description {\n    font-size: 1em;\n    font-weight: normal;\n    line-height: 1.5;\n    color: #333333;\n    text-align: center;\n}\n\n@media (min-width: 960px) and (max-width: 1200px) {\n    .card .value {\n        font-size: 1.2em;\n        line-height: 1;\n    }\n    \n    .card .description {\n        font-size: 0.8em;\n        line-height: 1;\n    }\n}"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "headerButton": []
          },
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "displayTimewindow": true
        },
        "id": "b96457f0-6b59-a580-4c3d-2eb919d56603"
      },
      "fd0cad3c-cb76-a2c5-446a-4bc280adfee1": {
        "isSystemType": true,
        "bundleAlias": "alarm_widgets",
        "typeAlias": "alarms_table",
        "type": "alarm",
        "title": "New widget",
        "sizeX": 32,
        "sizeY": 14,
        "config": {
          "timewindow": {
            "realtime": {
              "interval": 1000,
              "timewindowMs": 2592000000
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSelection": true,
            "enableSearch": true,
            "displayDetails": true,
            "allowAcknowledgment": true,
            "allowClear": true,
            "displayPagination": true,
            "defaultPageSize": 10,
            "defaultSortOrder": "-createdTime",
            "alarmsTitle": "Alarms"
          },
          "title": "Alarms",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "alarmSource": {
            "type": "entity",
            "dataKeys": [
              {
                "name": "createdTime",
                "type": "alarm",
                "label": "Created time",
                "color": "#2196f3",
                "settings": {},
                "_hash": 0.32271162435866696
              },
              {
                "name": "originator",
                "type": "alarm",
                "label": "Originator",
                "color": "#4caf50",
                "settings": {},
                "_hash": 0.5289265043998732
              },
              {
                "name": "details.meterId",
                "type": "alarm",
                "label": "Serial Number",
                "color": "#9c27b0",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "useCellContentFunction": false
                },
                "_hash": 0.9148549754772513
              },
              {
                "name": "type",
                "type": "alarm",
                "label": "Type",
                "color": "#f44336",
                "settings": {},
                "_hash": 0.6799953560962899
              },
              {
                "name": "severity",
                "type": "alarm",
                "label": "Severity",
                "color": "#ffc107",
                "settings": {},
                "_hash": 0.18391967117871633
              },
              {
                "name": "status",
                "type": "alarm",
                "label": "Status",
                "color": "#607d8b",
                "settings": {},
                "_hash": 0.004003465189153399
              }
            ],
            "entityAliasId": "2754dd92-28a3-a689-d65c-ab9001a86f73",
            "name": "alarms"
          },
          "alarmSearchStatus": "ANY",
          "alarmTypeList": [
            "Daily Consumption Threshold Exceeded",
            "Weekly Consumption Threshold Exceeded",
            "Low Battery",
            "Low Temperature",
            "Device Inactive",
            "Leakage Detected"
          ],
          "alarmsPollingInterval": 5,
          "datasources": [],
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "displayTimewindow": false,
          "actions": {}
        },
        "id": "fd0cad3c-cb76-a2c5-446a-4bc280adfee1"
      },
      "1e7b764e-6e7d-0bb3-7470-9e3b9154235c": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 6,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "dataKeys": [
                {
                  "name": "address",
                  "type": "attribute",
                  "label": "address",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.7221680351335023
                },
                {
                  "name": "buildingOwner",
                  "type": "attribute",
                  "label": "buildingOwner",
                  "color": "#4caf50",
                  "settings": {},
                  "_hash": 0.5563788873287914
                },
                {
                  "name": "buildingOwnerEmail",
                  "type": "attribute",
                  "label": "buildingOwnerEmail",
                  "color": "#f44336",
                  "settings": {},
                  "_hash": 0.8134429336988194
                },
                {
                  "name": "renterName",
                  "type": "attribute",
                  "label": "renterName",
                  "color": "#ffc107",
                  "settings": {},
                  "_hash": 0.9602853858495966
                },
                {
                  "name": "renterPhone",
                  "type": "attribute",
                  "label": "renterPhone",
                  "color": "#607d8b",
                  "settings": {},
                  "_hash": 0.2924585860274258
                }
              ],
              "entityAliasId": "2754dd92-28a3-a689-d65c-ab9001a86f73"
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031165,
                "endTimeMs": 1678176431165
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardHtml": "<div class='card'>\n    <div class=\"header\">\n        <span>Meter location</span>\n    </div>\n    <div class='content'>\n        <div class=\"row\">\n            <span class='description'>Address:</span>\n            <span class='value'>${address}</span> \n        </div>\n        <div class=\"row\">\n            <span class='description'>Building owner:</span>\n            <span class='value'>${buildingOwner}</span> \n        </div>\n        <div class=\"row\">\n            <span class='description'>Owner email:</span>\n            <span class='value'>${buildingOwnerEmail}</span> \n        </div>\n        <div class=\"divider\"></div>\n        <div class=\"row\">\n            <span class='description'>Renter name:</span>\n            <span class='value'>${renterName}</span> \n        </div>\n        <div class=\"row\">\n            <span class='description'>Renter phone:</span>\n            <span class='value'>${renterPhone}</span> \n        </div>\n    </div>\n</div>",
            "cardCss": ".card {\n    width: 100%;\n    height: 100%;\n    border-top: 1px solid #E0E0E0;\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: column;\n}\n\n.card .header {\n  font-size: 1.15em;\n  font-weight: 600;\n  padding: 10px 10px 5px 10px;\n  border-bottom: 1px solid #E0E0E0\n}\n\n.card .content {\n   padding: 0 12px 10px 12px;\n   display: flex;\n   flex-direction: column;\n   /*align-items: stretch;*/\n   justify-content: flex-start;\n   height: 100%;\n   overflow-y: auto;\n   box-sizing: border-box;\n}\n\n.card .row {\n    display: flex;\n    align-items: flex-end;\n    justify-content: space-between;\n    padding: 8px 5px 8px 0;\n}\n\n.card .divider {\n    border: 1px solid #F2F2F2;\n    margin: 5px -5px;\n}\n\n.card .value {\n    font-size: 1em;\n    line-height: 1.5;\n    color: #333333;\n    text-align: right;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    text-transform: uppercase;\n    color: #333333;\n}\n\n@media (min-width: 960px) and (max-width: 1200px) {\n    .card .header {\n        font-size: 0.9em;\n    }\n    .card .value {\n        font-size: 0.7em;\n        line-height: 1;\n    }\n    .card .description {\n        font-size: 0.6em;\n        line-height: 1;\n    }\n}"
          },
          "title": "Meter location",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "headerButton": [
              {
                "name": "Edit Info",
                "icon": "edit",
                "type": "customPretty",
                "customHtml": "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Edit Contact Info</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Address</mat-label>\n                <input matInput formControlName=\"address\">\n            </mat-form-field>\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Building owner</mat-label>\n                    <input matInput formControlName=\"buildingOwner\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Owner email</mat-label>\n                    <input matInput type=\"email\" formControlName=\"buildingOwnerEmail\" >\n                    <mat-error *ngIf=\"editDeviceFormGroup.get('buildingOwnerEmail').hasError('email')\">\n                        Invalid value format\n                    </mat-error>\n                </mat-form-field>\n            </div>\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Renter name</mat-label>\n                    <input matInput formControlName=\"renterName\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Renter phone</mat-label>\n                    <input matInput formControlName=\"renterPhone\" >\n                </mat-form-field>\n            </div>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss": ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.attributes = {};\n    let attributesKeys = ['address', 'buildingOwner', 'buildingOwnerEmail', 'renterName', 'renterPhone'];\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        address: [''],\n        buildingOwner: [''],\n        buildingOwnerEmail: ['', [vm.validators.email]],\n        renterName: [''],\n        renterPhone: ['']\n    });\n\n    getEntityInfo(attributesKeys);\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        saveAttributes(entityId).subscribe(\n            () => {\n                vm.loading = false;\n                vm.dialogRef.close(null);\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function getEntityInfo(attributesKeys) {\n        vm.loading = true;\n        attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE', attributesKeys).subscribe(\n            (data) => {\n                if (data.length) {\n                    getEntityAttributes(data);\n                    vm.editDeviceFormGroup.patchValue(vm.attributes, {emitEvent: false});\n                }\n                vm.loading = false;\n            }\n        );\n    }\n\n    function getEntityAttributes(attributes) {\n        for (let i = 0; i < attributes.length; i++) {\n            vm.attributes[attributes[i].key] = attributes[i].value;\n        }\n    }\n\n    function saveAttributes(entityId) {\n        let attributes = vm.editDeviceFormGroup.value;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== vm.attributes[key]) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n}",
                "customResources": [],
                "id": "5d71c0f8-1abb-941a-593a-416885366684"
              }
            ]
          },
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "displayTimewindow": true
        },
        "id": "1e7b764e-6e7d-0bb3-7470-9e3b9154235c"
      },
      "78fcd7e3-ba11-72c5-ecfa-aa3db853922f": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 6,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "35c08d08-d6bf-2908-c93b-cd38837c4dfa",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "firstName",
                  "type": "attribute",
                  "label": "firstName",
                  "color": "#ffc107",
                  "settings": {},
                  "_hash": 0.13198124303128123
                },
                {
                  "name": "lastName",
                  "type": "attribute",
                  "label": "lastName",
                  "color": "#607d8b",
                  "settings": {},
                  "_hash": 0.9492563158125378
                },
                {
                  "name": "email",
                  "type": "entityField",
                  "label": "email",
                  "color": "#9c27b0",
                  "settings": {},
                  "_hash": 0.3716880828983571,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "address",
                  "type": "entityField",
                  "label": "address",
                  "color": "#8bc34a",
                  "settings": {},
                  "_hash": 0.7595268392739936,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "phone",
                  "type": "entityField",
                  "label": "phone",
                  "color": "#3f51b5",
                  "settings": {},
                  "_hash": 0.17832513942326078,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031165,
                "endTimeMs": 1678176431165
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardHtml": "<div class='card'>\n    <div class=\"header\">\n        <span>Owner contact</span>\n    </div>\n    <div class='content'>\n        <div class=\"row\">\n            <span class='description'>Fullname:</span>\n            <span class='value'>${firstName} ${lastName}</span> \n        </div>\n        <div class=\"row\">\n            <span class='description'>Phone:</span>\n            <span class='value'>${phone:0}</span> \n        </div>\n        <div class=\"row\">\n            <span class='description'>Owner email:</span>\n            <span class='value'>${email}</span> \n        </div>\n        <div class=\"row\">\n            <span class='description'>Address:</span>\n            <span class='value'>${address}</span> \n        </div>\n    </div>\n</div>",
            "cardCss": ".card {\n    width: 100%;\n    height: 100%;\n    border-top: 1px solid #E0E0E0;\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: column;\n}\n\n.card .header {\n  font-size: 1.15em;\n  font-weight: 600;\n  padding: 10px 10px 5px 10px;\n  border-bottom: 1px solid #E0E0E0\n}\n\n.card .content {\n   padding: 0 12px 10px 12px;\n   display: flex;\n   flex-direction: column;\n   /*align-items: stretch;*/\n   justify-content: flex-start;\n   height: 100%;\n   overflow-y: auto;\n   box-sizing: border-box;\n}\n\n.card .row {\n    display: flex;\n    align-items: flex-end;\n    justify-content: space-between;\n    padding: 8px 5px 8px 0;\n}\n\n.card .divider {\n    border: 1px solid #F2F2F2;\n    margin: 5px -5px;\n}\n\n.card .value {\n    font-size: 1em;\n    line-height: 1.5;\n    color: #333333;\n    text-align: right;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    text-transform: uppercase;\n    color: #333333;\n}\n\n@media (min-width: 960px) and (max-width: 1200px) {\n    .card .header {\n        font-size: 0.9em;\n    }\n    .card .value {\n        font-size: 0.7em;\n        line-height: 1;\n    }\n    .card .description {\n        font-size: 0.6em;\n        line-height: 1;\n    }\n}"
          },
          "title": "Owner contact",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "headerButton": []
          },
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "displayTimewindow": true
        },
        "id": "78fcd7e3-ba11-72c5-ecfa-aa3db853922f"
      },
      "51f6f10f-c491-9e27-04d5-a235ca4fc16c": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 6,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "2754dd92-28a3-a689-d65c-ab9001a86f73",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "active",
                  "type": "attribute",
                  "label": "active",
                  "color": "#4caf50",
                  "settings": {},
                  "_hash": 0.9421613144570329,
                  "postFuncBody": "if (value === 'false') {\n    return 'Inactive';\n} else {\n    return 'Active';\n}"
                },
                {
                  "name": "installationDate",
                  "type": "attribute",
                  "label": "installationDate",
                  "color": "#607d8b",
                  "settings": {},
                  "_hash": 0.2099158296476744,
                  "postFuncBody": "if (value) {\n    return moment(value).format(\"LL\");\n} else {\n    return 'Not set';\n}",
                  "usePostProcessing": true,
                  "units": null,
                  "decimals": null,
                  "funcBody": null
                }
              ]
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031165,
                "endTimeMs": 1678176431165
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardHtml": "<div class='card'>\n    <div class=\"header\">\n        <span>Meter details</span>\n    </div>\n    <div class='content'>\n        <div class=\"row\">\n            <span class='description'>Serial number:</span>\n            <span class='value'>${entityName:0}</span> \n        </div>\n        <div class=\"row\">\n            <span class='description'>Label:</span>\n            <span class='value'>${entityLabel:0}</span> \n        </div>\n        <div class=\"row\">\n            <span class='description'>Status:</span>\n            <span class='value'>${active}</span> \n        </div>\n        <div class=\"divider\"></div>\n        <div class=\"row\">\n            <span class='description'>Date of installation:</span>\n            <span class='value'>${installationDate}</span> \n        </div>\n    </div>\n</div>",
            "cardCss": ".card {\n    width: 100%;\n    height: 100%;\n    border-top: 1px solid #E0E0E0;\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: column;\n}\n\n.card .header {\n  font-size: 1.15em;\n  font-weight: 600;\n  padding: 10px 10px 5px 10px;\n  border-bottom: 1px solid #E0E0E0\n}\n\n.card .content {\n   padding: 0 12px 10px 12px;\n   display: flex;\n   flex-direction: column;\n   /*align-items: stretch;*/\n   justify-content: flex-start;\n   height: 100%;\n   overflow-y: auto;\n   box-sizing: border-box;\n}\n\n.card .row {\n    display: flex;\n    align-items: flex-end;\n    justify-content: space-between;\n    padding: 8px 5px 8px 0;\n}\n\n.card .divider {\n    border: 1px solid #F2F2F2;\n    margin: 5px -5px;\n}\n\n.card .value {\n    font-size: 1em;\n    line-height: 1.5;\n    color: #333333;\n    text-align: right;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    text-transform: uppercase;\n    color: #333333;\n}\n\n@media (min-width: 960px) and (max-width: 1200px) {\n    .card .header {\n        font-size: 0.9em;\n    }\n    .card .value {\n        font-size: 0.7em;\n        line-height: 1;\n    }\n    .card .description {\n        font-size: 0.6em;\n        line-height: 1;\n    }\n}"
          },
          "title": "Meter details",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "headerButton": [
              {
                "name": "Edit Info",
                "icon": "edit",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "customPretty",
                "customHtml": "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Edit Meter Details</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Serial Number</mat-label>\n                    <input matInput formControlName=\"deviceName\" required>\n                    <mat-error *ngIf=\"editDeviceFormGroup.get('deviceName').hasError('required')\">\n                        Serial Number is required.\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"deviceLabel\" >\n                </mat-form-field>\n            </div>\n            <div formGroupName=\"attributes\" fxLayout=\"column\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Date of installation</mat-label>\n                    <mat-datetimepicker-toggle [for]=\"datePicker\" matPrefix></mat-datetimepicker-toggle>\n                    <mat-datetimepicker #datePicker type=\"date\" openOnFocus=\"true\"></mat-datetimepicker>\n                    <input matInput formControlName=\"installationDate\" [matDatetimepicker]=\"datePicker\">\n                </mat-form-field>\n            </div>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss": ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    deviceService = $injector.get(widgetContext.servicesMap.get('deviceService')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.device = {};\n    vm.attributes = {};\n    let attributesKeys = ['installationDate'];\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        deviceName: [entityName, [vm.validators.required]],\n        deviceLabel: [entityLabel],\n        attributes: vm.fb.group({\n            installationDate: [null]\n        })\n    });\n\n    getEntityInfo();\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        widgetContext.rxjs.forkJoin([saveDevice(), saveAttributes(entityId)]).subscribe(\n            () => {\n                vm.loading = false;\n                widgetContext.updateAliases();\n                vm.dialogRef.close(null);\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function getEntityInfo() {\n        vm.loading = true;\n        widgetContext.rxjs.forkJoin([\n            deviceService.getDevice(entityId.id),\n            attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE', attributesKeys)]).subscribe(\n            (data) => {\n                vm.device = data[0];\n                if (data[1].length) {\n                    getEntityAttributes(data[1]);\n                    vm.editDeviceFormGroup.patchValue(\n                        {attributes: vm.attributes},\n                        {emitEvent: false}\n                        );\n                }\n                vm.loading = false;\n            }\n        );\n    }\n\n    function saveDevice() {\n        const formValues = vm.editDeviceFormGroup.value;\n        if (vm.device.name !== formValues.deviceName || (vm.device.label !== formValues.deviceLabel)) {\n            vm.device.name = formValues.deviceName;\n            vm.device.label = formValues.deviceLabel;\n            return deviceService.saveDevice(vm.device);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n\n    function getEntityAttributes(attributes) {\n        for (let i = 0; i < attributes.length; i++) {\n            if (attributes[i].key === 'installationDate') {\n                vm.attributes[attributes[i].key] = moment(attributes[i].value).toDate();\n            } else {\n                vm.attributes[attributes[i].key] = attributes[i].value;\n            }\n        }\n    }\n\n    function saveAttributes(entityId) {\n        let attributes = vm.editDeviceFormGroup.get('attributes').value;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== vm.attributes[key]) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n}",
                "customResources": [],
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "eae3f520-d7a8-e886-e8ae-ec42f497286e"
              }
            ]
          },
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "displayTimewindow": true
        },
        "id": "51f6f10f-c491-9e27-04d5-a235ca4fc16c"
      },
      "0924e14a-b8cc-2566-90e1-5c6f9819761e": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 6,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "dataKeys": [
                {
                  "name": "meterPhoto",
                  "type": "attribute",
                  "label": "meterPhoto",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.12577658530662794
                }
              ],
              "entityAliasId": "2754dd92-28a3-a689-d65c-ab9001a86f73"
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031166,
                "endTimeMs": 1678176431166
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardHtml": "<div class='card'>\n    <div class=\"header\">\n        <span>Photo</span>\n    </div>\n    <div class='content'>\n       <div class='meter-photo'>\n            <img src=\"${meterPhoto}\">\n        </div>\n    </div>\n</div>",
            "cardCss": ".card {\n    width: 100%;\n    height: 100%;\n    border-top: 1px solid #E0E0E0;\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: column;\n}\n\n.card .header {\n  font-size: 1.15em;\n  font-weight: 600;\n  padding: 10px 10px 5px 10px;\n  border-bottom: 1px solid #E0E0E0\n}\n\n.card .content {\n    display: flex;\n    flex-direction: column;\n    align-items: stretch;\n    justify-content: flex-start;\n    height: 100%;\n    overflow-y: auto;\n    box-sizing: border-box;\n}\n\n.card .meter-photo {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    z-index: 0;\n}\n\n.card .meter-photo img {\n    width: auto;\n    height: 100%;\n    object-fit: contain;\n}\n\n@media (min-width: 960px) and (max-width: 1200px) {\n    .card .header {\n        font-size: 0.9em;\n    }\n}"
          },
          "title": "Photo",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "headerButton": [
              {
                "name": "Edit Photo",
                "icon": "edit",
                "type": "customPretty",
                "customHtml": "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Edit Photo</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <tb-image-input\n                    formControlName=\"meterPhoto\"\n                    [showPreview]=\"true\"\n                    [showClearButton]=\"true\">\n            </tb-image-input>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss": ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.attributes = {};\n    let attributesKeys = ['meterPhoto'];\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        meterPhoto: [null]\n    });\n\n    getEntityInfo(attributesKeys);\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        saveAttributes(entityId).subscribe(\n            () => {\n                vm.loading = false;\n                vm.dialogRef.close(null);\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function getEntityInfo(attributesKeys) {\n        vm.loading = true;\n        attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE', attributesKeys).subscribe(\n            (data) => {\n                if (data.length) {\n                    getEntityAttributes(data);\n                    vm.editDeviceFormGroup.patchValue(vm.attributes, {emitEvent: false});\n                }\n                vm.loading = false;\n            }\n        );\n    }\n\n    function getEntityAttributes(attributes) {\n        for (let i = 0; i < attributes.length; i++) {\n            vm.attributes[attributes[i].key] = attributes[i].value;\n        }\n    }\n\n    function saveAttributes(entityId) {\n        let attributes = vm.editDeviceFormGroup.value;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== vm.attributes[key]) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n}",
                "customResources": [],
                "id": "70bd8e2b-d9b3-dd73-fa16-764bb61521c4"
              }
            ]
          },
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "displayTimewindow": true
        },
        "id": "0924e14a-b8cc-2566-90e1-5c6f9819761e"
      },
      "258c6c06-4c02-f318-5bc7-6d9e264ac676": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"total\">\n        <div class='description' id=\"total\">\n            Total\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation: Total",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "1d64528e-686d-0ba7-6e3a-8124e612a0f1",
                "name": "total",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "default",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "258c6c06-4c02-f318-5bc7-6d9e264ac676"
      },
      "51c01959-c7bb-df14-ff01-c8195c815448": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Analytics",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "analytics",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "analytics",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "51c01959-c7bb-df14-ff01-c8195c815448"
      },
      "7bd9d3f3-1257-bf27-d86d-f7ab703ad473": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Devices",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "devices",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "devices",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "7bd9d3f3-1257-bf27-d86d-f7ab703ad473"
      },
      "e36d6f8c-0b2c-b39d-5f3a-abbae0de9bc9": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n    opacity: 0.5;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"customers\">\n        <div class='description' id=\"customers\">\n            Customers\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Users",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": []
          }
        },
        "id": "e36d6f8c-0b2c-b39d-5f3a-abbae0de9bc9"
      },
      "7a2cb228-d321-552c-dd6a-341801ff6cc1": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"alarms\">\n        <div class='description' id=\"alarms\">\n            Alarms\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Alarms",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "alarms",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "alarms",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "7a2cb228-d321-552c-dd6a-341801ff6cc1"
      },
      "c73e9e2a-aa9b-301d-c8a3-9a54db46bd99": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"settings\">\n        <div class='description' id=\"settings\">\n            Settings\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Settings",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "settings",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "settings",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "c73e9e2a-aa9b-301d-c8a3-9a54db46bd99"
      },
      "23fbc25e-a9ea-c9a8-f6bb-9a1ef5a86a92": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "entities_table",
        "type": "latest",
        "title": "New widget",
        "sizeX": 32,
        "sizeY": 16,
        "config": {
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031166,
                "endTimeMs": 1678176431166
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSearch": true,
            "displayPagination": true,
            "defaultPageSize": 10,
            "defaultSortOrder": "entityName",
            "displayEntityName": true,
            "displayEntityType": false,
            "entitiesTitle": "Customers",
            "entityNameColumnTitle": "Title",
            "enableSelectColumnDisplay": true,
            "enableStickyHeader": true,
            "enableStickyAction": true,
            "reserveSpaceForHiddenAction": "true",
            "displayEntityLabel": false,
            "useRowStyleFunction": false
          },
          "title": "Customers",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "e7bb2159-4857-ab22-921e-5290a8af4f4d",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "email",
                  "type": "entityField",
                  "label": "Email",
                  "color": "#607d8b",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": ""
                  },
                  "_hash": 0.5086132106831367
                },
                {
                  "name": "firstName",
                  "type": "attribute",
                  "label": "First name",
                  "color": "#ffc107",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.7593813392746664
                },
                {
                  "name": "lastName",
                  "type": "attribute",
                  "label": "Last name",
                  "color": "#607d8b",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.17634836448426272
                },
                {
                  "name": "phone",
                  "type": "entityField",
                  "label": "Phone",
                  "color": "#607d8b",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.2832401181596269
                },
                {
                  "name": "address",
                  "type": "entityField",
                  "label": "Address",
                  "color": "#9c27b0",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.25194222822878287
                }
              ]
            }
          ],
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "displayTimewindow": true,
          "actions": {
            "actionCellButton": [
              {
                "name": "Edit Customer Info",
                "icon": "edit",
                "type": "customPretty",
                "customHtml": "<form #editCustomerForm=\"ngForm\" [formGroup]=\"editCustomerFormFormGroup\" class=\"edit-customer-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"add-customer-form-toolbar\" fxLayout=\"row\">\n        <h2>Edit Customer Details</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Title</mat-label>\n                <input matInput formControlName=\"title\" required>\n                <mat-error *ngIf=\"editCustomerFormFormGroup.get('title').hasError('required')\">\n                    Title is required\n                </mat-error>\n            </mat-form-field>\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Email</mat-label>\n                <input matInput formControlName=\"email\" type=\"email\" required>\n                <mat-error *ngIf=\"editCustomerFormFormGroup.get('email').hasError('required')\">\n                    Email is required\n                </mat-error>\n                <mat-error *ngIf=\"editCustomerFormFormGroup.get('email').hasError('pattern')\">\n                    Invalid email format\n                </mat-error>\n            </mat-form-field>\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>First Name</mat-label>\n                    <input matInput formControlName=\"firstName\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Last Name</mat-label>\n                    <input matInput formControlName=\"lastName\" >\n                </mat-form-field>\n            </div>\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Phone</mat-label>\n                    <input matInput formControlName=\"phone\">\n                    <mat-error *ngIf=\"editCustomerFormFormGroup.get('phone').hasError('pattern')\">\n                        Invalid format\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Address</mat-label>\n                    <input matInput formControlName=\"address\">\n                </mat-form-field>\n            </div>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-customer-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editCustomerFormFormGroup.invalid || !editCustomerFormFormGroup.dirty\">\n            Save\n        </button>\n    </div>\n</form>\n",
                "customCss": ".edit-customer-form mat-toolbar.edit-customer-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-customer-form .edit-customer-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}\n",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    customerService = $injector.get(widgetContext.servicesMap.get('customerService')),\n    userService = $injector.get(widgetContext.servicesMap.get('userService')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\n    \nopenEditCustomerDialog();\n\nfunction openEditCustomerDialog() {\n    customDialog.customDialog(htmlTemplate, EditCustomerDialogController).subscribe();\n}\n\nfunction EditCustomerDialogController(instance) {\n    let vm = instance;\n    \n    vm.attributes = {};\n    \n    vm.editCustomerFormFormGroup = vm.fb.group({\n        title: ['', [vm.validators.required]],\n        email: ['', [vm.validators.required, vm.validators.pattern(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\_\\-0-9]+\\.)+[a-zA-Z]{2,}))$/)]],\n        firstName: [''],\n        lastName: [''],\n        phone: ['', [vm.validators.pattern(/^[0-9-+\\s()]*$/)]],\n        address: ['']\n    });\n\n    getCustomerInfo();\n    \n    vm.cancel = () => {\n        vm.dialogRef.close(null);\n    };\n    \n    vm.save = () => {\n        vm.loading = true;\n        vm.editCustomerFormFormGroup.markAsPristine();\n        const formValues = vm.editCustomerFormFormGroup.value;\n        vm.customer.title = formValues.title;\n        vm.customer.email = formValues.email;\n        vm.customer.phone = formValues.phone;\n        vm.customer.address = formValues.address;\n        if (vm.user) {\n            vm.user.email = formValues.email;\n            vm.user.firstName = formValues.firstName;\n            vm.user.lastName = formValues.lastName;\n        }\n        vm.attributes.firstName = formValues.firstName;\n        vm.attributes.lastName = formValues.lastName;\n\n        customerService.saveCustomer(vm.customer).subscribe(\n            (customer) => {\n                if (vm.user) {\n                    userService.saveUser(vm.user).subscribe(\n                        () => {\n                            saveAttributes(vm.customer.id).subscribe(\n                                () => {\n                                    widgetContext.updateAliases();\n                                    vm.loading = false;\n                                    vm.dialogRef.close(null);\n                                }\n                            );\n                        },\n                        () => {\n                            customerService.saveCustomer(vm.oldCustomerInfo).subscribe(\n                                () => {\n                                    vm.loading = false;\n                                });\n                        });\n                } else {\n                    saveAttributes(vm.customer.id).subscribe(\n                        () => {\n                            widgetContext.updateAliases();\n                            vm.loading = false;\n                            vm.dialogRef.close(null);\n                        }\n                    );\n                }\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n    \n    function getCustomerInfo() {\n        vm.loading = true;\n        vm.attributes = {};\n        vm.customer = null;\n        vm.user = null;\n        customerService.getCustomer(entityId.id).subscribe(\n            (customer) => {\n                vm.customer = customer;\n                vm.oldCustomerInfo = Object.assign({}, customer);\n                \n                const customerUserPageLink = {\n                    toQuery: function() {\n                        return '?pageSize=1&page=0&textSearch='+encodeURIComponent(customer.title);\n                    }\n                }; \n\n\n                widgetContext.rxjs.forkJoin([\n                    attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE', ['firstName', 'lastName']),\n                    userService.getCustomerUsers(customer.id.id, customerUserPageLink)]).subscribe(\n                    (response) => {\n                        let attributes = response[0];\n                        if (attributes.length) {\n                            getEntityAttributes(attributes);\n                        }\n                        if (response[1].data.length) {\n                            vm.user = response[1].data[0];\n                            vm.attributes.firstName = vm.user.firstName;\n                            vm.attributes.lastName = vm.user.lastName;\n                        }\n                        vm.editCustomerFormFormGroup.patchValue({\n                            title: vm.customer.title,\n                            email: vm.customer.email,\n                            firstName: vm.attributes.firstName,\n                            lastName: vm.attributes.lastName,\n                            phone: vm.customer.phone,\n                            address: vm.customer.address\n                        }, {emitEvent: false});\n                        vm.loading = false;\n                   } \n                );\n            }\n        );\n    }\n    \n    function getEntityAttributes(attributes) {\n        for (let i = 0; i < attributes.length; i++) {\n            vm.attributes[attributes[i].key] = attributes[i].value; \n        }\n    }\n    \n    function saveAttributes(entityId) {\n        let attributesArray = [];\n        for (let key in vm.attributes) {\n            if (vm.attributes[key] !== null) {\n                attributesArray.push({key: key, value: vm.attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        } else {\n            return widgetContext.rxjs.of([]);\n        }\n    }\n    \n}",
                "customResources": [],
                "id": "adf1f62e-8e46-4c2b-18f9-6f0a50e0916a"
              }
            ],
            "headerButton": [
              {
                "name": "Add Customer",
                "icon": "add",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "customPretty",
                "customHtml": "<form #addCustomerForm=\"ngForm\" [formGroup]=\"addCustomerFormFormGroup\" class=\"add-customer-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"add-customer-form-toolbar\" fxLayout=\"row\">\n        <h2>Add Customer</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Title</mat-label>\n                <input matInput formControlName=\"title\" required>\n                <mat-error *ngIf=\"addCustomerFormFormGroup.get('title').hasError('required')\">\n                    Title is required\n                </mat-error>\n            </mat-form-field>\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Email</mat-label>\n                <input matInput formControlName=\"email\" type=\"email\" required>\n                <mat-error *ngIf=\"addCustomerFormFormGroup.get('email').hasError('required')\">\n                    Email is required\n                </mat-error>\n                <mat-error *ngIf=\"addCustomerFormFormGroup.get('email').hasError('pattern')\">\n                    Invalid value format\n                </mat-error>\n            </mat-form-field>\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>First Name</mat-label>\n                    <input matInput formControlName=\"firstName\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Last Name</mat-label>\n                    <input matInput formControlName=\"lastName\" >\n                </mat-form-field>\n            </div>\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Phone</mat-label>\n                    <input matInput formControlName=\"phone\">\n                    <mat-error *ngIf=\"addCustomerFormFormGroup.get('phone').hasError('pattern')\">\n                        Invalid format\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Address</mat-label>\n                    <input matInput formControlName=\"address\">\n                </mat-form-field>\n            </div>\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Activation method</mat-label>\n                <mat-select formControlName=\"userActivationMethod\">\n                    <mat-option *ngFor=\"let method of activationMethods\" [value]=\"method.value\">\n                        {{ method.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"add-customer-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || addCustomerFormFormGroup.invalid || !addCustomerFormFormGroup.dirty\">\n            Create\n        </button>\n    </div>\n</form>\n",
                "customCss": ".add-customer-form mat-toolbar.add-customer-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.add-customer-form .add-customer-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}\n",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    userService = $injector.get(widgetContext.servicesMap.get('userService')),\n    customerService = $injector.get(widgetContext.servicesMap.get('customerService')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService')),\n    entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService')),\n    dashboardService = $injector.get(widgetContext.servicesMap.get('dashboardService')),\n    roleService = $injector.get(widgetContext.servicesMap.get('roleService')),\n    translate = $injector.get(widgetContext.servicesMap.get('translate'));\n\nopenAddCustomerDialog();\n\nfunction openAddCustomerDialog() {\n    customDialog.customDialog(htmlTemplate, AddCustomerDialogController).subscribe();\n}\n\nfunction getEntityGroupByName(groupName, groupType) {\n  var entityGroupsPageLink = widgetContext.pageLink(10, 0, groupName);\n  return entityGroupService.getEntityGroupsByPageLink(entityGroupsPageLink, groupType, {ignoreLoading: true}).pipe(\n      widgetContext.rxjs.map((data) => {\n        if (data.data.length) {\n            return data.data.find((group) => group.name === groupName);\n        } else {\n            return null;\n        }\n      })\n  );\n}\n\nfunction AddCustomerDialogController(instance) {\n    let vm = instance;\n\n    vm.activationMethods = [\n        {\n            value: 'displayActivationLink',\n            name: 'Display activation link'\n        },\n        {\n            value: 'sendActivationMail',\n            name: 'Send activation email'\n        }\n    ];\n    \n\n    vm.user = {};\n    vm.customer = {};\n    vm.attributes = {};\n\n    \n    vm.addCustomerFormFormGroup = vm.fb.group({\n        title: ['', [vm.validators.required]],\n        email: ['', [vm.validators.required, vm.validators.pattern(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\_\\-0-9]+\\.)+[a-zA-Z]{2,}))$/)]],\n        firstName: [''],\n        lastName: [''],\n        phone: ['', [vm.validators.pattern(/^[0-9-+\\s()]*$/)]],\n        address: [''],\n        userActivationMethod: ['displayActivationLink']\n    });\n\n    vm.cancel = () => {\n        vm.dialogRef.close(null);\n    };\n    \n    vm.save = () => {\n        vm.loading = true;\n        vm.addCustomerFormFormGroup.markAsPristine();\n        \n        const formValues = vm.addCustomerFormFormGroup.value;\n        vm.customer = {};\n        vm.customer.title = formValues.title;\n        vm.customer.email = formValues.email;\n        vm.customer.phone = formValues.phone;\n        vm.customer.address = formValues.address;\n        \n        vm.user = {};\n        vm.user.email = formValues.email;\n        vm.user.firstName = formValues.firstName;\n        vm.user.lastName = formValues.lastName;\n        \n        vm.attributes = {};\n        vm.attributes.firstName = formValues.firstName;\n        vm.attributes.lastName = formValues.lastName;\n        \n        getEntityGroupByName(\"Water Metering\", \"CUSTOMER\").subscribe(\n             function (entityGroup) {\n                customerService.saveCustomer(vm.customer, entityGroup.id.id).subscribe(\n                    (customer) => {\n                        vm.user.authority = 'CUSTOMER_USER';\n                        vm.user.customerId = customer.id;\n                        \n                        const sendActivationMail = (formValues.userActivationMethod === 'sendActivationMail');\n                        \n                        const dashboardsPageLink = {\n                            toQuery: function() {\n                                return '?pageSize=1&page=0&textSearch='+encodeURIComponent('Water Metering User Dashboard');\n                            }\n                        }; \n                        \n                        widgetContext.rxjs.forkJoin([\n                            entityGroupService.getEntityGroupsByOwnerId(customer.id.entityType, customer.id.id, 'USER', {ignoreLoading: true}), \n                            dashboardService.getTenantDashboards(dashboardsPageLink)]).subscribe(\n                                (response) => {\n                                let groups = response[0];\n                                let dashboard = response[1].data[0];\n                                let usersGroup = groups.filter((group) => {\n                                    return group.name === 'Customer Users';\n                                })[0];\n                                \n                                vm.user.additionalInfo = {\n                                    defaultDashboardFullscreen: true,\n                                    defaultDashboardId: dashboard.id.id\n                                };\n                                \n                                userService.saveUser(vm.user, sendActivationMail, usersGroup.id.id).subscribe(\n                                    (user) => {\n                                        saveAttributes(customer.id).subscribe(\n                                            () => {\n                                                setPermissions(customer, usersGroup,\n                                                    function () { // onSuccess\n                    \n                                                        vm.loading = false;\n                                                        widgetContext.updateAliases();\n                                                \n                                                        if (formValues.userActivationMethod === 'displayActivationLink') {\n                                                            userService.getActivationLink(user.id.id).subscribe(\n                                                                (activationLink) => {\n                                                                    displayActivationLink(activationLink).subscribe(\n                                                                        () => {\n                                                                            vm.dialogRef.close(null);\n                                                                        }\n                                                                    );\n                                                                }\n                                                            );\n                                                        } else {\n                                                            vm.dialogRef.close(null);\n                                                        } \n            \n                                                    },\n                                                    function () { // onFailure\n                                                        customerService.deleteCustomer(customer.id.id).subscribe(\n                                                        () => {\n                                                            vm.loading = false;\n                                                        });\n                                                    }\n                                                );    \n                                            }\n                                        );    \n                                    },\n                                    () => {\n                                        customerService.deleteCustomer(customer.id.id).subscribe(\n                                            () => {\n                                                vm.loading = false;\n                                            });\n                                    }\n                                );\n                            }\n                        );\n                        \n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n             });\n    };\n    \n    function setPermissions(customer, usersGroup, onSuccess, onFailure) {\n        const tasks = [];\n        \n        const readOnlyUserRolePageLink = {\n            toQuery: function() {\n                        return '?pageSize=1&page=0&textSearch='+encodeURIComponent('Water Metering Read Only');\n            }\n        };\n        \n        \n        const waterMetersUserRolePageLink = {\n            toQuery: function() {\n                        return '?pageSize=1&page=0&textSearch='+encodeURIComponent('Water Metering User');\n            }\n        };\n\n        tasks.push(entityGroupService.getEntityGroups('DASHBOARD', {ignoreLoading: true}));\n        tasks.push(roleService.getRoles(readOnlyUserRolePageLink, null, {ignoreLoading: true}));\n        tasks.push(roleService.getRoles(waterMetersUserRolePageLink, null, {ignoreLoading: true}));\n        \n        widgetContext.rxjs.forkJoin(tasks).subscribe(\n            (response) => {\n                let dashboardGroups = response[0];\n                let dashboardGroup = dashboardGroups.filter((group) => {\n                     return group.name === 'Water Metering Shared';\n                })[0];\n                let readOnlyUserRole = response[1].data[0];\n                let waterMetersUserRole = response[2].data[0];\n                \n                let readOnlyUserGroupPermission = {\n                    entityGroupId: dashboardGroup.id,\n                    entityGroupType: dashboardGroup.type,\n                    role: {\n                        type: readOnlyUserRole.type, \n                        id: {id: readOnlyUserRole.id.id}\n                    },\n                    roleId: readOnlyUserRole.id,\n                    userGroupId: usersGroup.id,\n                    userGroupOwnerId: customer.id\n                };\n                \n                let waterMetersUserGroupPermission = {\n                    entityGroupId: null,\n                    entityGroupOwnerId: customer.ownerId,\n                    entityGroupType: null,\n                    role: {\n                        type: waterMetersUserRole.type, \n                        id: {id: waterMetersUserRole.id.id}\n                    },\n                    roleId: waterMetersUserRole.id,\n                    userGroupId: usersGroup.id\n                };\n                \n                const tasks2 = []; \n                tasks2.push(roleService.saveGroupPermission(readOnlyUserGroupPermission));\n                tasks2.push(roleService.saveGroupPermission(waterMetersUserGroupPermission));\n                widgetContext.rxjs.forkJoin(tasks2).subscribe(\n                    () => {\n                        onSuccess();\n                    },\n                    () => {\n                        onFailure();\n                    }\n                );\n                \n            },\n            () => {\n                onFailure();\n            }\n        );\n    }\n    \n    function saveAttributes(entityId) {\n        let attributesArray = [];\n        for (let key in vm.attributes) {\n            if (vm.attributes[key] !== null) {\n                attributesArray.push({key: key, value: vm.attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        } else {\n            return widgetContext.rxjs.of([]);\n        }\n    }\n    \n    function displayActivationLink(activationLink) {\n        const template = '<form style=\"min-width: 400px;\">\\n' +\n            '  <mat-toolbar color=\"primary\">\\n' +\n            '    <h2 translate>user.activation-link</h2>\\n' +\n            '    <span fxFlex></span>\\n' +\n            '    <button mat-icon-button\\n' +\n            '            (click)=\"close()\"\\n' +\n            '            type=\"button\">\\n' +\n            '      <mat-icon class=\"material-icons\">close</mat-icon>\\n' +\n            '    </button>\\n' +\n            '  </mat-toolbar>\\n' +\n            '  <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\\n' +\n            '  </mat-progress-bar>\\n' +\n            '  <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\\n' +\n            '  <div mat-dialog-content tb-toast toastTarget=\"activationLinkDialogContent\">\\n' +\n            '    <div class=\"mat-content\" fxLayout=\"column\">\\n' +\n            '      <span [innerHTML]=\"\\'user.activation-link-text\\' | translate: {activationLink: activationLink}\"></span>\\n' +\n            '      <div fxLayout=\"row\" fxLayoutAlign=\"start center\">\\n' +\n            '        <pre class=\"tb-highlight\" fxFlex><code>{{ activationLink }}</code></pre>\\n' +\n            '        <button mat-icon-button\\n' +\n            '                color=\"primary\"\\n' +\n            '                ngxClipboard\\n' +\n            '                cbContent=\"{{ activationLink }}\"\\n' +\n            '                (cbOnSuccess)=\"onActivationLinkCopied()\"\\n' +\n            '                matTooltip=\"{{ \\'user.copy-activation-link\\' | translate }}\"\\n' +\n            '                matTooltipPosition=\"above\">\\n' +\n            '          <mat-icon svgIcon=\"mdi:clipboard-arrow-left\"></mat-icon>\\n' +\n            '        </button>\\n' +\n            '      </div>\\n' +\n            '    </div>\\n' +\n            '  </div>\\n' +\n            '  <div mat-dialog-actions fxLayoutAlign=\"end center\">\\n' +\n            '    <button mat-button color=\"primary\"\\n' +\n            '            type=\"button\"\\n' +\n            '            cdkFocusInitial\\n' +\n            '            [disabled]=\"(isLoading$ | async)\"\\n' +\n            '            (click)=\"close()\">\\n' +\n            '      {{ \\'action.ok\\' | translate }}\\n' +\n            '    </button>\\n' +\n            '  </div>\\n' +\n            '</form>';\n        return customDialog.customDialog(template, ActivationLinkDialogController, {activationLink: activationLink});\n    }\n    \n    function ActivationLinkDialogController(instance) {\n        var vm = instance;\n\n        vm.activationLink = instance.data.activationLink;\n\n        vm.onActivationLinkCopied = onActivationLinkCopied;\n        vm.close = close;\n\n        function onActivationLinkCopied(){\n            widgetContext.showSuccessToast(translate.instant('user.activation-link-copied-message'), 1000, 'bottom', 'left', 'activationLinkDialogContent');\n        }\n\n        function close() {\n            vm.dialogRef.close(null);\n        }\n    }\n}",
                "customResources": [],
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "d7bf2e4c-26e6-d885-0dce-429812b7901e"
              }
            ],
            "rowClick": [
              {
                "id": "440c8551-520b-0971-9d1c-097866efcaac",
                "name": "View Customer Devices",
                "icon": "more_horiz",
                "type": "openDashboardState",
                "targetDashboardStateId": "customer_devices",
                "setEntityId": true
              }
            ]
          }
        },
        "id": "23fbc25e-a9ea-c9a8-f6bb-9a1ef5a86a92"
      },
      "1b26a5b1-61be-945c-b7a7-85edc3e219cf": {
        "isSystemType": true,
        "bundleAlias": "input_widgets",
        "typeAlias": "update_multiple_attributes",
        "type": "latest",
        "title": "New widget",
        "sizeX": 10,
        "sizeY": 16,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "9da9bd9c-a7cc-244f-16ac-3e2045cff5b1",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "lowBattAlarmEnabled",
                  "type": "attribute",
                  "label": "Low Battery Alarm",
                  "color": "#2196f3",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "booleanSwitch",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1
                  },
                  "_hash": 0.6927732945431533,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "lowBattThreshold",
                  "type": "attribute",
                  "label": "Low Battery Threshold",
                  "color": "#3f51b5",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "string",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1,
                    "disabledOnDataKey": "lowBattAlarmEnabled"
                  },
                  "_hash": 0.43810120489248616,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "lowTempAlarmEnabled",
                  "type": "attribute",
                  "label": "Low Temperature Alarm",
                  "color": "#4caf50",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "booleanSwitch",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1
                  },
                  "_hash": 0.7775367356739471
                },
                {
                  "name": "lowTempThreshold",
                  "type": "attribute",
                  "label": "Low Temperature Threshold",
                  "color": "#e91e63",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "string",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1,
                    "disabledOnDataKey": "lowTempAlarmEnabled"
                  },
                  "_hash": 0.9590971916933051
                },
                {
                  "name": "dailyConsumptionAlarmEnabled",
                  "type": "attribute",
                  "label": "Exceeding Daily Consumption Alarm",
                  "color": "#ffc107",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "booleanSwitch",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1
                  },
                  "_hash": 0.07853020804094801
                },
                {
                  "name": "dailyConsumptionThreshold",
                  "type": "attribute",
                  "label": "Daily Consumption Threshold",
                  "color": "#9c27b0",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "double",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1,
                    "disabledOnDataKey": "dailyConsumptionAlarmEnabled"
                  },
                  "_hash": 0.20555135495339383
                },
                {
                  "name": "weeklyConsumptionAlarmEnabled",
                  "type": "attribute",
                  "label": "Exceeding Weekly Consumption Alarm",
                  "color": "#607d8b",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "booleanSwitch",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1
                  },
                  "_hash": 0.3361600543780858
                },
                {
                  "name": "weeklyConsumptionThreshold",
                  "type": "attribute",
                  "label": "Weekly Consumption Threshold",
                  "color": "#8bc34a",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "double",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1,
                    "disabledOnDataKey": "weeklyConsumptionAlarmEnabled"
                  },
                  "_hash": 0.9860115623092394
                },
                {
                  "name": "inactivityAlarmEnabled",
                  "type": "attribute",
                  "label": "Inactivity Alarm",
                  "color": "#f44336",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "booleanSwitch",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1
                  },
                  "_hash": 0.9480348252243465
                }
              ]
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031166,
                "endTimeMs": 1678176431166
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": true,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "showActionButtons": false,
            "showResultMessage": true,
            "fieldsAlignment": "column",
            "fieldsInRow": 2,
            "widgetTitle": "System Alarms",
            "groupTitle": "${entityName}",
            "showGroupTitle": false
          },
          "title": "New Update Multiple Attributes",
          "dropShadow": false,
          "enableFullscreen": false,
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0",
            "fontSize": "12px",
            "textTransform": "uppercase"
          },
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px",
            "textTransform": "capitalize"
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {},
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "displayTimewindow": true,
          "widgetCss": ".mdc-form-field, .mat-mdc-floating-label {\n    text-transform: uppercase;\n}",
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "id": "1b26a5b1-61be-945c-b7a7-85edc3e219cf"
      },
      "e5602f65-3248-dc60-799c-0d8b413e3604": {
        "isSystemType": true,
        "bundleAlias": "input_widgets",
        "typeAlias": "update_multiple_attributes",
        "type": "latest",
        "title": "New widget",
        "sizeX": 11,
        "sizeY": 16,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "dataKeys": [
                {
                  "name": "lowBattSmsEnabled",
                  "type": "attribute",
                  "label": "Low Battery Alarm",
                  "color": "#2196f3",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "booleanSwitch",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1,
                    "disabledOnDataKey": "lowBattAlarmEnabled"
                  },
                  "_hash": 0.6927732945431533
                },
                {
                  "name": "lowTempSmsEnabled",
                  "type": "attribute",
                  "label": "Low Temperature Alarm",
                  "color": "#4caf50",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "booleanSwitch",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1,
                    "disabledOnDataKey": "lowTempAlarmEnabled"
                  },
                  "_hash": 0.7775367356739471
                },
                {
                  "name": "inactivitySmsEnabled",
                  "type": "attribute",
                  "label": "Inactivity Alarm",
                  "color": "#f44336",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "booleanSwitch",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1,
                    "disabledOnDataKey": "inactivityAlarmEnabled"
                  },
                  "_hash": 0.9480348252243465
                },
                {
                  "name": "dailyConsumptionSmsEnabled",
                  "type": "attribute",
                  "label": "Exceeding Daily Consumption Alarm",
                  "color": "#ffc107",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "booleanSwitch",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1,
                    "disabledOnDataKey": "dailyConsumptionAlarmEnabled"
                  },
                  "_hash": 0.07853020804094801
                },
                {
                  "name": "weeklyConsumptionSmsEnabled",
                  "type": "attribute",
                  "label": "Exceeding Weekly Consumption Alarm",
                  "color": "#607d8b",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "booleanSwitch",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1,
                    "disabledOnDataKey": "weeklyConsumptionAlarmEnabled"
                  },
                  "_hash": 0.1337452487876316
                },
                {
                  "name": "lowBattAlarmEnabled",
                  "type": "attribute",
                  "label": "lowBattAlarmEnabled",
                  "color": "#9c27b0",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "string",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": true,
                    "step": 1
                  },
                  "_hash": 0.9331619031893095
                },
                {
                  "name": "lowTempAlarmEnabled",
                  "type": "attribute",
                  "label": "lowTempAlarmEnabled",
                  "color": "#8bc34a",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "string",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": true,
                    "step": 1
                  },
                  "_hash": 0.10791951005981737
                },
                {
                  "name": "inactivityAlarmEnabled",
                  "type": "attribute",
                  "label": "inactivityAlarmEnabled",
                  "color": "#3f51b5",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "string",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": true,
                    "step": 1
                  },
                  "_hash": 0.201416227417764
                },
                {
                  "name": "dailyConsumptionAlarmEnabled",
                  "type": "attribute",
                  "label": "dailyConsumptionAlarmEnabled",
                  "color": "#e91e63",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "string",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": true,
                    "step": 1
                  },
                  "_hash": 0.6877141787041134
                },
                {
                  "name": "weeklyConsumptionAlarmEnabled",
                  "type": "attribute",
                  "label": "weeklyConsumptionAlarmEnabled",
                  "color": "#ffeb3b",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "string",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": true,
                    "step": 1
                  },
                  "_hash": 0.3514341740752789
                }
              ],
              "entityAliasId": "9da9bd9c-a7cc-244f-16ac-3e2045cff5b1"
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031166,
                "endTimeMs": 1678176431166
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": true,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "showActionButtons": false,
            "showResultMessage": true,
            "fieldsAlignment": "column",
            "fieldsInRow": 2,
            "widgetTitle": "SMS Notifications",
            "groupTitle": "${entityName}"
          },
          "title": "SMS Notifications",
          "dropShadow": false,
          "enableFullscreen": false,
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0",
            "fontSize": "12px",
            "textTransform": "uppercase"
          },
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px",
            "textTransform": "capitalize"
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {},
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "displayTimewindow": true,
          "widgetCss": ".mdc-form-field, .mat-mdc-floating-label {\n    text-transform: uppercase;\n}",
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "id": "e5602f65-3248-dc60-799c-0d8b413e3604"
      },
      "2b036a6f-052f-46fe-14c6-6dc59416704f": {
        "isSystemType": true,
        "bundleAlias": "input_widgets",
        "typeAlias": "update_multiple_attributes",
        "type": "latest",
        "title": "New widget",
        "sizeX": 11,
        "sizeY": 16,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "dataKeys": [
                {
                  "name": "lowBattEmailEnabled",
                  "type": "attribute",
                  "label": "Low Battery Alarm",
                  "color": "#2196f3",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "booleanSwitch",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1,
                    "disabledOnDataKey": "lowBattAlarmEnabled"
                  },
                  "_hash": 0.6927732945431533
                },
                {
                  "name": "lowTempEmailEnabled",
                  "type": "attribute",
                  "label": "Low Temperature Alarm",
                  "color": "#4caf50",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "booleanSwitch",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1,
                    "disabledOnDataKey": "lowTempAlarmEnabled"
                  },
                  "_hash": 0.7775367356739471
                },
                {
                  "name": "inactivityEmailEnabled",
                  "type": "attribute",
                  "label": "Inactivity Alarm",
                  "color": "#f44336",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "booleanSwitch",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1,
                    "disabledOnDataKey": "inactivityAlarmEnabled"
                  },
                  "_hash": 0.9480348252243465
                },
                {
                  "name": "dailyConsumptionEmailEnabled",
                  "type": "attribute",
                  "label": "Exceeding Daily Consumption Alarm",
                  "color": "#ffc107",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "booleanSwitch",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1,
                    "disabledOnDataKey": "dailyConsumptionAlarmEnabled"
                  },
                  "_hash": 0.07853020804094801
                },
                {
                  "name": "weeklyConsumptionEmailEnabled",
                  "type": "attribute",
                  "label": "Exceeding Weekly Consumption Alarm",
                  "color": "#607d8b",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "booleanSwitch",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": false,
                    "step": 1,
                    "disabledOnDataKey": "weeklyConsumptionAlarmEnabled"
                  },
                  "_hash": 0.1337452487876316
                },
                {
                  "name": "lowBattAlarmEnabled",
                  "type": "attribute",
                  "label": "lowBattAlarmEnabled",
                  "color": "#9c27b0",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "string",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": true,
                    "step": 1
                  },
                  "_hash": 0.5094072453291982
                },
                {
                  "name": "lowTempAlarmEnabled",
                  "type": "attribute",
                  "label": "lowTempAlarmEnabled",
                  "color": "#8bc34a",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "string",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": true,
                    "step": 1
                  },
                  "_hash": 0.33533143393702325
                },
                {
                  "name": "inactivityAlarmEnabled",
                  "type": "attribute",
                  "label": "inactivityAlarmEnabled",
                  "color": "#3f51b5",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "string",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": true,
                    "step": 1
                  },
                  "_hash": 0.6498041417701894
                },
                {
                  "name": "dailyConsumptionAlarmEnabled",
                  "type": "attribute",
                  "label": "dailyConsumptionAlarmEnabled",
                  "color": "#e91e63",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "string",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": true,
                    "step": 1
                  },
                  "_hash": 0.8778621689054382
                },
                {
                  "name": "weeklyConsumptionAlarmEnabled",
                  "type": "attribute",
                  "label": "weeklyConsumptionAlarmEnabled",
                  "color": "#ffeb3b",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "string",
                    "required": false,
                    "isEditable": "editable",
                    "dataKeyHidden": true,
                    "step": 1
                  },
                  "_hash": 0.4706952279595922
                }
              ],
              "entityAliasId": "9da9bd9c-a7cc-244f-16ac-3e2045cff5b1"
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031166,
                "endTimeMs": 1678176431166
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": true,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "showActionButtons": false,
            "showResultMessage": true,
            "fieldsAlignment": "column",
            "fieldsInRow": 2,
            "widgetTitle": "Email Notifications",
            "groupTitle": "${entityName}"
          },
          "title": "Email Notifications",
          "dropShadow": false,
          "enableFullscreen": false,
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0",
            "fontSize": "12px",
            "textTransform": "uppercase"
          },
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px",
            "textTransform": "capitalize"
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {},
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "displayTimewindow": true,
          "widgetCss": ".mdc-form-field, .mat-mdc-floating-label {\n    text-transform: uppercase;\n}",
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "id": "2b036a6f-052f-46fe-14c6-6dc59416704f"
      },
      "629dcd1a-9569-ba67-0ffd-638051f4ea97": {
        "isSystemType": true,
        "bundleAlias": "input_widgets",
        "typeAlias": "markers_placement_openstreetmap",
        "type": "latest",
        "title": "New widget",
        "sizeX": 16,
        "sizeY": 12,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "dataKeys": [
                {
                  "name": "latitude",
                  "type": "attribute",
                  "label": "latitude",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.8866239226623536
                },
                {
                  "name": "longitude",
                  "type": "attribute",
                  "label": "longitude",
                  "color": "#4caf50",
                  "settings": {},
                  "_hash": 0.29740195892595755
                },
                {
                  "name": "dailyConsumptionThresholdExceeded",
                  "type": "attribute",
                  "label": "dailyConsumptionThresholdExceeded",
                  "color": "#f44336",
                  "settings": {},
                  "_hash": 0.6403512784014922
                },
                {
                  "name": "weeklyConsumptionThresholdExceeded",
                  "type": "attribute",
                  "label": "weeklyConsumptionThresholdExceeded",
                  "color": "#ffc107",
                  "settings": {},
                  "_hash": 0.7011567596291408
                },
                {
                  "name": "deviceInactive",
                  "type": "attribute",
                  "label": "deviceInactive",
                  "color": "#607d8b",
                  "settings": {},
                  "_hash": 0.1478100071106343
                },
                {
                  "name": "lowBattery",
                  "type": "attribute",
                  "label": "lowBattery",
                  "color": "#9c27b0",
                  "settings": {},
                  "_hash": 0.0660701423190655
                },
                {
                  "name": "temperatureUnderThreshold",
                  "type": "attribute",
                  "label": "temperatureUnderThreshold",
                  "color": "#8bc34a",
                  "settings": {},
                  "_hash": 0.17324389210027236
                }
              ],
              "entityAliasId": "2754dd92-28a3-a689-d65c-ab9001a86f73"
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031166,
                "endTimeMs": 1678176431166
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": true,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "fitMapBounds": true,
            "latKeyName": "latitude",
            "lngKeyName": "longitude",
            "showLabel": true,
            "label": "${entityName}",
            "tooltipPattern": "<b>${entityName}</b><br/><br/><b>Latitude:</b> ${latitude:7}<br/><b>Longitude:</b> ${longitude:7}<br/><br/><link-act name='delete'>Delete</link-act>",
            "markerImageSize": 34,
            "useColorFunction": false,
            "markerImages": [
              "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzciIHZpZXdCb3g9IjAgMCAzMCAzNyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTUgMzUuNTg4MkMxNSAzNS41ODgyIDI5IDI2LjAyNjEgMjkgMTVDMjkgNy4yNjgwMSAyMi43MzIgMSAxNSAxQzcuMjY4MDEgMSAxIDcuMjY4MDEgMSAxNUMxIDI2LjAyNjEgMTUgMzUuNTg4MiAxNSAzNS41ODgyWk0xNC44MzU0IDI0LjcxNzZDMjAuMTExMyAyNC43MTc2IDI0LjM4ODMgMjAuNDQwNiAyNC4zODgzIDE1LjE2NDdDMjQuMzg4MyA5Ljg4ODc2IDIwLjExMTMgNS42MTE3NiAxNC44MzU0IDUuNjExNzZDOS41NTk0MSA1LjYxMTc2IDUuMjgyNDEgOS44ODg3NiA1LjI4MjQxIDE1LjE2NDdDNS4yODI0MSAyMC40NDA2IDkuNTU5NDEgMjQuNzE3NiAxNC44MzU0IDI0LjcxNzZaIiBmaWxsPSJ3aGl0ZSIvPgogICAgPHBhdGggZD0iTTE1IDM1LjU4ODJMMTQuNzE4IDM2LjAwMTFMMTUgMzYuMTkzN0wxNS4yODIgMzYuMDAxMUwxNSAzNS41ODgyWk0yOC41IDE1QzI4LjUgMjAuMzE1MSAyNS4xMTM4IDI1LjM0MTIgMjEuNjMzNiAyOS4wODg3QzE5LjkwMzQgMzAuOTUxNyAxOC4xNzE2IDMyLjQ3NTggMTYuODcxOCAzMy41MzQxQzE2LjIyMjMgMzQuMDYzIDE1LjY4MTYgMzQuNDc0OCAxNS4zMDQzIDM0Ljc1MzhDMTUuMTE1NyAzNC44OTMyIDE0Ljk2OCAzNC45OTk0IDE0Ljg2OCAzNS4wNzAzQzE0LjgxOCAzNS4xMDU4IDE0Ljc3OTkgMzUuMTMyNCAxNC43NTQ2IDM1LjE1QzE0Ljc0MiAzNS4xNTg4IDE0LjczMjUgMzUuMTY1MyAxNC43MjY0IDM1LjE2OTZDMTQuNzIzMyAzNS4xNzE3IDE0LjcyMTEgMzUuMTczMiAxNC43MTk3IDM1LjE3NDJDMTQuNzE5IDM1LjE3NDcgMTQuNzE4NSAzNS4xNzUgMTQuNzE4MiAzNS4xNzUyQzE0LjcxODEgMzUuMTc1MyAxNC43MTggMzUuMTc1MyAxNC43MTc5IDM1LjE3NTRDMTQuNzE3OSAzNS4xNzU0IDE0LjcxOCAzNS4xNzU0IDE1IDM1LjU4ODJDMTUuMjgyIDM2LjAwMTEgMTUuMjgyMiAzNi4wMDEgMTUuMjgyNCAzNi4wMDA5QzE1LjI4MjUgMzYuMDAwOCAxNS4yODI4IDM2LjAwMDYgMTUuMjgzMSAzNi4wMDA0QzE1LjI4MzYgMzYgMTUuMjg0NCAzNS45OTk1IDE1LjI4NTQgMzUuOTk4OEMxNS4yODc0IDM1Ljk5NzQgMTUuMjkwMiAzNS45OTU1IDE1LjI5MzkgMzUuOTkyOUMxNS4zMDEyIDM1Ljk4NzkgMTUuMzExOSAzNS45ODA1IDE1LjMyNTcgMzUuOTcwOUMxNS4zNTM0IDM1Ljk1MTYgMTUuMzk0IDM1LjkyMzIgMTUuNDQ2NSAzNS44ODZDMTUuNTUxNiAzNS44MTE1IDE1LjcwNDYgMzUuNzAxNCAxNS44OTg4IDM1LjU1NzlDMTYuMjg3MSAzNS4yNzA4IDE2Ljg0MDIgMzQuODQ5NCAxNy41MDMyIDM0LjMwOTZDMTguODI4NCAzMy4yMzA1IDIwLjU5NjYgMzEuNjc0OSAyMi4zNjY0IDI5Ljc2OTJDMjUuODg2MiAyNS45NzkgMjkuNSAyMC43MTEgMjkuNSAxNUgyOC41Wk0xNSAxLjVDMjIuNDU1OCAxLjUgMjguNSA3LjU0NDE2IDI4LjUgMTVIMjkuNUMyOS41IDYuOTkxODcgMjMuMDA4MSAwLjUgMTUgMC41VjEuNVpNMS41IDE1QzEuNSA3LjU0NDE2IDcuNTQ0MTYgMS41IDE1IDEuNVYwLjVDNi45OTE4NyAwLjUgMC41IDYuOTkxODcgMC41IDE1SDEuNVpNMTUgMzUuNTg4MkMxNS4yODIgMzUuMTc1NCAxNS4yODIxIDM1LjE3NTQgMTUuMjgyMSAzNS4xNzU0QzE1LjI4MiAzNS4xNzUzIDE1LjI4MTkgMzUuMTc1MyAxNS4yODE4IDM1LjE3NTJDMTUuMjgxNSAzNS4xNzUgMTUuMjgxIDM1LjE3NDcgMTUuMjgwMyAzNS4xNzQyQzE1LjI3ODkgMzUuMTczMiAxNS4yNzY3IDM1LjE3MTcgMTUuMjczNiAzNS4xNjk2QzE1LjI2NzUgMzUuMTY1MyAxNS4yNTggMzUuMTU4OCAxNS4yNDU0IDM1LjE1QzE1LjIyMDEgMzUuMTMyNCAxNS4xODIgMzUuMTA1OCAxNS4xMzIgMzUuMDcwM0MxNS4wMzIgMzQuOTk5NCAxNC44ODQzIDM0Ljg5MzIgMTQuNjk1NyAzNC43NTM4QzE0LjMxODQgMzQuNDc0OCAxMy43Nzc3IDM0LjA2MyAxMy4xMjgyIDMzLjUzNDFDMTEuODI4NCAzMi40NzU4IDEwLjA5NjYgMzAuOTUxNyA4LjM2NjM4IDI5LjA4ODdDNC44ODYxOSAyNS4zNDEyIDEuNSAyMC4zMTUxIDEuNSAxNUgwLjVDMC41IDIwLjcxMSA0LjExMzgxIDI1Ljk3OSA3LjYzMzYyIDI5Ljc2OTJDOS40MDM0MiAzMS42NzQ5IDExLjE3MTYgMzMuMjMwNSAxMi40OTY4IDM0LjMwOTZDMTMuMTU5OCAzNC44NDk0IDEzLjcxMjkgMzUuMjcwOCAxNC4xMDEyIDM1LjU1NzlDMTQuMjk1NCAzNS43MDE0IDE0LjQ0ODQgMzUuODExNSAxNC41NTM1IDM1Ljg4NkMxNC42MDYgMzUuOTIzMiAxNC42NDY2IDM1Ljk1MTYgMTQuNjc0MyAzNS45NzA5QzE0LjY4ODEgMzUuOTgwNSAxNC42OTg4IDM1Ljk4NzkgMTQuNzA2MSAzNS45OTI5QzE0LjcwOTggMzUuOTk1NSAxNC43MTI2IDM1Ljk5NzQgMTQuNzE0NiAzNS45OTg4QzE0LjcxNTYgMzUuOTk5NSAxNC43MTY0IDM2IDE0LjcxNjkgMzYuMDAwNEMxNC43MTcyIDM2LjAwMDYgMTQuNzE3NSAzNi4wMDA4IDE0LjcxNzYgMzYuMDAwOUMxNC43MTc4IDM2LjAwMSAxNC43MTggMzYuMDAxMSAxNSAzNS41ODgyWk0yMy44ODgzIDE1LjE2NDdDMjMuODg4MyAyMC4xNjQ1IDE5LjgzNTIgMjQuMjE3NiAxNC44MzU0IDI0LjIxNzZWMjUuMjE3NkMyMC4zODc0IDI1LjIxNzYgMjQuODg4MyAyMC43MTY4IDI0Ljg4ODMgMTUuMTY0N0gyMy44ODgzWk0xNC44MzU0IDYuMTExNzZDMTkuODM1MiA2LjExMTc2IDIzLjg4ODMgMTAuMTY0OSAyMy44ODgzIDE1LjE2NDdIMjQuODg4M0MyNC44ODgzIDkuNjEyNjIgMjAuMzg3NCA1LjExMTc2IDE0LjgzNTQgNS4xMTE3NlY2LjExMTc2Wk01Ljc4MjQxIDE1LjE2NDdDNS43ODI0MSAxMC4xNjQ5IDkuODM1NTUgNi4xMTE3NiAxNC44MzU0IDYuMTExNzZWNS4xMTE3NkM5LjI4MzI2IDUuMTExNzYgNC43ODI0MSA5LjYxMjYyIDQuNzgyNDEgMTUuMTY0N0g1Ljc4MjQxWk0xNC44MzU0IDI0LjIxNzZDOS44MzU1NSAyNC4yMTc2IDUuNzgyNDEgMjAuMTY0NSA1Ljc4MjQxIDE1LjE2NDdINC43ODI0MUM0Ljc4MjQxIDIwLjcxNjggOS4yODMyNiAyNS4yMTc2IDE0LjgzNTQgMjUuMjE3NlYyNC4yMTc2WiIgZmlsbD0iI0UwRTBFMCIvPgogICAgPGNpcmNsZSBjeD0iMTUuMDAwMSIgY3k9IjE1LjAwMDEiIHI9IjYuMzM3MjEiIGZpbGw9IiM2RkNGOTciIHN0cm9rZT0iIzIxOTY1MyIvPgo8L3N2Zz4=",
              "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzciIHZpZXdCb3g9IjAgMCAzMCAzNyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTUgMzUuNTg4MkMxNSAzNS41ODgyIDI5IDI2LjAyNjEgMjkgMTVDMjkgNy4yNjgwMSAyMi43MzIgMSAxNSAxQzcuMjY4MDEgMSAxIDcuMjY4MDEgMSAxNUMxIDI2LjAyNjEgMTUgMzUuNTg4MiAxNSAzNS41ODgyWk0xNC44MzU0IDI0LjcxNzZDMjAuMTExMyAyNC43MTc2IDI0LjM4ODMgMjAuNDQwNiAyNC4zODgzIDE1LjE2NDdDMjQuMzg4MyA5Ljg4ODc2IDIwLjExMTMgNS42MTE3NiAxNC44MzU0IDUuNjExNzZDOS41NTk0MSA1LjYxMTc2IDUuMjgyNDEgOS44ODg3NiA1LjI4MjQxIDE1LjE2NDdDNS4yODI0MSAyMC40NDA2IDkuNTU5NDEgMjQuNzE3NiAxNC44MzU0IDI0LjcxNzZaIiBmaWxsPSJ3aGl0ZSIvPgogICAgPHBhdGggZD0iTTE1IDM1LjU4ODJMMTQuNzE4IDM2LjAwMTFMMTUgMzYuMTkzN0wxNS4yODIgMzYuMDAxMUwxNSAzNS41ODgyWk0yOC41IDE1QzI4LjUgMjAuMzE1MSAyNS4xMTM4IDI1LjM0MTIgMjEuNjMzNiAyOS4wODg3QzE5LjkwMzQgMzAuOTUxNyAxOC4xNzE2IDMyLjQ3NTggMTYuODcxOCAzMy41MzQxQzE2LjIyMjMgMzQuMDYzIDE1LjY4MTYgMzQuNDc0OCAxNS4zMDQzIDM0Ljc1MzhDMTUuMTE1NyAzNC44OTMyIDE0Ljk2OCAzNC45OTk0IDE0Ljg2OCAzNS4wNzAzQzE0LjgxOCAzNS4xMDU4IDE0Ljc3OTkgMzUuMTMyNCAxNC43NTQ2IDM1LjE1QzE0Ljc0MiAzNS4xNTg4IDE0LjczMjUgMzUuMTY1MyAxNC43MjY0IDM1LjE2OTZDMTQuNzIzMyAzNS4xNzE3IDE0LjcyMTEgMzUuMTczMiAxNC43MTk3IDM1LjE3NDJDMTQuNzE5IDM1LjE3NDcgMTQuNzE4NSAzNS4xNzUgMTQuNzE4MiAzNS4xNzUyQzE0LjcxODEgMzUuMTc1MyAxNC43MTggMzUuMTc1MyAxNC43MTc5IDM1LjE3NTRDMTQuNzE3OSAzNS4xNzU0IDE0LjcxOCAzNS4xNzU0IDE1IDM1LjU4ODJDMTUuMjgyIDM2LjAwMTEgMTUuMjgyMiAzNi4wMDEgMTUuMjgyNCAzNi4wMDA5QzE1LjI4MjUgMzYuMDAwOCAxNS4yODI4IDM2LjAwMDYgMTUuMjgzMSAzNi4wMDA0QzE1LjI4MzYgMzYgMTUuMjg0NCAzNS45OTk1IDE1LjI4NTQgMzUuOTk4OEMxNS4yODc0IDM1Ljk5NzQgMTUuMjkwMiAzNS45OTU1IDE1LjI5MzkgMzUuOTkyOUMxNS4zMDEyIDM1Ljk4NzkgMTUuMzExOSAzNS45ODA1IDE1LjMyNTcgMzUuOTcwOUMxNS4zNTM0IDM1Ljk1MTYgMTUuMzk0IDM1LjkyMzIgMTUuNDQ2NSAzNS44ODZDMTUuNTUxNiAzNS44MTE1IDE1LjcwNDYgMzUuNzAxNCAxNS44OTg4IDM1LjU1NzlDMTYuMjg3MSAzNS4yNzA4IDE2Ljg0MDIgMzQuODQ5NCAxNy41MDMyIDM0LjMwOTZDMTguODI4NCAzMy4yMzA1IDIwLjU5NjYgMzEuNjc0OSAyMi4zNjY0IDI5Ljc2OTJDMjUuODg2MiAyNS45NzkgMjkuNSAyMC43MTEgMjkuNSAxNUgyOC41Wk0xNSAxLjVDMjIuNDU1OCAxLjUgMjguNSA3LjU0NDE2IDI4LjUgMTVIMjkuNUMyOS41IDYuOTkxODcgMjMuMDA4MSAwLjUgMTUgMC41VjEuNVpNMS41IDE1QzEuNSA3LjU0NDE2IDcuNTQ0MTYgMS41IDE1IDEuNVYwLjVDNi45OTE4NyAwLjUgMC41IDYuOTkxODcgMC41IDE1SDEuNVpNMTUgMzUuNTg4MkMxNS4yODIgMzUuMTc1NCAxNS4yODIxIDM1LjE3NTQgMTUuMjgyMSAzNS4xNzU0QzE1LjI4MiAzNS4xNzUzIDE1LjI4MTkgMzUuMTc1MyAxNS4yODE4IDM1LjE3NTJDMTUuMjgxNSAzNS4xNzUgMTUuMjgxIDM1LjE3NDcgMTUuMjgwMyAzNS4xNzQyQzE1LjI3ODkgMzUuMTczMiAxNS4yNzY3IDM1LjE3MTcgMTUuMjczNiAzNS4xNjk2QzE1LjI2NzUgMzUuMTY1MyAxNS4yNTggMzUuMTU4OCAxNS4yNDU0IDM1LjE1QzE1LjIyMDEgMzUuMTMyNCAxNS4xODIgMzUuMTA1OCAxNS4xMzIgMzUuMDcwM0MxNS4wMzIgMzQuOTk5NCAxNC44ODQzIDM0Ljg5MzIgMTQuNjk1NyAzNC43NTM4QzE0LjMxODQgMzQuNDc0OCAxMy43Nzc3IDM0LjA2MyAxMy4xMjgyIDMzLjUzNDFDMTEuODI4NCAzMi40NzU4IDEwLjA5NjYgMzAuOTUxNyA4LjM2NjM4IDI5LjA4ODdDNC44ODYxOSAyNS4zNDEyIDEuNSAyMC4zMTUxIDEuNSAxNUgwLjVDMC41IDIwLjcxMSA0LjExMzgxIDI1Ljk3OSA3LjYzMzYyIDI5Ljc2OTJDOS40MDM0MiAzMS42NzQ5IDExLjE3MTYgMzMuMjMwNSAxMi40OTY4IDM0LjMwOTZDMTMuMTU5OCAzNC44NDk0IDEzLjcxMjkgMzUuMjcwOCAxNC4xMDEyIDM1LjU1NzlDMTQuMjk1NCAzNS43MDE0IDE0LjQ0ODQgMzUuODExNSAxNC41NTM1IDM1Ljg4NkMxNC42MDYgMzUuOTIzMiAxNC42NDY2IDM1Ljk1MTYgMTQuNjc0MyAzNS45NzA5QzE0LjY4ODEgMzUuOTgwNSAxNC42OTg4IDM1Ljk4NzkgMTQuNzA2MSAzNS45OTI5QzE0LjcwOTggMzUuOTk1NSAxNC43MTI2IDM1Ljk5NzQgMTQuNzE0NiAzNS45OTg4QzE0LjcxNTYgMzUuOTk5NSAxNC43MTY0IDM2IDE0LjcxNjkgMzYuMDAwNEMxNC43MTcyIDM2LjAwMDYgMTQuNzE3NSAzNi4wMDA4IDE0LjcxNzYgMzYuMDAwOUMxNC43MTc4IDM2LjAwMSAxNC43MTggMzYuMDAxMSAxNSAzNS41ODgyWk0yMy44ODgzIDE1LjE2NDdDMjMuODg4MyAyMC4xNjQ1IDE5LjgzNTIgMjQuMjE3NiAxNC44MzU0IDI0LjIxNzZWMjUuMjE3NkMyMC4zODc0IDI1LjIxNzYgMjQuODg4MyAyMC43MTY4IDI0Ljg4ODMgMTUuMTY0N0gyMy44ODgzWk0xNC44MzU0IDYuMTExNzZDMTkuODM1MiA2LjExMTc2IDIzLjg4ODMgMTAuMTY0OSAyMy44ODgzIDE1LjE2NDdIMjQuODg4M0MyNC44ODgzIDkuNjEyNjIgMjAuMzg3NCA1LjExMTc2IDE0LjgzNTQgNS4xMTE3NlY2LjExMTc2Wk01Ljc4MjQxIDE1LjE2NDdDNS43ODI0MSAxMC4xNjQ5IDkuODM1NTUgNi4xMTE3NiAxNC44MzU0IDYuMTExNzZWNS4xMTE3NkM5LjI4MzI2IDUuMTExNzYgNC43ODI0MSA5LjYxMjYyIDQuNzgyNDEgMTUuMTY0N0g1Ljc4MjQxWk0xNC44MzU0IDI0LjIxNzZDOS44MzU1NSAyNC4yMTc2IDUuNzgyNDEgMjAuMTY0NSA1Ljc4MjQxIDE1LjE2NDdINC43ODI0MUM0Ljc4MjQxIDIwLjcxNjggOS4yODMyNiAyNS4yMTc2IDE0LjgzNTQgMjUuMjE3NlYyNC4yMTc2WiIgZmlsbD0iI0UwRTBFMCIvPgogICAgPGNpcmNsZSBjeD0iMTUuMDAwMSIgY3k9IjE1LjAwMDEiIHI9IjYuMzM3MjEiIGZpbGw9IiNGMjk5NEEiIHN0cm9rZT0iI0RFODUzNiIvPgo8L3N2Zz4=",
              "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzciIHZpZXdCb3g9IjAgMCAzMCAzNyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTUgMzUuNTg4MkMxNSAzNS41ODgyIDI5IDI2LjAyNjEgMjkgMTVDMjkgNy4yNjgwMSAyMi43MzIgMSAxNSAxQzcuMjY4MDEgMSAxIDcuMjY4MDEgMSAxNUMxIDI2LjAyNjEgMTUgMzUuNTg4MiAxNSAzNS41ODgyWk0xNC44MzU0IDI0LjcxNzZDMjAuMTExMyAyNC43MTc2IDI0LjM4ODMgMjAuNDQwNiAyNC4zODgzIDE1LjE2NDdDMjQuMzg4MyA5Ljg4ODc2IDIwLjExMTMgNS42MTE3NiAxNC44MzU0IDUuNjExNzZDOS41NTk0MSA1LjYxMTc2IDUuMjgyNDEgOS44ODg3NiA1LjI4MjQxIDE1LjE2NDdDNS4yODI0MSAyMC40NDA2IDkuNTU5NDEgMjQuNzE3NiAxNC44MzU0IDI0LjcxNzZaIiBmaWxsPSJ3aGl0ZSIvPgogICAgPHBhdGggZD0iTTE1IDM1LjU4ODJMMTQuNzE4IDM2LjAwMTFMMTUgMzYuMTkzN0wxNS4yODIgMzYuMDAxMUwxNSAzNS41ODgyWk0yOC41IDE1QzI4LjUgMjAuMzE1MSAyNS4xMTM4IDI1LjM0MTIgMjEuNjMzNiAyOS4wODg3QzE5LjkwMzQgMzAuOTUxNyAxOC4xNzE2IDMyLjQ3NTggMTYuODcxOCAzMy41MzQxQzE2LjIyMjMgMzQuMDYzIDE1LjY4MTYgMzQuNDc0OCAxNS4zMDQzIDM0Ljc1MzhDMTUuMTE1NyAzNC44OTMyIDE0Ljk2OCAzNC45OTk0IDE0Ljg2OCAzNS4wNzAzQzE0LjgxOCAzNS4xMDU4IDE0Ljc3OTkgMzUuMTMyNCAxNC43NTQ2IDM1LjE1QzE0Ljc0MiAzNS4xNTg4IDE0LjczMjUgMzUuMTY1MyAxNC43MjY0IDM1LjE2OTZDMTQuNzIzMyAzNS4xNzE3IDE0LjcyMTEgMzUuMTczMiAxNC43MTk3IDM1LjE3NDJDMTQuNzE5IDM1LjE3NDcgMTQuNzE4NSAzNS4xNzUgMTQuNzE4MiAzNS4xNzUyQzE0LjcxODEgMzUuMTc1MyAxNC43MTggMzUuMTc1MyAxNC43MTc5IDM1LjE3NTRDMTQuNzE3OSAzNS4xNzU0IDE0LjcxOCAzNS4xNzU0IDE1IDM1LjU4ODJDMTUuMjgyIDM2LjAwMTEgMTUuMjgyMiAzNi4wMDEgMTUuMjgyNCAzNi4wMDA5QzE1LjI4MjUgMzYuMDAwOCAxNS4yODI4IDM2LjAwMDYgMTUuMjgzMSAzNi4wMDA0QzE1LjI4MzYgMzYgMTUuMjg0NCAzNS45OTk1IDE1LjI4NTQgMzUuOTk4OEMxNS4yODc0IDM1Ljk5NzQgMTUuMjkwMiAzNS45OTU1IDE1LjI5MzkgMzUuOTkyOUMxNS4zMDEyIDM1Ljk4NzkgMTUuMzExOSAzNS45ODA1IDE1LjMyNTcgMzUuOTcwOUMxNS4zNTM0IDM1Ljk1MTYgMTUuMzk0IDM1LjkyMzIgMTUuNDQ2NSAzNS44ODZDMTUuNTUxNiAzNS44MTE1IDE1LjcwNDYgMzUuNzAxNCAxNS44OTg4IDM1LjU1NzlDMTYuMjg3MSAzNS4yNzA4IDE2Ljg0MDIgMzQuODQ5NCAxNy41MDMyIDM0LjMwOTZDMTguODI4NCAzMy4yMzA1IDIwLjU5NjYgMzEuNjc0OSAyMi4zNjY0IDI5Ljc2OTJDMjUuODg2MiAyNS45NzkgMjkuNSAyMC43MTEgMjkuNSAxNUgyOC41Wk0xNSAxLjVDMjIuNDU1OCAxLjUgMjguNSA3LjU0NDE2IDI4LjUgMTVIMjkuNUMyOS41IDYuOTkxODcgMjMuMDA4MSAwLjUgMTUgMC41VjEuNVpNMS41IDE1QzEuNSA3LjU0NDE2IDcuNTQ0MTYgMS41IDE1IDEuNVYwLjVDNi45OTE4NyAwLjUgMC41IDYuOTkxODcgMC41IDE1SDEuNVpNMTUgMzUuNTg4MkMxNS4yODIgMzUuMTc1NCAxNS4yODIxIDM1LjE3NTQgMTUuMjgyMSAzNS4xNzU0QzE1LjI4MiAzNS4xNzUzIDE1LjI4MTkgMzUuMTc1MyAxNS4yODE4IDM1LjE3NTJDMTUuMjgxNSAzNS4xNzUgMTUuMjgxIDM1LjE3NDcgMTUuMjgwMyAzNS4xNzQyQzE1LjI3ODkgMzUuMTczMiAxNS4yNzY3IDM1LjE3MTcgMTUuMjczNiAzNS4xNjk2QzE1LjI2NzUgMzUuMTY1MyAxNS4yNTggMzUuMTU4OCAxNS4yNDU0IDM1LjE1QzE1LjIyMDEgMzUuMTMyNCAxNS4xODIgMzUuMTA1OCAxNS4xMzIgMzUuMDcwM0MxNS4wMzIgMzQuOTk5NCAxNC44ODQzIDM0Ljg5MzIgMTQuNjk1NyAzNC43NTM4QzE0LjMxODQgMzQuNDc0OCAxMy43Nzc3IDM0LjA2MyAxMy4xMjgyIDMzLjUzNDFDMTEuODI4NCAzMi40NzU4IDEwLjA5NjYgMzAuOTUxNyA4LjM2NjM4IDI5LjA4ODdDNC44ODYxOSAyNS4zNDEyIDEuNSAyMC4zMTUxIDEuNSAxNUgwLjVDMC41IDIwLjcxMSA0LjExMzgxIDI1Ljk3OSA3LjYzMzYyIDI5Ljc2OTJDOS40MDM0MiAzMS42NzQ5IDExLjE3MTYgMzMuMjMwNSAxMi40OTY4IDM0LjMwOTZDMTMuMTU5OCAzNC44NDk0IDEzLjcxMjkgMzUuMjcwOCAxNC4xMDEyIDM1LjU1NzlDMTQuMjk1NCAzNS43MDE0IDE0LjQ0ODQgMzUuODExNSAxNC41NTM1IDM1Ljg4NkMxNC42MDYgMzUuOTIzMiAxNC42NDY2IDM1Ljk1MTYgMTQuNjc0MyAzNS45NzA5QzE0LjY4ODEgMzUuOTgwNSAxNC42OTg4IDM1Ljk4NzkgMTQuNzA2MSAzNS45OTI5QzE0LjcwOTggMzUuOTk1NSAxNC43MTI2IDM1Ljk5NzQgMTQuNzE0NiAzNS45OTg4QzE0LjcxNTYgMzUuOTk5NSAxNC43MTY0IDM2IDE0LjcxNjkgMzYuMDAwNEMxNC43MTcyIDM2LjAwMDYgMTQuNzE3NSAzNi4wMDA4IDE0LjcxNzYgMzYuMDAwOUMxNC43MTc4IDM2LjAwMSAxNC43MTggMzYuMDAxMSAxNSAzNS41ODgyWk0yMy44ODgzIDE1LjE2NDdDMjMuODg4MyAyMC4xNjQ1IDE5LjgzNTIgMjQuMjE3NiAxNC44MzU0IDI0LjIxNzZWMjUuMjE3NkMyMC4zODc0IDI1LjIxNzYgMjQuODg4MyAyMC43MTY4IDI0Ljg4ODMgMTUuMTY0N0gyMy44ODgzWk0xNC44MzU0IDYuMTExNzZDMTkuODM1MiA2LjExMTc2IDIzLjg4ODMgMTAuMTY0OSAyMy44ODgzIDE1LjE2NDdIMjQuODg4M0MyNC44ODgzIDkuNjEyNjIgMjAuMzg3NCA1LjExMTc2IDE0LjgzNTQgNS4xMTE3NlY2LjExMTc2Wk01Ljc4MjQxIDE1LjE2NDdDNS43ODI0MSAxMC4xNjQ5IDkuODM1NTUgNi4xMTE3NiAxNC44MzU0IDYuMTExNzZWNS4xMTE3NkM5LjI4MzI2IDUuMTExNzYgNC43ODI0MSA5LjYxMjYyIDQuNzgyNDEgMTUuMTY0N0g1Ljc4MjQxWk0xNC44MzU0IDI0LjIxNzZDOS44MzU1NSAyNC4yMTc2IDUuNzgyNDEgMjAuMTY0NSA1Ljc4MjQxIDE1LjE2NDdINC43ODI0MUM0Ljc4MjQxIDIwLjcxNjggOS4yODMyNiAyNS4yMTc2IDE0LjgzNTQgMjUuMjE3NlYyNC4yMTc2WiIgZmlsbD0iI0UwRTBFMCIvPgogICAgPGNpcmNsZSBjeD0iMTUuMDAwMSIgY3k9IjE1LjAwMDEiIHI9IjYuMzM3MjEiIGZpbGw9IiNFQjU3NTciIHN0cm9rZT0iI0Q3NDM0MyIvPgo8L3N2Zz4="
            ],
            "useMarkerImageFunction": true,
            "color": "#fe7569",
            "mapProvider": "CartoDB.Positron",
            "showTooltip": true,
            "autocloseTooltip": true,
            "defaultCenterPosition": "0,0",
            "customProviderTileUrl": "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
            "showTooltipAction": "click",
            "polygonKeyName": "coordinates",
            "polygonOpacity": 0.5,
            "polygonStrokeOpacity": 1,
            "polygonStrokeWeight": 1,
            "zoomOnClick": true,
            "showCoverageOnHover": true,
            "animate": true,
            "maxClusterRadius": 80,
            "removeOutsideVisibleBounds": true,
            "defaultZoomLevel": 5,
            "markerImageFunction": "var res = {\n    url: images[0],\n    size: 34\n};\nvar dailyConsumptionThresholdExceeded = (dsData[dsIndex]['dailyConsumptionThresholdExceeded'] && dsData[dsIndex]['dailyConsumptionThresholdExceeded'] === 'true');\nvar weeklyConsumptionThresholdExceeded = (dsData[dsIndex]['weeklyConsumptionThresholdExceeded'] && dsData[dsIndex]['weeklyConsumptionThresholdExceeded'] === 'true');\nvar inactive = (dsData[dsIndex]['deviceInactive'] && dsData[dsIndex]['deviceInactive'] === 'true');\nvar lowBattery = (dsData[dsIndex]['lowBattery'] && dsData[dsIndex]['lowBattery'] === 'true');\nvar lowTemperature = (dsData[dsIndex]['temperatureUnderThreshold'] && dsData[dsIndex]['temperatureUnderThreshold'] === 'true');\n\nif (inactive) {\n    res.url = images[2];\n} else if (dailyConsumptionThresholdExceeded || weeklyConsumptionThresholdExceeded || \n            lowBattery || lowTemperature) {\n    res.url = images[1];\n}\nreturn res;",
            "draggableMarker": true,
            "editablePolygon": true,
            "provider": "openstreet-map",
            "mapPageSize": 16384,
            "useCustomProvider": false,
            "useDefaultCenterPosition": false,
            "disableScrollZooming": false,
            "disableZoomControl": false,
            "useLabelFunction": false,
            "useTooltipFunction": false,
            "tooltipOffsetX": 0,
            "tooltipOffsetY": -1,
            "markerOffsetX": 0.5,
            "markerOffsetY": 1,
            "showPolygon": false,
            "useClusterMarkers": false,
            "snappable": false,
            "initDragMode": true,
            "hideAllControlButton": true,
            "hideDrawControlButton": false,
            "hideEditControlButton": false,
            "hideRemoveControlButton": false
          },
          "title": "Drag and drop marker to change location",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "actions": {
            "tooltipAction": [
              {
                "id": "54c293c4-9ca6-e34f-dc6a-0271944c1c66",
                "name": "delete",
                "icon": "more_horiz",
                "type": "custom",
                "customFunction": "var $rootScope = widgetContext.$scope.$injector.get('$rootScope');\nvar entityDatasource = widgetContext.map.subscription.datasources.filter(\n    function(entity) {\n        return entity.entityId === entityId.id\n    });\n\nwidgetContext.map.saveMarkerLocation(entityDatasource[0],\n    widgetContext.map.locations[0], {\n        \"lat\": null,\n        \"lng\": null\n    }).then(function succes() {\n        $rootScope.$broadcast('widgetForceReInit');\n    });"
              }
            ]
          },
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "displayTimewindow": true,
          "enableDataExport": false
        },
        "id": "629dcd1a-9569-ba67-0ffd-638051f4ea97"
      },
      "d25322de-82d0-d64c-9377-74ea62a446d2": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"total\">\n        <div class='description' id=\"total\">\n            Total\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation: Total",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "1d64528e-686d-0ba7-6e3a-8124e612a0f1",
                "name": "total",
                "icon": "more_horiz",
                "type": "custom",
                "customFunction": "backToPrevState();\nopenDashboardState('default');\n\nfunction backToPrevState() {\n    var stateIndex = widgetContext.stateController\n        .getStateIndex() - 1;\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              }
            ]
          }
        },
        "id": "d25322de-82d0-d64c-9377-74ea62a446d2"
      },
      "877c7f5d-0542-9a5e-544f-c1967bfce412": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Analytics",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "analytics",
                "icon": "more_horiz",
                "type": "custom",
                "customFunction": "backToPrevState();\nopenDashboardState('analytics');\n\nfunction backToPrevState() {\n    var stateIndex = widgetContext.stateController\n        .getStateIndex() - 1;\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              }
            ]
          }
        },
        "id": "877c7f5d-0542-9a5e-544f-c1967bfce412"
      },
      "6a2c4e10-972d-9197-8ce9-647848d18715": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Devices",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "devices",
                "icon": "more_horiz",
                "type": "custom",
                "customFunction": "backToPrevState();\nopenDashboardState('devices');\n\nfunction backToPrevState() {\n    var stateIndex = widgetContext.stateController\n        .getStateIndex() - 1;\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              }
            ]
          }
        },
        "id": "6a2c4e10-972d-9197-8ce9-647848d18715"
      },
      "7d36bc49-318c-074b-f788-045ce9a8f7e8": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"alarms\">\n        <div class='description' id=\"alarms\">\n            Alarms\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Alarms",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "alarms",
                "icon": "more_horiz",
                "type": "custom",
                "customFunction": "backToPrevState();\nopenDashboardState('alarms');\n\nfunction backToPrevState() {\n    var stateIndex = widgetContext.stateController\n        .getStateIndex() - 1;\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              }
            ]
          }
        },
        "id": "7d36bc49-318c-074b-f788-045ce9a8f7e8"
      },
      "c24b8225-17d9-daad-e52d-038983c8f803": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"settings\">\n        <div class='description' id=\"settings\">\n            Settings\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Settings",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "settings",
                "icon": "more_horiz",
                "type": "custom",
                "customFunction": "backToPrevState();\nopenDashboardState('settings');\n\nfunction backToPrevState() {\n    var stateIndex = widgetContext.stateController\n        .getStateIndex() - 1;\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              }
            ]
          }
        },
        "id": "c24b8225-17d9-daad-e52d-038983c8f803"
      },
      "236a2885-a90d-2662-abf1-727e38af88b5": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "entities_table",
        "type": "latest",
        "title": "New widget",
        "sizeX": 24,
        "sizeY": 16,
        "config": {
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031166,
                "endTimeMs": 1678176431166
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSearch": true,
            "displayPagination": true,
            "defaultPageSize": 10,
            "displayEntityName": true,
            "displayEntityType": false,
            "defaultSortOrder": "entityName",
            "entitiesTitle": "Water Meters",
            "displayEntityLabel": true,
            "enableSelectColumnDisplay": true,
            "entityNameColumnTitle": "Serial Number",
            "entityLabelColumnTitle": "Label",
            "enableStickyHeader": true,
            "enableStickyAction": true,
            "reserveSpaceForHiddenAction": "true",
            "useRowStyleFunction": false
          },
          "title": "Water Meters",
          "dropShadow": false,
          "enableFullscreen": true,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "e56b6bda-c865-20b2-b740-ba33356ab9cb",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "meterReading",
                  "type": "timeseries",
                  "label": "Consumed",
                  "color": "#2196f3",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.6622074305397865,
                  "units": "mÂ³",
                  "decimals": 2,
                  "postFuncBody": "return value || 0;"
                },
                {
                  "name": "address",
                  "type": "attribute",
                  "label": "Address",
                  "color": "#f44336",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.9392023657375805
                },
                {
                  "name": "active",
                  "type": "attribute",
                  "label": "Status",
                  "color": "#ffc107",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.9076421001622259,
                  "postFuncBody": "if (value === 'true') {\n    return 'Active';\n} else {\n    return 'Inactive';\n}"
                },
                {
                  "name": "leakage",
                  "type": "timeseries",
                  "label": "Leakage",
                  "color": "#8bc34a",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": true,
                    "useCellContentFunction": true,
                    "cellStyleFunction": "var color;\nif (value == 'true') {\n    color = '#EB5757';\n} else {\n    color = '#27AE60';\n}\nreturn {\n    color: color,\n    fontSize: '18px'\n};",
                    "cellContentFunction": "value = '&#11044;';\nreturn value;"
                  },
                  "_hash": 0.9508568110027811,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "displayTimewindow": true,
          "actions": {
            "headerButton": [
              {
                "name": "Add device",
                "icon": "add",
                "type": "customPretty",
                "customHtml": "<form #addDeviceForm=\"ngForm\" [formGroup]=\"addDeviceFormGroup\" class=\"add-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"add-device-form-toolbar\" fxLayout=\"row\">\n            <h2>Add Device</h2>\n            <span fxFlex></span>\n            <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n                <mat-icon class=\"material-icons\">close</mat-icon>\n            </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Serial Number</mat-label>\n                    <input matInput formControlName=\"deviceName\" required>\n                    <mat-error *ngIf=\"addDeviceFormGroup.get('deviceName').hasError('required')\">\n                        Serial Number is required.\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"deviceLabel\" >\n                </mat-form-field>\n            </div>\n            <div formGroupName=\"attributes\" fxLayout=\"column\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Address</mat-label>\n                    <input matInput formControlName=\"address\">\n                </mat-form-field>\n            </div>\n            <tb-owner-autocomplete\n                    formControlName=\"targetOwnerId\"\n                    placeholderText=\"Device owner\"\n                    notFoundText=\"entity-group.no-owners-matching\">\n            </tb-owner-autocomplete>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"add-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || addDeviceForm.invalid || !addDeviceForm.dirty\">\n            Create\n        </button>\n    </div>\n</form>\n",
                "customCss": ".add-device-form mat-toolbar.add-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.add-device-form .add-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    deviceService = $injector.get(widgetContext.servicesMap.get('deviceService')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService')),\n    entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService')),\n    entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService'));\n  \nopenAddDeviceDialog();\n\nfunction openAddDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, AddDeviceDialogController).subscribe();\n}\n\nfunction AddDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.deviceType = 'Water Meter';\n    \n    vm.targetOwnerId = widgetContext.stateController.getEntityId();\n    \n    vm.addDeviceFormGroup = vm.fb.group({\n        deviceName: ['', [vm.validators.required]],\n        deviceLabel: [null],\n        attributes: vm.fb.group({\n            address: [null]\n        }),\n        targetOwnerId: [vm.targetOwnerId]\n    });\n    \n    vm.addDeviceFormGroup.get('targetOwnerId').disable({emitEvent: false});\n    \n    vm.cancel = () => {\n        vm.dialogRef.close(null);\n    };\n    \n    vm.save = () => {\n        vm.loading = true;\n        vm.addDeviceFormGroup.markAsPristine();\n        const formValues = vm.addDeviceFormGroup.value;\n        let device = {\n            name: formValues.deviceName,\n            type: vm.deviceType,\n            label: formValues.deviceLabel\n        };\n        deviceService.saveDevice(device).subscribe(\n            (device) => {\n                widgetContext.rxjs.forkJoin([\n                    entityGroupService.changeEntityOwner(vm.targetOwnerId, device.id, {ignoreLoading: true}),\n                    saveAttributes(device.id),\n                    addRelation(device.id, vm.targetOwnerId)\n                ]).subscribe(\n                    () => {\n                        vm.loading = false;\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n    \n    function saveAttributes(entityId) {\n        let attributes = vm.addDeviceFormGroup.get('attributes').value;\n        attributes.inactivityTimeout = 7200000;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== null) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        } else {\n            return widgetContext.rxjs.of([]);\n        }\n    }\n\n    function addRelation(deviceId, entityId) {\n        let relation = {\n            type: 'Owns',\n            typeGroup: 'COMMON',\n            from: entityId,\n            to: deviceId\n        };\n        \n        return entityRelationService.saveRelation(relation);\n    }\n}\n",
                "customResources": [],
                "id": "1044aeb8-0967-9f56-cee1-cf700dc861ca"
              }
            ],
            "rowClick": [
              {
                "id": "81dffda7-f420-5b50-05ff-fa08077b9eb9",
                "name": "Device Details",
                "icon": "more_horiz",
                "type": "openDashboardState",
                "targetDashboardStateId": "device_details",
                "setEntityId": true
              }
            ],
            "actionCellButton": [
              {
                "name": "Edit Info",
                "icon": "edit",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "customPretty",
                "customHtml": "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Edit Device</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Serial Number</mat-label>\n                    <input matInput formControlName=\"deviceName\" required>\n                    <mat-error *ngIf=\"editDeviceFormGroup.get('deviceName').hasError('required')\">\n                        Serial Number is required.\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"deviceLabel\" >\n                </mat-form-field>\n            </div>\n            <mat-form-field class=\"mat-block\">\n                <mat-label>Select device owner</mat-label>\n                <mat-select formControlName=\"targetOwner\" required>\n                    <mat-select-trigger>\n                        {{editDeviceFormGroup.get('targetOwner').value?.name}}\n                    </mat-select-trigger>\n                    <mat-option *ngFor=\"let owner of availableOwners\" [value]=\"owner\">\n                        {{owner?.name}}\n                    </mat-option>\n                    <mat-option *ngIf=\"!availableOwners?.length\" disabled [value]=\"null\">\n                        No owners available\n                    </mat-option>\n                </mat-select>\n                <mat-error *ngIf=\"editDeviceFormGroup.get('targetOwner').hasError('required')\">\n                    Target owner is required.\n                </mat-error>\n            </mat-form-field>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss": ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    deviceService = $injector.get(widgetContext.servicesMap.get('deviceService')),\n    entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService')),\n    entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService'));\n    entityService = $injector.get(widgetContext.servicesMap.get('entityService'));\n// userPermissionsService = $injector.get(widgetContext.servicesMap.get('userPermissionsService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.device = {};\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        deviceName: ['', [vm.validators.required]],\n        deviceLabel: [null],\n        targetOwner: [null, [vm.validators.required]]\n    });\n\n    init().subscribe(() => {\n        getEntityInfo();\n    });\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        saveDevice().subscribe(\n            (/*device*/) => {\n                changeDeviceOwner().subscribe(\n                    () => {\n                        vm.loading = false;\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n    \n    function init() {\n        vm.availableOwners = [\n            {\n                name: 'Tenant',\n                id: {id: widgetContext.currentUser.tenantId, entityType: 'TENANT' }\n            }\n        ];\n        return getEntityGroupByName('Water Metering', 'CUSTOMER').pipe(\n            widgetContext.rxjs.switchMap((waterMeteringGroup) => {\n               if (waterMeteringGroup) {\n                    var query = {\n                      entityFilter: {\n                          type: 'entityGroup',\n                          groupType: 'CUSTOMER',\n                          entityGroup: waterMeteringGroup.id.id\n                      },\n                      pageLink: {\n                          pageSize: 100,\n                          page: 0\n                      },\n                      entityFields: [\n                          {\n                              key: 'name',\n                              type: 'ENTITY_FIELD'\n                          }\n                      ]\n                  };\n                  return entityService.findEntityDataByQuery(query).pipe(\n                      widgetContext.rxjs.switchMap((data) => {\n                          const availableCustomers = data.data.map((entityData) => {\n                              return {\n                                  id: entityData.entityId,\n                                  name: entityData.latest[\"ENTITY_FIELD\"].name.value\n                              };\n                          });\n                          vm.availableOwners = vm.availableOwners.concat(availableCustomers);\n                          return widgetContext.rxjs.of(null);\n                      })\n                  );\n            } else {\n                return widgetContext.rxjs.of(null);\n            }\n        }\n      ));\n    }\n\n    function getEntityInfo() {\n        vm.loading = true;\n        deviceService.getDevice(entityId.id).subscribe(\n            (device) => {\n                vm.device = device;\n                let ownerId = vm.device.ownerId;\n                let targetOwner = vm.availableOwners.find((owner) => owner.id.id === ownerId.id);\n                vm.editDeviceFormGroup.patchValue({\n                    deviceName: vm.device.name,\n                    deviceLabel: vm.device.label,\n                    targetOwner: targetOwner\n                }, {emitEvent: false});\n                vm.loading = false;\n            }\n        );\n    }\n\n    function saveDevice() {\n        const formValues = vm.editDeviceFormGroup.value;\n        if (vm.device.name !== formValues.deviceName || (vm.device.label !== formValues.deviceLabel)) {\n            vm.device.name = formValues.deviceName;\n            vm.device.label = formValues.deviceLabel;\n            return deviceService.saveDevice(vm.device);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n\n    function changeDeviceOwner() {\n        let newOwner = vm.editDeviceFormGroup.get('targetOwner').value;\n        if (newOwner.id !== vm.device.ownerId.id) {\n            return widgetContext.rxjs.forkJoin([\n                entityGroupService.changeEntityOwner(newOwner.id, vm.device.id),\n                saveRelations(vm.device.id, vm.device.ownerId, newOwner.id)\n            ]);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n\n    function saveRelations(deviceId, currentOwnerId, newOwnerId) {\n        let tasks = [\n            deleteRelation(deviceId, currentOwnerId),\n            addRelation(deviceId, newOwnerId)\n        ];\n        return widgetContext.rxjs.forkJoin(tasks);\n    }\n\n    function addRelation(deviceId, targetOwnerId) {\n        if (targetOwnerId.entityType === 'TENANT') {\n            return widgetContext.rxjs.of(null);\n        } else {\n            let relation = {\n                type: 'Owns',\n                typeGroup: 'COMMON',\n                from: targetOwnerId,\n                to: deviceId\n            };\n    \n            return entityRelationService.saveRelation(relation);\n        }\n    }\n\n    function deleteRelation(deviceId, currentOwnerId) {\n        if (currentOwnerId.entityType === 'TENANT') {\n            return widgetContext.rxjs.of(null);\n        } else {\n            let relation = {\n                type: 'Owns',\n                from: currentOwnerId,\n                to: deviceId\n            };\n    \n            return entityRelationService.deleteRelation(relation.from, relation.type, relation.to);\n        }\n    }\n    \n    function getEntityGroupByName(groupName, groupType) {\n      var entityGroupsPageLink = widgetContext.pageLink(10, 0, groupName);\n      return entityGroupService.getEntityGroupsByPageLink(entityGroupsPageLink, groupType, {ignoreLoading: true}).pipe(\n          widgetContext.rxjs.map((data) => {\n            if (data.data.length) {\n                return data.data.find((group) => group.name === groupName);\n            } else {\n                return null;\n            }\n          })\n      );\n   }\n}",
                "customResources": [],
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "702a8de4-6902-3545-223d-be481a8a29f5"
              },
              {
                "name": "Set Location Parameters",
                "icon": "location_on",
                "type": "openDashboardState",
                "targetDashboardStateId": "set-location",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openInSeparateDialog": true,
                "dialogTitle": "",
                "dialogHideDashboardToolbar": true,
                "dialogWidth": null,
                "dialogHeight": null,
                "openRightLayout": false,
                "id": "8e19b15c-7b8c-2ba8-fc43-d995ad0b1bbb"
              },
              {
                "name": "Set Alarm Thresholds",
                "icon": "notifications",
                "type": "customPretty",
                "customHtml": "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Thresholds Configuration</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Daily Consumption Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"dailyConsumptionThreshold\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Weekly Consumption Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"weeklyConsumptionThreshold\" >\n                </mat-form-field>\n            </div>\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Low Battery Threshold (%)</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"lowBattThreshold\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Low Temperature Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"lowTempThreshold\" >\n                </mat-form-field>\n            </div>\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Inactivity Timeout (ms)</mat-label>\n                <input matInput type=\"number\" step=\"1\" formControlName=\"inactivityTimeout\">\n                <mat-error *ngIf=\"editDeviceFormGroup.get('inactivityTimeout').hasError('pattern')\">\n                    Invalid value\n                </mat-error>\n            </mat-form-field>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss": ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.attributes = {};\n    let attributesKeys = ['dailyConsumptionThreshold', 'weeklyConsumptionThreshold',\n        'lowBattThreshold', 'lowTempThreshold', 'inactivityTimeout'];\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        dailyConsumptionThreshold: [null],\n        weeklyConsumptionThreshold: [null],\n        lowBattThreshold: [null],\n        lowTempThreshold: [null],\n        inactivityTimeout: [null, [vm.validators.pattern(/^-?[0-9]+$/)]]\n    });\n\n    getEntityInfo(attributesKeys);\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        saveAttributes(entityId).subscribe(\n            () => {\n                vm.loading = false;\n                vm.dialogRef.close(null);\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function getEntityInfo(attributesKeys) {\n        vm.loading = true;\n        attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE', attributesKeys).subscribe(\n            (data) => {\n                if (data.length) {\n                    getEntityAttributes(data);\n                    vm.editDeviceFormGroup.patchValue(vm.attributes, {emitEvent: false});\n                }\n                vm.loading = false;\n            }\n        );\n    }\n\n    function getEntityAttributes(attributes) {\n        for (let i = 0; i < attributes.length; i++) {\n            vm.attributes[attributes[i].key] = attributes[i].value;\n        }\n    }\n\n    function saveAttributes(entityId) {\n        let attributes = vm.editDeviceFormGroup.value;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== vm.attributes[key]) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n}",
                "customResources": [],
                "id": "f0ff3379-9600-c51d-fbe4-911a7d0d5af4"
              }
            ]
          }
        },
        "id": "236a2885-a90d-2662-abf1-727e38af88b5"
      },
      "046968a1-fc76-2177-cf2b-d185b8e1ec84": {
        "isSystemType": true,
        "bundleAlias": "alarm_widgets",
        "typeAlias": "alarms_table",
        "type": "alarm",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 16,
        "config": {
          "timewindow": {
            "realtime": {
              "interval": 1000,
              "timewindowMs": 2592000000
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSelection": true,
            "enableSearch": true,
            "displayDetails": false,
            "allowAcknowledgment": false,
            "allowClear": false,
            "displayPagination": false,
            "defaultPageSize": 10,
            "defaultSortOrder": "-createdTime",
            "alarmsTitle": "Active Alarms",
            "enableSelectColumnDisplay": true,
            "enableStatusFilter": false
          },
          "title": "Active Alarms",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "alarmSource": {
            "type": "entity",
            "dataKeys": [
              {
                "name": "createdTime",
                "type": "alarm",
                "label": "Created time",
                "color": "#2196f3",
                "settings": {},
                "_hash": 0.8381664834025695
              },
              {
                "name": "originator",
                "type": "alarm",
                "label": "Originator",
                "color": "#4caf50",
                "settings": {},
                "_hash": 0.2921772271979377
              },
              {
                "name": "type",
                "type": "alarm",
                "label": "Type",
                "color": "#f44336",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": ""
                },
                "_hash": 0.5983551827511795
              }
            ],
            "entityAliasId": "2754dd92-28a3-a689-d65c-ab9001a86f73",
            "name": "alarms"
          },
          "alarmSearchStatus": "ACTIVE",
          "alarmsPollingInterval": 5,
          "alarmTypeList": [
            "Daily Consumption Threshold Exceeded",
            "Weekly Consumption Threshold Exceeded",
            "Low Battery",
            "Low Temperature",
            "Device Inactive",
            "Leakage Detected"
          ],
          "datasources": [],
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "displayTimewindow": false,
          "actions": {
            "headerButton": [
              {
                "id": "1f58fb76-87bf-235a-4ce8-e3b67bf3c834",
                "name": "Alarms Details",
                "icon": "fullscreen",
                "type": "updateDashboardState",
                "targetDashboardStateId": "alarms",
                "setEntityId": false
              }
            ]
          },
          "alarmsMaxCountLoad": 0,
          "alarmsFetchSize": 100
        },
        "id": "046968a1-fc76-2177-cf2b-d185b8e1ec84"
      },
      "41f3bd64-9293-91b4-60aa-eeb4971f96bd": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "dataKeys": [
                {
                  "name": "weeklyConsumption",
                  "type": "timeseries",
                  "label": "weeklyConsumption",
                  "color": "#4caf50",
                  "settings": {},
                  "_hash": 0.6873469556096485,
                  "postFuncBody": "return value || 0;"
                }
              ],
              "entityAliasId": "9da9bd9c-a7cc-244f-16ac-3e2045cff5b1"
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031166,
                "endTimeMs": 1678176431166
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   border: 1px solid #E0E0E0;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 22px 30px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .value {\n    font-size: 1.5em;\n    font-weight: bold;\n    line-height: 1.5;\n    color: #333333;\n    text-align: center;\n}\n\n.card .description {\n    font-size: 1em;\n    font-weight: normal;\n    line-height: 1.5;\n    color: #333333;\n    text-align: center;\n}\n\n@media (min-width: 960px) and (max-width: 1200px) {\n    .card .value {\n        font-size: 1.2em;\n        line-height: 1;\n    }\n    \n    .card .description {\n        font-size: 0.8em;\n        line-height: 1;\n    }\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content'>\n        <div class='value'>\n            ${weeklyConsumption:2} m<sup>3</sup>\n        </div> \n        <div class='description'>\n            Consumed per current week\n        </div>\n    </div>\n</div>"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {},
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "displayTimewindow": true
        },
        "id": "41f3bd64-9293-91b4-60aa-eeb4971f96bd"
      },
      "47beef8a-be00-49f9-fd8e-3b4c409e0a1a": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "dataKeys": [
                {
                  "name": "lowBatteryDevicesNumber",
                  "type": "attribute",
                  "label": "lowBatteryDevicesNumber",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.9365559121113138,
                  "postFuncBody": "return value || 0;"
                }
              ],
              "entityAliasId": "9da9bd9c-a7cc-244f-16ac-3e2045cff5b1"
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031166,
                "endTimeMs": 1678176431166
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   border: 1px solid #E0E0E0;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 22px 30px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .value {\n    font-size: 1.5em;\n    font-weight: bold;\n    line-height: 1.5;\n    color: #F2994A;\n    text-align: center;\n}\n\n.card .description {\n    font-size: 1em;\n    font-weight: normal;\n    line-height: 1.5;\n    color: #333333;\n    text-align: center;\n}\n\n@media (min-width: 960px) and (max-width: 1200px) {\n    .card .value {\n        font-size: 1.2em;\n        line-height: 1;\n    }\n    \n    .card .description {\n        font-size: 0.8em;\n        line-height: 1;\n    }\n}",
            "cardHtml": "<div class='card'>\n    <div class='content'>\n        <div class='value'>\n            ${lowBatteryDevicesNumber:0}\n        </div> \n        <div class='description'>\n            Low battery devices\n        </div>\n    </div>\n</div>"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {},
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "displayTimewindow": true
        },
        "id": "47beef8a-be00-49f9-fd8e-3b4c409e0a1a"
      },
      "db41ee56-d991-3354-6210-f66ea84e9623": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "dataKeys": [
                {
                  "name": "inactiveDevicesNumber",
                  "type": "attribute",
                  "label": "inactiveDevicesNumber",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.2857686772503587,
                  "postFuncBody": "return value || 0;"
                }
              ],
              "entityAliasId": "9da9bd9c-a7cc-244f-16ac-3e2045cff5b1"
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031166,
                "endTimeMs": 1678176431166
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   border: 1px solid #E0E0E0;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 22px 30px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .value {\n    font-size: 1.5em;\n    font-weight: bold;\n    line-height: 1.5;\n    color: #EB5757;\n    text-align: center;\n}\n\n.card .description {\n    font-size: 1em;\n    font-weight: normal;\n    line-height: 1.5;\n    color: #333333;\n    text-align: center;\n}\n\n@media (min-width: 960px) and (max-width: 1200px) {\n    .card .value {\n        font-size: 1.2em;\n        line-height: 1;\n    }\n    \n    .card .description {\n        font-size: 0.8em;\n        line-height: 1;\n    }\n}",
            "cardHtml": "<div class='card'>\n    <div class='content'>\n        <div class='value'>\n            ${inactiveDevicesNumber:0}\n        </div> \n        <div class='description'>\n            Inactive devices\n        </div>\n    </div>\n</div>"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {},
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "displayTimewindow": true
        },
        "id": "db41ee56-d991-3354-6210-f66ea84e9623"
      },
      "d902d11f-3f82-c6c8-f868-7e795c4981d3": {
        "isSystemType": true,
        "bundleAlias": "input_widgets",
        "typeAlias": "update_multiple_attributes",
        "type": "latest",
        "title": "New widget",
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "2754dd92-28a3-a689-d65c-ab9001a86f73",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "address",
                  "type": "attribute",
                  "label": "Address",
                  "color": "#2196f3",
                  "settings": {
                    "dataKeyType": "server",
                    "dataKeyValueType": "string",
                    "step": 1,
                    "required": false,
                    "requiredErrorMessage": "",
                    "minValueErrorMessage": "",
                    "maxValueErrorMessage": "",
                    "invalidDateErrorMessage": "",
                    "isEditable": "editable",
                    "dataKeyHidden": false
                  },
                  "_hash": 0.48214674570930094,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031166,
                "endTimeMs": 1678176431166
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "AVG",
              "limit": 25000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "showActionButtons": false,
            "showResultMessage": true,
            "fieldsAlignment": "row",
            "fieldsInRow": 1,
            "groupTitle": "${entityName}"
          },
          "title": "New Update Multiple Attributes",
          "dropShadow": true,
          "enableFullscreen": false,
          "enableDataExport": false,
          "widgetStyle": {},
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {},
          "showTitleIcon": false,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": ""
        },
        "row": 0,
        "col": 0,
        "id": "d902d11f-3f82-c6c8-f868-7e795c4981d3"
      },
      "2b1da004-36c7-d066-085a-6f53108fa625": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id='customers'>\n        <div class='description' id='customers'>\n            Customers\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Customers",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "Navigate to the list of customers",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "name": "customers",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "customers",
                "setEntityId": false,
                "stateEntityParamName": null,
                "openRightLayout": null,
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207"
              }
            ]
          }
        },
        "id": "2b1da004-36c7-d066-085a-6f53108fa625"
      },
      "f7a6aaee-6a61-a77d-3969-5abd1e559804": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id='customers'>\n        <div class='description' id='customers'>\n            Customers\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Customers",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "Navigate to the list of customers",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "name": "customers",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "customers",
                "setEntityId": false,
                "stateEntityParamName": null,
                "openRightLayout": null,
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207"
              }
            ]
          }
        },
        "id": "f7a6aaee-6a61-a77d-3969-5abd1e559804"
      },
      "bcb18461-90a5-e2a6-cf65-7ed681f0be58": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id='customers'>\n        <div class='description' id='customers'>\n            Customers\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Customers",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "Navigate to the list of customers",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "name": "customers",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "customers",
                "setEntityId": false,
                "stateEntityParamName": null,
                "openRightLayout": null,
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207"
              }
            ]
          }
        },
        "id": "bcb18461-90a5-e2a6-cf65-7ed681f0be58"
      },
      "b15dcb37-aa2d-a53b-38bd-4bacf1b6884b": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id='customers'>\n        <div class='description' id='customers'>\n            Customers\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Customers",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "Navigate to the list of customers",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "name": "customers",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "customers",
                "setEntityId": false,
                "stateEntityParamName": null,
                "openRightLayout": null,
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207"
              }
            ]
          }
        },
        "id": "b15dcb37-aa2d-a53b-38bd-4bacf1b6884b"
      },
      "52c52dab-0a43-b1c4-e041-7b7490bf036c": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "entities_table",
        "type": "latest",
        "title": "New widget",
        "sizeX": 24,
        "sizeY": 16,
        "config": {
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031166,
                "endTimeMs": 1678176431166
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSearch": true,
            "displayPagination": false,
            "defaultPageSize": 10,
            "displayEntityName": true,
            "displayEntityType": false,
            "defaultSortOrder": "entityName",
            "entitiesTitle": "Active Water Meters",
            "displayEntityLabel": true,
            "enableSelectColumnDisplay": true,
            "entityNameColumnTitle": "Serial Number",
            "entityLabelColumnTitle": "Label"
          },
          "title": "Active Water Meters",
          "dropShadow": false,
          "enableFullscreen": true,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
              "filterId": "f5f657e4-89f6-c90d-fd0f-16d0d3bb91ec",
              "dataKeys": [
                {
                  "name": "pulseCounter",
                  "type": "timeseries",
                  "label": "Latest reading",
                  "color": "#2196f3",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.6622074305397865,
                  "units": "mÂ³",
                  "decimals": 2,
                  "postFuncBody": "return value || 0;",
                  "usePostProcessing": true,
                  "funcBody": null
                },
                {
                  "name": "address",
                  "type": "attribute",
                  "label": "Address",
                  "color": "#f44336",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.9392023657375805
                },
                {
                  "name": "active",
                  "type": "attribute",
                  "label": "Status",
                  "color": "#ffc107",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.9076421001622259,
                  "postFuncBody": "if (value === 'true') {\n    return 'Active';\n} else {\n    return 'Inactive';\n}"
                },
                {
                  "name": "leakage",
                  "type": "timeseries",
                  "label": "Leakage",
                  "color": "#8bc34a",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": true,
                    "useCellContentFunction": true,
                    "cellStyleFunction": "var color;\nif (value == 'true') {\n    color = '#EB5757';\n} else {\n    color = '#27AE60';\n}\nreturn {\n    color: color,\n    fontSize: '18px'\n};",
                    "cellContentFunction": "value = '&#11044;';\nreturn value;"
                  },
                  "_hash": 0.9508568110027811,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "displayTimewindow": true,
          "actions": {
            "headerButton": [
              {
                "name": "Add device",
                "icon": "add",
                "type": "customPretty",
                "customHtml": "<form #addDeviceForm=\"ngForm\" [formGroup]=\"addDeviceFormGroup\" class=\"add-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"add-device-form-toolbar\" fxLayout=\"row\">\n            <h2>Add Device</h2>\n            <span fxFlex></span>\n            <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n                <mat-icon class=\"material-icons\">close</mat-icon>\n            </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Serial Number</mat-label>\n                    <input matInput formControlName=\"deviceName\" required>\n                    <mat-error *ngIf=\"addDeviceFormGroup.get('deviceName').hasError('required')\">\n                        Serial Number is required.\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"deviceLabel\" >\n                </mat-form-field>\n            </div>\n            <div formGroupName=\"attributes\" fxLayout=\"column\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Address</mat-label>\n                    <input matInput formControlName=\"address\">\n                </mat-form-field>\n            </div>\n            <tb-owner-autocomplete\n                    formControlName=\"targetOwnerId\"\n                    [excludeOwnerIds]=\"excludeOwnerIds\"\n                    required\n                    placeholderText=\"Select device owner\"\n                    notFoundText=\"No owners matching specified filter were found.\"\n                    requiredText=\"Target owner is required.\">\n            </tb-owner-autocomplete>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"add-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || addDeviceForm.invalid || !addDeviceForm.dirty\">\n            Create\n        </button>\n    </div>\n</form>",
                "customCss": ".add-device-form mat-toolbar.add-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.add-device-form .add-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    deviceService = $injector.get(widgetContext.servicesMap.get('deviceService')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService')),\n    entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService')),\n    entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService'));\n    // userPermissionsService = $injector.get(widgetContext.servicesMap.get('userPermissionsService'));\n\nopenAddDeviceDialog();\n\nfunction openAddDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, AddDeviceDialogController).subscribe();\n}\n\nfunction AddDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.deviceType = 'Water Meter';\n\n    // vm.ownerId = userPermissionsService.getUserOwnerId();\n    // vm.excludeOwnerIds = [vm.ownerId.id];\n\n    vm.currentUserOwner = widgetContext.currentUser.tenantId; // For Tenant Only\n    vm.excludeOwnerIds = [ vm.currentUserOwner ];\n\n    vm.addDeviceFormGroup = vm.fb.group({\n        deviceName: ['', [vm.validators.required]],\n        deviceLabel: [null],\n        attributes: vm.fb.group({\n            address: [null]\n        }),\n        targetOwnerId: [null, [vm.validators.required]]\n    });\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.addDeviceFormGroup.markAsPristine();\n        const formValues = vm.addDeviceFormGroup.value;\n        let device = {\n            name: formValues.deviceName,\n            type: vm.deviceType,\n            label: formValues.deviceLabel\n        };\n        deviceService.saveDevice(device).subscribe(\n            (device) => {\n                widgetContext.rxjs.forkJoin([\n                    entityGroupService.changeEntityOwner(formValues.targetOwnerId, device.id, true),\n                    saveAttributes(device.id),\n                    addRelation(device.id, formValues.targetOwnerId)\n                ]).subscribe(\n                    () => {\n                        vm.loading = false;\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function saveAttributes(entityId) {\n        let attributes = vm.addDeviceFormGroup.get('attributes').value;\n        attributes.inactivityTimeout = 7200000;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== null) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        } else {\n            return widgetContext.rxjs.of([]);\n        }\n    }\n    \n    function addRelation(deviceId, customerId) {\n        let relation = {\n            type: 'Owns',\n            typeGroup: 'COMMON',\n            from: customerId,\n            to: deviceId\n        };\n\n        return entityRelationService.saveRelation(relation);\n    }\n\n}",
                "customResources": [],
                "id": "1044aeb8-0967-9f56-cee1-cf700dc861ca"
              }
            ],
            "rowClick": [
              {
                "id": "81dffda7-f420-5b50-05ff-fa08077b9eb9",
                "name": "Device Details",
                "icon": "more_horiz",
                "type": "openDashboardState",
                "targetDashboardStateId": "device_details",
                "setEntityId": true
              }
            ],
            "actionCellButton": [
              {
                "name": "Edit Info",
                "icon": "edit",
                "type": "customPretty",
                "customHtml": "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Edit Device</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Serial Number</mat-label>\n                    <input matInput formControlName=\"deviceName\" required>\n                    <mat-error *ngIf=\"editDeviceFormGroup.get('deviceName').hasError('required')\">\n                        Serial Number is required.\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"deviceLabel\" >\n                </mat-form-field>\n            </div>\n            <tb-owner-autocomplete\n                    formControlName=\"deviceOwnerId\"\n                    [excludeOwnerIds]=\"excludeOwnerIds\"\n                    required\n                    placeholderText=\"Select device owner\"\n                    notFoundText=\"No owners matching specified filter were found.\"\n                    requiredText=\"Target owner is required.\">\n            </tb-owner-autocomplete>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss": ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    deviceService = $injector.get(widgetContext.servicesMap.get('deviceService')),\n    entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService')),\n    entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService'));\n// userPermissionsService = $injector.get(widgetContext.servicesMap.get('userPermissionsService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    // vm.ownerId = userPermissionsService.getUserOwnerId();\n    // vm.excludeOwnerIds = [vm.ownerId.id];\n\n    vm.currentUserOwner = widgetContext.currentUser.tenantId; // For Tenant Only\n    vm.excludeOwnerIds = [ vm.currentUserOwner ];\n\n    vm.device = {};\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        deviceName: ['', [vm.validators.required]],\n        deviceLabel: [null],\n        deviceOwnerId: [null, [vm.validators.required]]\n    });\n\n    getEntityInfo();\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        saveDevice().subscribe(\n            (/*device*/) => {\n                changeDeviceOwner().subscribe(\n                    () => {\n                        vm.loading = false;\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function getEntityInfo() {\n        vm.loading = true;\n        deviceService.getDevice(entityId.id).subscribe(\n            (device) => {\n                vm.device = device;\n                vm.excludeOwnerIds.push(vm.device.ownerId);\n                vm.editDeviceFormGroup.patchValue({\n                    deviceName: vm.device.name,\n                    deviceLabel: vm.device.label,\n                    deviceOwnerId: vm.device.ownerId\n                }, {emitEvent: false});\n                vm.loading = false;\n            }\n        );\n    }\n\n    function saveDevice() {\n        const formValues = vm.editDeviceFormGroup.value;\n        if (vm.device.name !== formValues.deviceName || (vm.device.label !== formValues.deviceLabel)) {\n            vm.device.name = formValues.deviceName;\n            vm.device.label = formValues.deviceLabel;\n            return deviceService.saveDevice(vm.device);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n\n    function changeDeviceOwner() {\n        let newOwnerId = vm.editDeviceFormGroup.get('deviceOwnerId').value;\n        if (newOwnerId.id !== vm.device.ownerId.id) {\n            return widgetContext.rxjs.forkJoin([\n                entityGroupService.changeEntityOwner(newOwnerId, vm.device.id, true),\n                saveRelations(vm.device.id, vm.device.ownerId, newOwnerId)\n            ]);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n\n    function saveRelations(deviceId, currentOwnerId, newOwnerId) {\n        let tasks = [\n            deleteRelation(deviceId, currentOwnerId),\n            addRelation(deviceId, newOwnerId)\n        ];\n        return widgetContext.rxjs.forkJoin(tasks);\n    }\n\n    function addRelation(deviceId, customerId) {\n        let relation = {\n            type: 'Owns',\n            typeGroup: 'COMMON',\n            from: customerId,\n            to: deviceId\n        };\n\n        return entityRelationService.saveRelation(relation);\n    }\n\n    function deleteRelation(deviceId, customerId) {\n        let relation = {\n            type: 'Owns',\n            from: customerId,\n            to: deviceId\n        };\n\n        return entityRelationService.deleteRelation(relation.from, relation.type, relation.to);\n    }\n}",
                "customResources": [],
                "id": "702a8de4-6902-3545-223d-be481a8a29f5"
              },
              {
                "name": "Set Location Parameters",
                "icon": "location_on",
                "type": "openDashboardState",
                "targetDashboardStateId": "set-location",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openInSeparateDialog": true,
                "dialogTitle": "",
                "dialogHideDashboardToolbar": true,
                "dialogWidth": null,
                "dialogHeight": null,
                "openRightLayout": false,
                "id": "8e19b15c-7b8c-2ba8-fc43-d995ad0b1bbb"
              },
              {
                "name": "Set Alarm Thresholds",
                "icon": "notifications",
                "type": "customPretty",
                "customHtml": "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Thresholds Configuration</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Daily Consumption Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"dailyConsumptionThreshold\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Weekly Consumption Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"weeklyConsumptionThreshold\" >\n                </mat-form-field>\n            </div>\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Low Battery Threshold (%)</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"lowBattThreshold\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Low Temperature Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"lowTempThreshold\" >\n                </mat-form-field>\n            </div>\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Inactivity Timeout (ms)</mat-label>\n                <input matInput type=\"number\" step=\"1\" formControlName=\"inactivityTimeout\">\n                <mat-error *ngIf=\"editDeviceFormGroup.get('inactivityTimeout').hasError('pattern')\">\n                    Invalid value\n                </mat-error>\n            </mat-form-field>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss": ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.attributes = {};\n    let attributesKeys = ['dailyConsumptionThreshold', 'weeklyConsumptionThreshold',\n        'lowBattThreshold', 'lowTempThreshold', 'inactivityTimeout'];\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        dailyConsumptionThreshold: [null],\n        weeklyConsumptionThreshold: [null],\n        lowBattThreshold: [null],\n        lowTempThreshold: [null],\n        inactivityTimeout: [null, [vm.validators.pattern(/^-?[0-9]+$/)]]\n    });\n\n    getEntityInfo(attributesKeys);\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        saveAttributes(entityId).subscribe(\n            () => {\n                vm.loading = false;\n                vm.dialogRef.close(null);\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function getEntityInfo(attributesKeys) {\n        vm.loading = true;\n        attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE', attributesKeys).subscribe(\n            (data) => {\n                if (data.length) {\n                    getEntityAttributes(data);\n                    vm.editDeviceFormGroup.patchValue(vm.attributes, {emitEvent: false});\n                }\n                vm.loading = false;\n            }\n        );\n    }\n\n    function getEntityAttributes(attributes) {\n        for (let i = 0; i < attributes.length; i++) {\n            vm.attributes[attributes[i].key] = attributes[i].value;\n        }\n    }\n\n    function saveAttributes(entityId) {\n        let attributes = vm.editDeviceFormGroup.value;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== vm.attributes[key]) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n}",
                "customResources": [],
                "id": "f0ff3379-9600-c51d-fbe4-911a7d0d5af4"
              }
            ]
          }
        },
        "id": "52c52dab-0a43-b1c4-e041-7b7490bf036c"
      },
      "62842291-c8f3-f5fb-fd99-8d5755405c57": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"total\">\n        <div class='description' id=\"total\">\n            Total\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation: Total",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "1d64528e-686d-0ba7-6e3a-8124e612a0f1",
                "name": "total",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "default",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "62842291-c8f3-f5fb-fd99-8d5755405c57"
      },
      "43bdfba2-255b-3336-6436-f4fdb18c5031": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Analytics",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "analytics",
                "icon": "more_horiz",
                "type": "custom",
                "customFunction": "openDashboardState('analytics');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              }
            ]
          }
        },
        "id": "43bdfba2-255b-3336-6436-f4fdb18c5031"
      },
      "90699eb8-11d6-1064-c76e-eb4823c3e943": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n    opacity: 0.5;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Devices",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": []
          }
        },
        "id": "90699eb8-11d6-1064-c76e-eb4823c3e943"
      },
      "5238616d-3d9e-71d8-6d23-1b3438242fe5": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id='customers'>\n        <div class='description' id='customers'>\n            Customers\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Customers",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "Navigate to the list of customers",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "name": "customers",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "customers",
                "setEntityId": false,
                "stateEntityParamName": null,
                "openRightLayout": null,
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207"
              }
            ]
          }
        },
        "id": "5238616d-3d9e-71d8-6d23-1b3438242fe5"
      },
      "c424f0b7-e12e-9b48-e6d3-221aee944128": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"alarms\">\n        <div class='description' id=\"alarms\">\n            Alarms\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Alarms",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "alarms",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "alarms",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "c424f0b7-e12e-9b48-e6d3-221aee944128"
      },
      "f78dce47-3bca-e586-5d6f-b26db759e832": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id=\"settings\">\n        <div class='description' id=\"settings\">\n            Settings\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Settings",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name": "settings",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "settings",
                "setEntityId": false
              }
            ]
          }
        },
        "id": "f78dce47-3bca-e586-5d6f-b26db759e832"
      },
      "d943b91b-4567-c2a1-222a-a3b45c09bb46": {
        "isSystemType": true,
        "bundleAlias": "alarm_widgets",
        "typeAlias": "alarms_table",
        "type": "alarm",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 16,
        "config": {
          "timewindow": {
            "realtime": {
              "interval": 1000,
              "timewindowMs": 2592000000
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSelection": true,
            "enableSearch": true,
            "displayDetails": false,
            "allowAcknowledgment": false,
            "allowClear": true,
            "displayPagination": false,
            "defaultPageSize": 10,
            "defaultSortOrder": "-createdTime",
            "alarmsTitle": "Active Water Meter Alarms",
            "enableSelectColumnDisplay": true,
            "enableFilter": true
          },
          "title": "Active Water Meter Alarms",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "alarmSource": {
            "type": "entity",
            "name": "alarms",
            "entityAliasId": "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
            "filterId": "f5f657e4-89f6-c90d-fd0f-16d0d3bb91ec",
            "dataKeys": [
              {
                "name": "createdTime",
                "type": "alarm",
                "label": "Created time",
                "color": "#2196f3",
                "settings": {},
                "_hash": 0.8381664834025695
              },
              {
                "name": "originator",
                "type": "alarm",
                "label": "Originator",
                "color": "#4caf50",
                "settings": {},
                "_hash": 0.2921772271979377
              },
              {
                "name": "type",
                "type": "alarm",
                "label": "Type",
                "color": "#f44336",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": ""
                },
                "_hash": 0.5983551827511795
              }
            ]
          },
          "alarmSearchStatus": "ACTIVE",
          "alarmsPollingInterval": 5,
          "datasources": [],
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "displayTimewindow": false,
          "actions": {
            "headerButton": [
              {
                "id": "1f58fb76-87bf-235a-4ce8-e3b67bf3c834",
                "name": "Alarms Details",
                "icon": "fullscreen",
                "type": "updateDashboardState",
                "targetDashboardStateId": "alarms",
                "setEntityId": false
              }
            ]
          },
          "alarmsMaxCountLoad": 0,
          "alarmsFetchSize": 100,
          "alarmStatusList": [
            "ACTIVE"
          ],
          "alarmSeverityList": [],
          "alarmTypeList": [
            "Daily Consumption Threshold Exceeded",
            "Weekly Consumption Threshold Exceeded",
            "Low Battery",
            "Low Temperature",
            "Device Inactive",
            "Leakage Detected"
          ],
          "searchPropagatedAlarms": true
        },
        "id": "d943b91b-4567-c2a1-222a-a3b45c09bb46"
      },
      "13b65109-e8bc-6916-e99e-e5a751541fe8": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "entities_table",
        "type": "latest",
        "title": "New widget",
        "sizeX": 24,
        "sizeY": 16,
        "config": {
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031166,
                "endTimeMs": 1678176431166
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSearch": true,
            "displayPagination": false,
            "defaultPageSize": 10,
            "displayEntityName": true,
            "displayEntityType": false,
            "defaultSortOrder": "entityName",
            "entitiesTitle": "Low Battery Water Meters",
            "displayEntityLabel": true,
            "enableSelectColumnDisplay": true,
            "entityNameColumnTitle": "Serial Number",
            "entityLabelColumnTitle": "Label"
          },
          "title": "Low Battery Water Meters",
          "dropShadow": false,
          "enableFullscreen": true,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
              "filterId": "c5135f23-0850-88ed-3176-bdcdb8fddcba",
              "dataKeys": [
                {
                  "name": "pulseCounter",
                  "type": "timeseries",
                  "label": "Latest reading",
                  "color": "#2196f3",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.6622074305397865,
                  "units": "mÂ³",
                  "decimals": 2,
                  "postFuncBody": "return value || 0;",
                  "usePostProcessing": true,
                  "funcBody": null
                },
                {
                  "name": "address",
                  "type": "attribute",
                  "label": "Address",
                  "color": "#f44336",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.9392023657375805
                },
                {
                  "name": "active",
                  "type": "attribute",
                  "label": "Status",
                  "color": "#ffc107",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.9076421001622259,
                  "postFuncBody": "if (value === 'true') {\n    return 'Active';\n} else {\n    return 'Inactive';\n}"
                },
                {
                  "name": "leakage",
                  "type": "timeseries",
                  "label": "Leakage",
                  "color": "#8bc34a",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": true,
                    "useCellContentFunction": true,
                    "cellStyleFunction": "var color;\nif (value == 'true') {\n    color = '#EB5757';\n} else {\n    color = '#27AE60';\n}\nreturn {\n    color: color,\n    fontSize: '18px'\n};",
                    "cellContentFunction": "value = '&#11044;';\nreturn value;"
                  },
                  "_hash": 0.9508568110027811,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "displayTimewindow": true,
          "actions": {
            "headerButton": [
              {
                "name": "Add device",
                "icon": "add",
                "type": "customPretty",
                "customHtml": "<form #addDeviceForm=\"ngForm\" [formGroup]=\"addDeviceFormGroup\" class=\"add-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"add-device-form-toolbar\" fxLayout=\"row\">\n            <h2>Add Device</h2>\n            <span fxFlex></span>\n            <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n                <mat-icon class=\"material-icons\">close</mat-icon>\n            </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Serial Number</mat-label>\n                    <input matInput formControlName=\"deviceName\" required>\n                    <mat-error *ngIf=\"addDeviceFormGroup.get('deviceName').hasError('required')\">\n                        Serial Number is required.\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"deviceLabel\" >\n                </mat-form-field>\n            </div>\n            <div formGroupName=\"attributes\" fxLayout=\"column\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Address</mat-label>\n                    <input matInput formControlName=\"address\">\n                </mat-form-field>\n            </div>\n            <tb-owner-autocomplete\n                    formControlName=\"targetOwnerId\"\n                    [excludeOwnerIds]=\"excludeOwnerIds\"\n                    required\n                    placeholderText=\"Select device owner\"\n                    notFoundText=\"No owners matching specified filter were found.\"\n                    requiredText=\"Target owner is required.\">\n            </tb-owner-autocomplete>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"add-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || addDeviceForm.invalid || !addDeviceForm.dirty\">\n            Create\n        </button>\n    </div>\n</form>",
                "customCss": ".add-device-form mat-toolbar.add-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.add-device-form .add-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    deviceService = $injector.get(widgetContext.servicesMap.get('deviceService')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService')),\n    entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService')),\n    entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService'));\n    // userPermissionsService = $injector.get(widgetContext.servicesMap.get('userPermissionsService'));\n\nopenAddDeviceDialog();\n\nfunction openAddDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, AddDeviceDialogController).subscribe();\n}\n\nfunction AddDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.deviceType = 'Water Meter';\n\n    // vm.ownerId = userPermissionsService.getUserOwnerId();\n    // vm.excludeOwnerIds = [vm.ownerId.id];\n\n    vm.currentUserOwner = widgetContext.currentUser.tenantId; // For Tenant Only\n    vm.excludeOwnerIds = [ vm.currentUserOwner ];\n\n    vm.addDeviceFormGroup = vm.fb.group({\n        deviceName: ['', [vm.validators.required]],\n        deviceLabel: [null],\n        attributes: vm.fb.group({\n            address: [null]\n        }),\n        targetOwnerId: [null, [vm.validators.required]]\n    });\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.addDeviceFormGroup.markAsPristine();\n        const formValues = vm.addDeviceFormGroup.value;\n        let device = {\n            name: formValues.deviceName,\n            type: vm.deviceType,\n            label: formValues.deviceLabel\n        };\n        deviceService.saveDevice(device).subscribe(\n            (device) => {\n                widgetContext.rxjs.forkJoin([\n                    entityGroupService.changeEntityOwner(formValues.targetOwnerId, device.id, true),\n                    saveAttributes(device.id),\n                    addRelation(device.id, formValues.targetOwnerId)\n                ]).subscribe(\n                    () => {\n                        vm.loading = false;\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function saveAttributes(entityId) {\n        let attributes = vm.addDeviceFormGroup.get('attributes').value;\n        attributes.inactivityTimeout = 7200000;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== null) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        } else {\n            return widgetContext.rxjs.of([]);\n        }\n    }\n    \n    function addRelation(deviceId, customerId) {\n        let relation = {\n            type: 'Owns',\n            typeGroup: 'COMMON',\n            from: customerId,\n            to: deviceId\n        };\n\n        return entityRelationService.saveRelation(relation);\n    }\n\n}",
                "customResources": [],
                "id": "1044aeb8-0967-9f56-cee1-cf700dc861ca"
              }
            ],
            "rowClick": [
              {
                "id": "81dffda7-f420-5b50-05ff-fa08077b9eb9",
                "name": "Device Details",
                "icon": "more_horiz",
                "type": "openDashboardState",
                "targetDashboardStateId": "device_details",
                "setEntityId": true
              }
            ],
            "actionCellButton": [
              {
                "name": "Edit Info",
                "icon": "edit",
                "type": "customPretty",
                "customHtml": "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Edit Device</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Serial Number</mat-label>\n                    <input matInput formControlName=\"deviceName\" required>\n                    <mat-error *ngIf=\"editDeviceFormGroup.get('deviceName').hasError('required')\">\n                        Serial Number is required.\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"deviceLabel\" >\n                </mat-form-field>\n            </div>\n            <tb-owner-autocomplete\n                    formControlName=\"deviceOwnerId\"\n                    [excludeOwnerIds]=\"excludeOwnerIds\"\n                    required\n                    placeholderText=\"Select device owner\"\n                    notFoundText=\"No owners matching specified filter were found.\"\n                    requiredText=\"Target owner is required.\">\n            </tb-owner-autocomplete>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss": ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    deviceService = $injector.get(widgetContext.servicesMap.get('deviceService')),\n    entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService')),\n    entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService'));\n// userPermissionsService = $injector.get(widgetContext.servicesMap.get('userPermissionsService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    // vm.ownerId = userPermissionsService.getUserOwnerId();\n    // vm.excludeOwnerIds = [vm.ownerId.id];\n\n    vm.currentUserOwner = widgetContext.currentUser.tenantId; // For Tenant Only\n    vm.excludeOwnerIds = [ vm.currentUserOwner ];\n\n    vm.device = {};\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        deviceName: ['', [vm.validators.required]],\n        deviceLabel: [null],\n        deviceOwnerId: [null, [vm.validators.required]]\n    });\n\n    getEntityInfo();\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        saveDevice().subscribe(\n            (/*device*/) => {\n                changeDeviceOwner().subscribe(\n                    () => {\n                        vm.loading = false;\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function getEntityInfo() {\n        vm.loading = true;\n        deviceService.getDevice(entityId.id).subscribe(\n            (device) => {\n                vm.device = device;\n                vm.excludeOwnerIds.push(vm.device.ownerId);\n                vm.editDeviceFormGroup.patchValue({\n                    deviceName: vm.device.name,\n                    deviceLabel: vm.device.label,\n                    deviceOwnerId: vm.device.ownerId\n                }, {emitEvent: false});\n                vm.loading = false;\n            }\n        );\n    }\n\n    function saveDevice() {\n        const formValues = vm.editDeviceFormGroup.value;\n        if (vm.device.name !== formValues.deviceName || (vm.device.label !== formValues.deviceLabel)) {\n            vm.device.name = formValues.deviceName;\n            vm.device.label = formValues.deviceLabel;\n            return deviceService.saveDevice(vm.device);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n\n    function changeDeviceOwner() {\n        let newOwnerId = vm.editDeviceFormGroup.get('deviceOwnerId').value;\n        if (newOwnerId.id !== vm.device.ownerId.id) {\n            return widgetContext.rxjs.forkJoin([\n                entityGroupService.changeEntityOwner(newOwnerId, vm.device.id, true),\n                saveRelations(vm.device.id, vm.device.ownerId, newOwnerId)\n            ]);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n\n    function saveRelations(deviceId, currentOwnerId, newOwnerId) {\n        let tasks = [\n            deleteRelation(deviceId, currentOwnerId),\n            addRelation(deviceId, newOwnerId)\n        ];\n        return widgetContext.rxjs.forkJoin(tasks);\n    }\n\n    function addRelation(deviceId, customerId) {\n        let relation = {\n            type: 'Owns',\n            typeGroup: 'COMMON',\n            from: customerId,\n            to: deviceId\n        };\n\n        return entityRelationService.saveRelation(relation);\n    }\n\n    function deleteRelation(deviceId, customerId) {\n        let relation = {\n            type: 'Owns',\n            from: customerId,\n            to: deviceId\n        };\n\n        return entityRelationService.deleteRelation(relation.from, relation.type, relation.to);\n    }\n}",
                "customResources": [],
                "id": "702a8de4-6902-3545-223d-be481a8a29f5"
              },
              {
                "name": "Set Location Parameters",
                "icon": "location_on",
                "type": "openDashboardState",
                "targetDashboardStateId": "set-location",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openInSeparateDialog": true,
                "dialogTitle": "",
                "dialogHideDashboardToolbar": true,
                "dialogWidth": null,
                "dialogHeight": null,
                "openRightLayout": false,
                "id": "8e19b15c-7b8c-2ba8-fc43-d995ad0b1bbb"
              },
              {
                "name": "Set Alarm Thresholds",
                "icon": "notifications",
                "type": "customPretty",
                "customHtml": "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Thresholds Configuration</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Daily Consumption Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"dailyConsumptionThreshold\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Weekly Consumption Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"weeklyConsumptionThreshold\" >\n                </mat-form-field>\n            </div>\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Low Battery Threshold (%)</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"lowBattThreshold\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Low Temperature Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"lowTempThreshold\" >\n                </mat-form-field>\n            </div>\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Inactivity Timeout (ms)</mat-label>\n                <input matInput type=\"number\" step=\"1\" formControlName=\"inactivityTimeout\">\n                <mat-error *ngIf=\"editDeviceFormGroup.get('inactivityTimeout').hasError('pattern')\">\n                    Invalid value\n                </mat-error>\n            </mat-form-field>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss": ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.attributes = {};\n    let attributesKeys = ['dailyConsumptionThreshold', 'weeklyConsumptionThreshold',\n        'lowBattThreshold', 'lowTempThreshold', 'inactivityTimeout'];\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        dailyConsumptionThreshold: [null],\n        weeklyConsumptionThreshold: [null],\n        lowBattThreshold: [null],\n        lowTempThreshold: [null],\n        inactivityTimeout: [null, [vm.validators.pattern(/^-?[0-9]+$/)]]\n    });\n\n    getEntityInfo(attributesKeys);\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        saveAttributes(entityId).subscribe(\n            () => {\n                vm.loading = false;\n                vm.dialogRef.close(null);\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function getEntityInfo(attributesKeys) {\n        vm.loading = true;\n        attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE', attributesKeys).subscribe(\n            (data) => {\n                if (data.length) {\n                    getEntityAttributes(data);\n                    vm.editDeviceFormGroup.patchValue(vm.attributes, {emitEvent: false});\n                }\n                vm.loading = false;\n            }\n        );\n    }\n\n    function getEntityAttributes(attributes) {\n        for (let i = 0; i < attributes.length; i++) {\n            vm.attributes[attributes[i].key] = attributes[i].value;\n        }\n    }\n\n    function saveAttributes(entityId) {\n        let attributes = vm.editDeviceFormGroup.value;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== vm.attributes[key]) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n}",
                "customResources": [],
                "id": "f0ff3379-9600-c51d-fbe4-911a7d0d5af4"
              }
            ]
          }
        },
        "id": "13b65109-e8bc-6916-e99e-e5a751541fe8"
      },
      "55d4a466-f942-6a80-65c0-2a12461d7c38": {
        "isSystemType": true,
        "bundleAlias": "alarm_widgets",
        "typeAlias": "alarms_table",
        "type": "alarm",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 16,
        "config": {
          "timewindow": {
            "realtime": {
              "interval": 1000,
              "timewindowMs": 2592000000
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSelection": true,
            "enableSearch": true,
            "displayDetails": false,
            "allowAcknowledgment": false,
            "allowClear": true,
            "displayPagination": false,
            "defaultPageSize": 10,
            "defaultSortOrder": "-createdTime",
            "alarmsTitle": "Low Battery Water Meter Alarms",
            "enableSelectColumnDisplay": true,
            "enableFilter": true
          },
          "title": "Low Battery Water Meter Alarms",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "alarmSource": {
            "type": "entity",
            "name": "alarms",
            "entityAliasId": "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
            "filterId": "c5135f23-0850-88ed-3176-bdcdb8fddcba",
            "dataKeys": [
              {
                "name": "createdTime",
                "type": "alarm",
                "label": "Created time",
                "color": "#2196f3",
                "settings": {},
                "_hash": 0.8381664834025695
              },
              {
                "name": "originator",
                "type": "alarm",
                "label": "Originator",
                "color": "#4caf50",
                "settings": {},
                "_hash": 0.2921772271979377
              },
              {
                "name": "type",
                "type": "alarm",
                "label": "Type",
                "color": "#f44336",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": ""
                },
                "_hash": 0.5983551827511795
              }
            ]
          },
          "alarmSearchStatus": "ACTIVE",
          "alarmsPollingInterval": 5,
          "datasources": [],
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "displayTimewindow": false,
          "actions": {
            "headerButton": [
              {
                "id": "1f58fb76-87bf-235a-4ce8-e3b67bf3c834",
                "name": "Alarms Details",
                "icon": "fullscreen",
                "type": "updateDashboardState",
                "targetDashboardStateId": "alarms",
                "setEntityId": false
              }
            ]
          },
          "alarmsMaxCountLoad": 0,
          "alarmsFetchSize": 100,
          "alarmStatusList": [
            "ACTIVE"
          ],
          "alarmSeverityList": [],
          "alarmTypeList": [
            "Daily Consumption Threshold Exceeded",
            "Weekly Consumption Threshold Exceeded",
            "Low Battery",
            "Low Temperature",
            "Device Inactive",
            "Leakage Detected"
          ],
          "searchPropagatedAlarms": true
        },
        "id": "55d4a466-f942-6a80-65c0-2a12461d7c38"
      },
      "71458d45-9faf-3da6-1312-f1f416913dc1": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "entities_table",
        "type": "latest",
        "title": "New widget",
        "sizeX": 24,
        "sizeY": 16,
        "config": {
          "timewindow": {
            "displayValue": "",
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 1,
              "interval": 1000,
              "timewindowMs": 60000,
              "quickInterval": "CURRENT_DAY"
            },
            "history": {
              "historyType": 0,
              "interval": 1000,
              "timewindowMs": 60000,
              "fixedTimewindow": {
                "startTimeMs": 1678090031166,
                "endTimeMs": 1678176431166
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSearch": true,
            "displayPagination": false,
            "defaultPageSize": 10,
            "displayEntityName": true,
            "displayEntityType": false,
            "defaultSortOrder": "entityName",
            "entitiesTitle": "Inactive Water Meters",
            "displayEntityLabel": true,
            "enableSelectColumnDisplay": true,
            "entityNameColumnTitle": "Serial Number",
            "entityLabelColumnTitle": "Label"
          },
          "title": "Inactive Water Meters",
          "dropShadow": false,
          "enableFullscreen": true,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
              "filterId": "0f79c9b4-ffdb-f8fa-e860-a45095837597",
              "dataKeys": [
                {
                  "name": "pulseCounter",
                  "type": "timeseries",
                  "label": "Latest reading",
                  "color": "#2196f3",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.6622074305397865,
                  "units": "mÂ³",
                  "decimals": 2,
                  "postFuncBody": "return value || 0;",
                  "usePostProcessing": true,
                  "funcBody": null
                },
                {
                  "name": "address",
                  "type": "attribute",
                  "label": "Address",
                  "color": "#f44336",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.9392023657375805
                },
                {
                  "name": "active",
                  "type": "attribute",
                  "label": "Status",
                  "color": "#ffc107",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": false
                  },
                  "_hash": 0.9076421001622259,
                  "postFuncBody": "if (value === 'true') {\n    return 'Active';\n} else {\n    return 'Inactive';\n}"
                },
                {
                  "name": "leakage",
                  "type": "timeseries",
                  "label": "Leakage",
                  "color": "#8bc34a",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": true,
                    "useCellContentFunction": true,
                    "cellStyleFunction": "var color;\nif (value == 'true') {\n    color = '#EB5757';\n} else {\n    color = '#27AE60';\n}\nreturn {\n    color: color,\n    fontSize: '18px'\n};",
                    "cellContentFunction": "value = '&#11044;';\nreturn value;"
                  },
                  "_hash": 0.9508568110027811,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "displayTimewindow": true,
          "actions": {
            "headerButton": [
              {
                "name": "Add device",
                "icon": "add",
                "type": "customPretty",
                "customHtml": "<form #addDeviceForm=\"ngForm\" [formGroup]=\"addDeviceFormGroup\" class=\"add-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"add-device-form-toolbar\" fxLayout=\"row\">\n            <h2>Add Device</h2>\n            <span fxFlex></span>\n            <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n                <mat-icon class=\"material-icons\">close</mat-icon>\n            </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Serial Number</mat-label>\n                    <input matInput formControlName=\"deviceName\" required>\n                    <mat-error *ngIf=\"addDeviceFormGroup.get('deviceName').hasError('required')\">\n                        Serial Number is required.\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"deviceLabel\" >\n                </mat-form-field>\n            </div>\n            <div formGroupName=\"attributes\" fxLayout=\"column\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Address</mat-label>\n                    <input matInput formControlName=\"address\">\n                </mat-form-field>\n            </div>\n            <tb-owner-autocomplete\n                    formControlName=\"targetOwnerId\"\n                    [excludeOwnerIds]=\"excludeOwnerIds\"\n                    required\n                    placeholderText=\"Select device owner\"\n                    notFoundText=\"No owners matching specified filter were found.\"\n                    requiredText=\"Target owner is required.\">\n            </tb-owner-autocomplete>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"add-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || addDeviceForm.invalid || !addDeviceForm.dirty\">\n            Create\n        </button>\n    </div>\n</form>",
                "customCss": ".add-device-form mat-toolbar.add-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.add-device-form .add-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    deviceService = $injector.get(widgetContext.servicesMap.get('deviceService')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService')),\n    entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService')),\n    entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService'));\n    // userPermissionsService = $injector.get(widgetContext.servicesMap.get('userPermissionsService'));\n\nopenAddDeviceDialog();\n\nfunction openAddDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, AddDeviceDialogController).subscribe();\n}\n\nfunction AddDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.deviceType = 'Water Meter';\n\n    // vm.ownerId = userPermissionsService.getUserOwnerId();\n    // vm.excludeOwnerIds = [vm.ownerId.id];\n\n    vm.currentUserOwner = widgetContext.currentUser.tenantId; // For Tenant Only\n    vm.excludeOwnerIds = [ vm.currentUserOwner ];\n\n    vm.addDeviceFormGroup = vm.fb.group({\n        deviceName: ['', [vm.validators.required]],\n        deviceLabel: [null],\n        attributes: vm.fb.group({\n            address: [null]\n        }),\n        targetOwnerId: [null, [vm.validators.required]]\n    });\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.addDeviceFormGroup.markAsPristine();\n        const formValues = vm.addDeviceFormGroup.value;\n        let device = {\n            name: formValues.deviceName,\n            type: vm.deviceType,\n            label: formValues.deviceLabel\n        };\n        deviceService.saveDevice(device).subscribe(\n            (device) => {\n                widgetContext.rxjs.forkJoin([\n                    entityGroupService.changeEntityOwner(formValues.targetOwnerId, device.id, true),\n                    saveAttributes(device.id),\n                    addRelation(device.id, formValues.targetOwnerId)\n                ]).subscribe(\n                    () => {\n                        vm.loading = false;\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function saveAttributes(entityId) {\n        let attributes = vm.addDeviceFormGroup.get('attributes').value;\n        attributes.inactivityTimeout = 7200000;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== null) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        } else {\n            return widgetContext.rxjs.of([]);\n        }\n    }\n    \n    function addRelation(deviceId, customerId) {\n        let relation = {\n            type: 'Owns',\n            typeGroup: 'COMMON',\n            from: customerId,\n            to: deviceId\n        };\n\n        return entityRelationService.saveRelation(relation);\n    }\n\n}",
                "customResources": [],
                "id": "1044aeb8-0967-9f56-cee1-cf700dc861ca"
              }
            ],
            "rowClick": [
              {
                "id": "81dffda7-f420-5b50-05ff-fa08077b9eb9",
                "name": "Device Details",
                "icon": "more_horiz",
                "type": "openDashboardState",
                "targetDashboardStateId": "device_details",
                "setEntityId": true
              }
            ],
            "actionCellButton": [
              {
                "name": "Edit Info",
                "icon": "edit",
                "type": "customPretty",
                "customHtml": "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Edit Device</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Serial Number</mat-label>\n                    <input matInput formControlName=\"deviceName\" required>\n                    <mat-error *ngIf=\"editDeviceFormGroup.get('deviceName').hasError('required')\">\n                        Serial Number is required.\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"deviceLabel\" >\n                </mat-form-field>\n            </div>\n            <tb-owner-autocomplete\n                    formControlName=\"deviceOwnerId\"\n                    [excludeOwnerIds]=\"excludeOwnerIds\"\n                    required\n                    placeholderText=\"Select device owner\"\n                    notFoundText=\"No owners matching specified filter were found.\"\n                    requiredText=\"Target owner is required.\">\n            </tb-owner-autocomplete>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss": ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    deviceService = $injector.get(widgetContext.servicesMap.get('deviceService')),\n    entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService')),\n    entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService'));\n// userPermissionsService = $injector.get(widgetContext.servicesMap.get('userPermissionsService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    // vm.ownerId = userPermissionsService.getUserOwnerId();\n    // vm.excludeOwnerIds = [vm.ownerId.id];\n\n    vm.currentUserOwner = widgetContext.currentUser.tenantId; // For Tenant Only\n    vm.excludeOwnerIds = [ vm.currentUserOwner ];\n\n    vm.device = {};\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        deviceName: ['', [vm.validators.required]],\n        deviceLabel: [null],\n        deviceOwnerId: [null, [vm.validators.required]]\n    });\n\n    getEntityInfo();\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        saveDevice().subscribe(\n            (/*device*/) => {\n                changeDeviceOwner().subscribe(\n                    () => {\n                        vm.loading = false;\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function getEntityInfo() {\n        vm.loading = true;\n        deviceService.getDevice(entityId.id).subscribe(\n            (device) => {\n                vm.device = device;\n                vm.excludeOwnerIds.push(vm.device.ownerId);\n                vm.editDeviceFormGroup.patchValue({\n                    deviceName: vm.device.name,\n                    deviceLabel: vm.device.label,\n                    deviceOwnerId: vm.device.ownerId\n                }, {emitEvent: false});\n                vm.loading = false;\n            }\n        );\n    }\n\n    function saveDevice() {\n        const formValues = vm.editDeviceFormGroup.value;\n        if (vm.device.name !== formValues.deviceName || (vm.device.label !== formValues.deviceLabel)) {\n            vm.device.name = formValues.deviceName;\n            vm.device.label = formValues.deviceLabel;\n            return deviceService.saveDevice(vm.device);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n\n    function changeDeviceOwner() {\n        let newOwnerId = vm.editDeviceFormGroup.get('deviceOwnerId').value;\n        if (newOwnerId.id !== vm.device.ownerId.id) {\n            return widgetContext.rxjs.forkJoin([\n                entityGroupService.changeEntityOwner(newOwnerId, vm.device.id, true),\n                saveRelations(vm.device.id, vm.device.ownerId, newOwnerId)\n            ]);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n\n    function saveRelations(deviceId, currentOwnerId, newOwnerId) {\n        let tasks = [\n            deleteRelation(deviceId, currentOwnerId),\n            addRelation(deviceId, newOwnerId)\n        ];\n        return widgetContext.rxjs.forkJoin(tasks);\n    }\n\n    function addRelation(deviceId, customerId) {\n        let relation = {\n            type: 'Owns',\n            typeGroup: 'COMMON',\n            from: customerId,\n            to: deviceId\n        };\n\n        return entityRelationService.saveRelation(relation);\n    }\n\n    function deleteRelation(deviceId, customerId) {\n        let relation = {\n            type: 'Owns',\n            from: customerId,\n            to: deviceId\n        };\n\n        return entityRelationService.deleteRelation(relation.from, relation.type, relation.to);\n    }\n}",
                "customResources": [],
                "id": "702a8de4-6902-3545-223d-be481a8a29f5"
              },
              {
                "name": "Set Location Parameters",
                "icon": "location_on",
                "type": "openDashboardState",
                "targetDashboardStateId": "set-location",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openInSeparateDialog": true,
                "dialogTitle": "",
                "dialogHideDashboardToolbar": true,
                "dialogWidth": null,
                "dialogHeight": null,
                "openRightLayout": false,
                "id": "8e19b15c-7b8c-2ba8-fc43-d995ad0b1bbb"
              },
              {
                "name": "Set Alarm Thresholds",
                "icon": "notifications",
                "type": "customPretty",
                "customHtml": "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Thresholds Configuration</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Daily Consumption Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"dailyConsumptionThreshold\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Weekly Consumption Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"weeklyConsumptionThreshold\" >\n                </mat-form-field>\n            </div>\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Low Battery Threshold (%)</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"lowBattThreshold\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Low Temperature Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"lowTempThreshold\" >\n                </mat-form-field>\n            </div>\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Inactivity Timeout (ms)</mat-label>\n                <input matInput type=\"number\" step=\"1\" formControlName=\"inactivityTimeout\">\n                <mat-error *ngIf=\"editDeviceFormGroup.get('inactivityTimeout').hasError('pattern')\">\n                    Invalid value\n                </mat-error>\n            </mat-form-field>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss": ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.attributes = {};\n    let attributesKeys = ['dailyConsumptionThreshold', 'weeklyConsumptionThreshold',\n        'lowBattThreshold', 'lowTempThreshold', 'inactivityTimeout'];\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        dailyConsumptionThreshold: [null],\n        weeklyConsumptionThreshold: [null],\n        lowBattThreshold: [null],\n        lowTempThreshold: [null],\n        inactivityTimeout: [null, [vm.validators.pattern(/^-?[0-9]+$/)]]\n    });\n\n    getEntityInfo(attributesKeys);\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        saveAttributes(entityId).subscribe(\n            () => {\n                vm.loading = false;\n                vm.dialogRef.close(null);\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function getEntityInfo(attributesKeys) {\n        vm.loading = true;\n        attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE', attributesKeys).subscribe(\n            (data) => {\n                if (data.length) {\n                    getEntityAttributes(data);\n                    vm.editDeviceFormGroup.patchValue(vm.attributes, {emitEvent: false});\n                }\n                vm.loading = false;\n            }\n        );\n    }\n\n    function getEntityAttributes(attributes) {\n        for (let i = 0; i < attributes.length; i++) {\n            vm.attributes[attributes[i].key] = attributes[i].value;\n        }\n    }\n\n    function saveAttributes(entityId) {\n        let attributes = vm.editDeviceFormGroup.value;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== vm.attributes[key]) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n}",
                "customResources": [],
                "id": "f0ff3379-9600-c51d-fbe4-911a7d0d5af4"
              }
            ]
          }
        },
        "id": "71458d45-9faf-3da6-1312-f1f416913dc1"
      },
      "9a8ff90e-c07e-3ae7-7119-fd08305da5cc": {
        "isSystemType": true,
        "bundleAlias": "alarm_widgets",
        "typeAlias": "alarms_table",
        "type": "alarm",
        "title": "New widget",
        "sizeX": 8,
        "sizeY": 16,
        "config": {
          "timewindow": {
            "realtime": {
              "interval": 1000,
              "timewindowMs": 2592000000
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSelection": true,
            "enableSearch": true,
            "displayDetails": false,
            "allowAcknowledgment": false,
            "allowClear": true,
            "displayPagination": false,
            "defaultPageSize": 10,
            "defaultSortOrder": "-createdTime",
            "alarmsTitle": "Inactive Water Meter Alarms",
            "enableSelectColumnDisplay": true,
            "enableFilter": true
          },
          "title": "Inactive Water Meter Alarms",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "18px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 5px"
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "alarmSource": {
            "type": "entity",
            "name": "alarms",
            "entityAliasId": "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
            "filterId": "0f79c9b4-ffdb-f8fa-e860-a45095837597",
            "dataKeys": [
              {
                "name": "createdTime",
                "type": "alarm",
                "label": "Created time",
                "color": "#2196f3",
                "settings": {},
                "_hash": 0.8381664834025695
              },
              {
                "name": "originator",
                "type": "alarm",
                "label": "Originator",
                "color": "#4caf50",
                "settings": {},
                "_hash": 0.2921772271979377
              },
              {
                "name": "type",
                "type": "alarm",
                "label": "Type",
                "color": "#f44336",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": ""
                },
                "_hash": 0.5983551827511795
              }
            ]
          },
          "alarmSearchStatus": "ACTIVE",
          "alarmsPollingInterval": 5,
          "datasources": [],
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "enableDataExport": false,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "displayTimewindow": false,
          "actions": {
            "headerButton": [
              {
                "id": "1f58fb76-87bf-235a-4ce8-e3b67bf3c834",
                "name": "Alarms Details",
                "icon": "fullscreen",
                "type": "updateDashboardState",
                "targetDashboardStateId": "alarms",
                "setEntityId": false
              }
            ]
          },
          "alarmsMaxCountLoad": 0,
          "alarmsFetchSize": 100,
          "alarmStatusList": [
            "ACTIVE"
          ],
          "alarmSeverityList": [],
          "alarmTypeList": [
            "Daily Consumption Threshold Exceeded",
            "Weekly Consumption Threshold Exceeded",
            "Low Battery",
            "Low Temperature",
            "Device Inactive",
            "Leakage Detected"
          ],
          "searchPropagatedAlarms": true
        },
        "id": "9a8ff90e-c07e-3ae7-7119-fd08305da5cc"
      },
      "058daae7-781f-94a7-5ff3-8ae5cd2e12af": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id='customers'>\n        <div class='description' id='customers'>\n            Customers\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Customers",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "Navigate to the list of customers",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "name": "customers",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "customers",
                "setEntityId": false,
                "stateEntityParamName": null,
                "openRightLayout": null,
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207"
              }
            ]
          }
        },
        "id": "058daae7-781f-94a7-5ff3-8ae5cd2e12af"
      },
      "1b661eb9-83f9-67de-3126-043155031cfb": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "sizeX": 4,
        "sizeY": 1,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0",
          "settings": {
            "cardCss": ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
            "cardHtml": "<div class='card'>\n    <div class='content' id='customers'>\n        <div class='description' id='customers'>\n            Customers\n        </div>\n    </div>\n</div>"
          },
          "title": "Navigation:  Customers",
          "dropShadow": false,
          "showTitleIcon": false,
          "titleIcon": null,
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "Navigate to the list of customers",
          "enableFullscreen": false,
          "enableDataExport": true,
          "widgetStyle": {
            "border": "1px solid #E0E0E0"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "displayTimewindow": true,
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "name": "customers",
                "icon": "more_horiz",
                "type": "updateDashboardState",
                "targetDashboardStateId": "customers",
                "setEntityId": false,
                "stateEntityParamName": null,
                "openRightLayout": null,
                "id": "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207"
              }
            ]
          }
        },
        "id": "1b661eb9-83f9-67de-3126-043155031cfb"
      }
    },
    "states": {
      "default": {
        "name": "Total",
        "root": true,
        "layouts": {
          "main": {
            "widgets": {
              "2cbc9189-b947-2d31-e748-c928f036ff96": {
                "sizeX": 27,
                "sizeY": 8,
                "mobileOrder": 11,
                "mobileHeight": 4,
                "row": 4,
                "col": 0
              },
              "80ac9372-6c45-28e7-6c88-baf76fe78318": {
                "sizeX": 18,
                "sizeY": 7,
                "mobileOrder": 15,
                "mobileHeight": 4,
                "row": 12,
                "col": 18
              },
              "b790fdaa-727a-2572-b2a2-c72a55444cbc": {
                "sizeX": 9,
                "sizeY": 8,
                "mobileOrder": 12,
                "mobileHeight": 4,
                "row": 4,
                "col": 27
              },
              "94d73536-d206-eb83-651a-36691a0abc2e": {
                "sizeX": 18,
                "sizeY": 7,
                "mobileOrder": 13,
                "mobileHeight": 4,
                "row": 12,
                "col": 0
              },
              "0f9314f3-6f25-3e97-e2a4-8e2a16feda2b": {
                "sizeX": 9,
                "sizeY": 3,
                "mobileOrder": 7,
                "mobileHeight": 2,
                "row": 1,
                "col": 0
              },
              "17543c57-af4a-2c1e-bf12-53a7b46791e6": {
                "sizeX": 9,
                "sizeY": 3,
                "mobileOrder": 8,
                "mobileHeight": 2,
                "row": 1,
                "col": 9
              },
              "a3c7811c-0a83-865b-af64-bed805a685f2": {
                "sizeX": 9,
                "sizeY": 3,
                "mobileOrder": 9,
                "mobileHeight": 2,
                "row": 1,
                "col": 18
              },
              "457136f8-c871-1835-c9fc-276a3231ec86": {
                "sizeX": 9,
                "sizeY": 3,
                "mobileOrder": 10,
                "mobileHeight": 2,
                "row": 1,
                "col": 27
              },
              "251d21ce-9e8b-5ca7-2f73-037ede2cdb99": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 1,
                "mobileHeight": 1,
                "row": 0,
                "col": 0
              },
              "bc571516-ba90-ae54-66d0-ed9c2568ec34": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 2,
                "mobileHeight": 1,
                "row": 0,
                "col": 6
              },
              "20e020b4-4030-4f44-b4fd-a755f80c7655": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 3,
                "mobileHeight": 1,
                "row": 0,
                "col": 12
              },
              "2a550cd5-86ad-eae5-18e2-5969c6b9cb84": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 4,
                "mobileHeight": 1,
                "row": 0,
                "col": 18
              },
              "3e16be85-537b-efc5-8a98-82f124103bcf": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 5,
                "mobileHeight": 1,
                "row": 0,
                "col": 24
              },
              "265668f3-eeba-ab67-ffc2-014bdf20a6ae": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 6,
                "mobileHeight": 1,
                "row": 0,
                "col": 30
              }
            },
            "gridSettings": {
              "backgroundColor": "#f2f2f2",
              "color": "rgba(0,0,0,0.870588)",
              "columns": 36,
              "backgroundSizeMode": "100%",
              "autoFillHeight": true,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70,
              "margin": 8,
              "backgroundImageUrl": null
            }
          }
        }
      },
      "analytics": {
        "name": "Analytics",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "ccc94584-ce53-cdfc-ea3b-ecd21fa19abf": {
                "sizeX": 27,
                "sizeY": 15,
                "mobileHeight": 3,
                "row": 4,
                "col": 0,
                "mobileOrder": 11
              },
              "a864701f-57f3-e665-21bc-a3ad1f8438da": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 1,
                "mobileHeight": 1,
                "row": 0,
                "col": 0
              },
              "ee542aaf-7305-9baa-3022-34a9da7b45ed": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 2,
                "mobileHeight": 1,
                "row": 0,
                "col": 6
              },
              "d3ea68cf-4dd0-a261-a04f-7008b3d2eed4": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 3,
                "mobileHeight": 1,
                "row": 0,
                "col": 12
              },
              "117490c6-fa7f-34cf-1de9-dfbc6068bbdb": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 5,
                "mobileHeight": 1,
                "row": 0,
                "col": 24
              },
              "66e7a232-0011-b462-e359-c5d99a2a9c56": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 6,
                "mobileHeight": 1,
                "row": 0,
                "col": 30
              },
              "41f3bd64-9293-91b4-60aa-eeb4971f96bd": {
                "sizeX": 9,
                "sizeY": 3,
                "row": 1,
                "col": 0
              },
              "47beef8a-be00-49f9-fd8e-3b4c409e0a1a": {
                "sizeX": 9,
                "sizeY": 3,
                "row": 1,
                "col": 18
              },
              "db41ee56-d991-3354-6210-f66ea84e9623": {
                "sizeX": 9,
                "sizeY": 3,
                "row": 1,
                "col": 27
              },
              "2b1da004-36c7-d066-085a-6f53108fa625": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 18
              },
              "17543c57-af4a-2c1e-bf12-53a7b46791e6": {
                "sizeX": 9,
                "sizeY": 3,
                "row": 1,
                "col": 9
              },
              "b790fdaa-727a-2572-b2a2-c72a55444cbc": {
                "sizeX": 9,
                "sizeY": 15,
                "row": 4,
                "col": 27
              }
            },
            "gridSettings": {
              "backgroundColor": "#f2f2f2",
              "color": "rgba(0,0,0,0.870588)",
              "columns": 36,
              "backgroundSizeMode": "100%",
              "autoFillHeight": true,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70,
              "margin": 8,
              "backgroundImageUrl": null
            }
          }
        }
      },
      "devices": {
        "name": "Devices",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "5b171713-09c1-5b9a-2572-8b8b731d180d": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 1,
                "mobileHeight": 1,
                "row": 0,
                "col": 0
              },
              "1b2ee163-50d8-ae49-46ba-9b616bc63631": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 2,
                "mobileHeight": 1,
                "row": 0,
                "col": 6
              },
              "7bf92548-b95f-2874-92c4-6675571878ad": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 3,
                "mobileHeight": 1,
                "row": 0,
                "col": 12
              },
              "e91e4167-68c3-5d5d-efc5-a19ec8fb999c": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 5,
                "mobileHeight": 1,
                "row": 0,
                "col": 24
              },
              "be3eb9bd-21f7-250c-ccf5-1d2dd67b73e2": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 6,
                "mobileHeight": 1,
                "row": 0,
                "col": 30
              },
              "291ab4b2-f371-9897-6856-385e5745f430": {
                "sizeX": 23,
                "sizeY": 18,
                "mobileOrder": 7,
                "mobileHeight": 5,
                "row": 1,
                "col": 0
              },
              "c33ce26b-a96e-4de0-ae3b-7ddf92cf6555": {
                "sizeX": 13,
                "sizeY": 18,
                "mobileOrder": 8,
                "mobileHeight": 5,
                "row": 1,
                "col": 23
              },
              "f7a6aaee-6a61-a77d-3969-5abd1e559804": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 18
              }
            },
            "gridSettings": {
              "backgroundColor": "#f2f2f2",
              "color": "rgba(0,0,0,0.870588)",
              "columns": 36,
              "backgroundSizeMode": "100%",
              "autoFillHeight": true,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70,
              "margin": 8,
              "backgroundImageUrl": null
            }
          }
        }
      },
      "alarms": {
        "name": "Alarms",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "7cfe3a55-4100-6f3c-7873-db3a2e175602": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 0,
                "mobileOrder": 1,
                "mobileHeight": 1
              },
              "efc2c22c-ece5-bcfe-d5f1-1b15125b7f01": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 6,
                "mobileOrder": 2,
                "mobileHeight": 1
              },
              "5a352e8c-34bd-d93b-2fb3-c41905cf9e3a": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 12,
                "mobileOrder": 3,
                "mobileHeight": 1
              },
              "6727afe1-7b86-7c58-5873-a9700a83edec": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 24,
                "mobileOrder": 5,
                "mobileHeight": 1
              },
              "9ac96f6f-ed61-67b2-5695-3fe61064b7f8": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 30,
                "mobileOrder": 6,
                "mobileHeight": 1
              },
              "c2bdcb20-9d23-3ef4-34fd-950d8e322152": {
                "sizeX": 9,
                "sizeY": 18,
                "mobileOrder": 8,
                "mobileHeight": 4,
                "row": 1,
                "col": 27
              },
              "db53f985-2418-e36d-6b5d-c51eb80c6264": {
                "sizeX": 27,
                "sizeY": 18,
                "mobileOrder": 7,
                "mobileHeight": 4,
                "row": 1,
                "col": 0
              },
              "bcb18461-90a5-e2a6-cf65-7ed681f0be58": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 18
              }
            },
            "gridSettings": {
              "backgroundColor": "#f2f2f2",
              "color": "rgba(0,0,0,0.870588)",
              "columns": 36,
              "backgroundSizeMode": "100%",
              "autoFillHeight": true,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70,
              "margin": 8,
              "backgroundImageUrl": null
            }
          }
        }
      },
      "settings": {
        "name": "Settings",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "b85b4e51-42dd-1ea6-84a6-14d701fd8875": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 0,
                "mobileOrder": 1,
                "mobileHeight": 1
              },
              "6c91bf1f-bdf6-6af7-de49-079b89bee211": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 6,
                "mobileOrder": 2,
                "mobileHeight": 1
              },
              "05cb8c19-3d4f-b147-a377-8ab72aa3057d": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 12,
                "mobileOrder": 3,
                "mobileHeight": 1
              },
              "70b3ca21-cc98-46ea-1676-16d3edea2a65": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 24,
                "mobileOrder": 5,
                "mobileHeight": 1
              },
              "936cf52c-f762-628e-00e8-363b53e1af4f": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 30,
                "mobileOrder": 6,
                "mobileHeight": 1
              },
              "1b26a5b1-61be-945c-b7a7-85edc3e219cf": {
                "sizeX": 12,
                "sizeY": 18,
                "row": 1,
                "col": 0,
                "mobileOrder": 7,
                "mobileHeight": 10
              },
              "e5602f65-3248-dc60-799c-0d8b413e3604": {
                "sizeX": 12,
                "sizeY": 18,
                "row": 1,
                "col": 12,
                "mobileOrder": 8,
                "mobileHeight": 5
              },
              "2b036a6f-052f-46fe-14c6-6dc59416704f": {
                "sizeX": 12,
                "sizeY": 18,
                "row": 1,
                "col": 24,
                "mobileOrder": 9,
                "mobileHeight": 5
              },
              "b15dcb37-aa2d-a53b-38bd-4bacf1b6884b": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 18
              }
            },
            "gridSettings": {
              "backgroundColor": "#f2f2f2",
              "color": "rgba(0,0,0,0.870588)",
              "columns": 36,
              "backgroundSizeMode": "100%",
              "autoFillHeight": true,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70,
              "margin": 8,
              "backgroundImageUrl": null
            }
          }
        }
      },
      "device_details": {
        "name": "${entityName}",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "2f9a86a1-b6ac-6fee-e67c-cbe72f2d41a7": {
                "sizeX": 9,
                "sizeY": 3,
                "row": 1,
                "col": 0,
                "mobileOrder": 7,
                "mobileHeight": 2
              },
              "6f23568a-5ed0-db6d-ce47-bf6ba1683e6c": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 0,
                "mobileOrder": 1,
                "mobileHeight": 1
              },
              "391e3afb-9cd1-6d1c-e6e6-ddc788d6bef2": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 6,
                "mobileOrder": 2,
                "mobileHeight": 1
              },
              "8838c3d4-e8d7-05b9-f97f-a79ff9a03d3b": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 12,
                "mobileOrder": 3,
                "mobileHeight": 1
              },
              "04a5ced4-7ce0-ec3a-fb79-a6a8e47e0d7e": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 24,
                "mobileOrder": 5,
                "mobileHeight": 1
              },
              "2dc142e5-6fa4-263c-0f42-1e67db568682": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 30,
                "mobileOrder": 6,
                "mobileHeight": 1
              },
              "1bfaeb7d-8b3c-d7cb-20bb-3cb9bcca4b7c": {
                "sizeX": 9,
                "sizeY": 8,
                "row": 4,
                "col": 27,
                "mobileOrder": 12,
                "mobileHeight": 4
              },
              "6fb621cb-94da-2f0e-1561-83699315ee3e": {
                "sizeX": 27,
                "sizeY": 8,
                "mobileHeight": 3,
                "row": 4,
                "col": 0,
                "mobileOrder": 11
              },
              "6f390f15-d267-3d9d-3afd-5b18247ddc2d": {
                "sizeX": 9,
                "sizeY": 3,
                "row": 1,
                "col": 9,
                "mobileOrder": 8,
                "mobileHeight": 2
              },
              "328e8d85-ed7c-ae06-d537-3edc002de94c": {
                "sizeX": 9,
                "sizeY": 3,
                "row": 1,
                "col": 18,
                "mobileOrder": 9,
                "mobileHeight": 2
              },
              "b96457f0-6b59-a580-4c3d-2eb919d56603": {
                "sizeX": 9,
                "sizeY": 3,
                "row": 1,
                "col": 27,
                "mobileOrder": 10,
                "mobileHeight": 2
              },
              "1e7b764e-6e7d-0bb3-7470-9e3b9154235c": {
                "sizeX": 9,
                "sizeY": 7,
                "mobileOrder": 13,
                "mobileHeight": 5,
                "row": 12,
                "col": 18
              },
              "78fcd7e3-ba11-72c5-ecfa-aa3db853922f": {
                "sizeX": 9,
                "sizeY": 7,
                "mobileOrder": 14,
                "mobileHeight": 5,
                "row": 19,
                "col": 18
              },
              "51f6f10f-c491-9e27-04d5-a235ca4fc16c": {
                "sizeX": 9,
                "sizeY": 7,
                "mobileOrder": 15,
                "mobileHeight": 5,
                "row": 12,
                "col": 27
              },
              "0924e14a-b8cc-2566-90e1-5c6f9819761e": {
                "sizeX": 9,
                "sizeY": 7,
                "row": 19,
                "col": 27,
                "mobileOrder": 16,
                "mobileHeight": 5
              },
              "629dcd1a-9569-ba67-0ffd-638051f4ea97": {
                "sizeX": 18,
                "sizeY": 14,
                "row": 12,
                "col": 0,
                "mobileOrder": 17,
                "mobileHeight": 5
              },
              "1b661eb9-83f9-67de-3126-043155031cfb": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 18
              }
            },
            "gridSettings": {
              "backgroundColor": "#f2f2f2",
              "color": "rgba(0,0,0,0.870588)",
              "columns": 36,
              "backgroundSizeMode": "100%",
              "autoFillHeight": false,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70,
              "margin": 8,
              "backgroundImageUrl": null
            }
          }
        }
      },
      "device_alarms": {
        "name": "${entityName} Alarms",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "fd0cad3c-cb76-a2c5-446a-4bc280adfee1": {
                "sizeX": 32,
                "sizeY": 14,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#f2f2f2",
              "color": "rgba(0,0,0,0.870588)",
              "columns": 32,
              "backgroundSizeMode": "100%",
              "autoFillHeight": true,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70,
              "margin": 8
            }
          }
        }
      },
      "customers": {
        "name": "Customers",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "258c6c06-4c02-f318-5bc7-6d9e264ac676": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 1,
                "mobileHeight": 1,
                "row": 0,
                "col": 0
              },
              "51c01959-c7bb-df14-ff01-c8195c815448": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 2,
                "mobileHeight": 1,
                "row": 0,
                "col": 6
              },
              "7bd9d3f3-1257-bf27-d86d-f7ab703ad473": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 3,
                "mobileHeight": 1,
                "row": 0,
                "col": 12
              },
              "e36d6f8c-0b2c-b39d-5f3a-abbae0de9bc9": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 4,
                "mobileHeight": 1,
                "row": 0,
                "col": 18
              },
              "7a2cb228-d321-552c-dd6a-341801ff6cc1": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 5,
                "mobileHeight": 1,
                "row": 0,
                "col": 24
              },
              "c73e9e2a-aa9b-301d-c8a3-9a54db46bd99": {
                "sizeX": 6,
                "sizeY": 1,
                "mobileOrder": 6,
                "mobileHeight": 1,
                "row": 0,
                "col": 30
              },
              "23fbc25e-a9ea-c9a8-f6bb-9a1ef5a86a92": {
                "sizeX": 36,
                "sizeY": 18,
                "row": 1,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#f2f2f2",
              "color": "rgba(0,0,0,0.870588)",
              "columns": 36,
              "backgroundSizeMode": "100%",
              "autoFillHeight": true,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70,
              "margin": 8,
              "backgroundImageUrl": null
            }
          }
        }
      },
      "customer_devices": {
        "name": "${entityName}: Devices",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "d25322de-82d0-d64c-9377-74ea62a446d2": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 0
              },
              "877c7f5d-0542-9a5e-544f-c1967bfce412": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 6
              },
              "6a2c4e10-972d-9197-8ce9-647848d18715": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 12
              },
              "7d36bc49-318c-074b-f788-045ce9a8f7e8": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 24
              },
              "c24b8225-17d9-daad-e52d-038983c8f803": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 30
              },
              "236a2885-a90d-2662-abf1-727e38af88b5": {
                "sizeX": 27,
                "sizeY": 18,
                "row": 1,
                "col": 0
              },
              "046968a1-fc76-2177-cf2b-d185b8e1ec84": {
                "sizeX": 9,
                "sizeY": 18,
                "row": 1,
                "col": 27
              },
              "058daae7-781f-94a7-5ff3-8ae5cd2e12af": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 18
              }
            },
            "gridSettings": {
              "backgroundColor": "#f2f2f2",
              "color": "rgba(0,0,0,0.870588)",
              "columns": 36,
              "backgroundSizeMode": "100%",
              "autoFillHeight": true,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70,
              "margin": 8,
              "backgroundImageUrl": null
            }
          }
        }
      },
      "set-location": {
        "name": "${entityName}: Edit location parameters",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "d902d11f-3f82-c6c8-f868-7e795c4981d3": {
                "sizeX": 100,
                "sizeY": 7,
                "row": 0,
                "col": 0
              },
              "629dcd1a-9569-ba67-0ffd-638051f4ea97": {
                "sizeX": 100,
                "sizeY": 39,
                "row": 7,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "color": "rgba(0,0,0,0.870588)",
              "columns": 100,
              "margin": 0,
              "backgroundSizeMode": "100%",
              "autoFillHeight": true,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "active_devices": {
        "name": "Active devices",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "52c52dab-0a43-b1c4-e041-7b7490bf036c": {
                "sizeX": 27,
                "sizeY": 18,
                "row": 1,
                "col": 0
              },
              "62842291-c8f3-f5fb-fd99-8d5755405c57": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 0
              },
              "43bdfba2-255b-3336-6436-f4fdb18c5031": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 6
              },
              "90699eb8-11d6-1064-c76e-eb4823c3e943": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 12
              },
              "5238616d-3d9e-71d8-6d23-1b3438242fe5": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 18
              },
              "c424f0b7-e12e-9b48-e6d3-221aee944128": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 24
              },
              "f78dce47-3bca-e586-5d6f-b26db759e832": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 30
              },
              "d943b91b-4567-c2a1-222a-a3b45c09bb46": {
                "sizeX": 9,
                "sizeY": 18,
                "row": 1,
                "col": 27
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "color": "rgba(0,0,0,0.870588)",
              "columns": 36,
              "margin": 8,
              "backgroundSizeMode": "100%",
              "autoFillHeight": true,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "low_battery_devices": {
        "name": "Low battery devices",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "62842291-c8f3-f5fb-fd99-8d5755405c57": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 0
              },
              "43bdfba2-255b-3336-6436-f4fdb18c5031": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 6
              },
              "90699eb8-11d6-1064-c76e-eb4823c3e943": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 12
              },
              "5238616d-3d9e-71d8-6d23-1b3438242fe5": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 18
              },
              "c424f0b7-e12e-9b48-e6d3-221aee944128": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 24
              },
              "f78dce47-3bca-e586-5d6f-b26db759e832": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 30
              },
              "13b65109-e8bc-6916-e99e-e5a751541fe8": {
                "sizeX": 27,
                "sizeY": 18,
                "row": 1,
                "col": 0
              },
              "55d4a466-f942-6a80-65c0-2a12461d7c38": {
                "sizeX": 9,
                "sizeY": 18,
                "row": 1,
                "col": 27
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "color": "rgba(0,0,0,0.870588)",
              "columns": 36,
              "margin": 8,
              "backgroundSizeMode": "100%",
              "autoFillHeight": true,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "inactive_devices": {
        "name": "Inactive devices",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "62842291-c8f3-f5fb-fd99-8d5755405c57": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 0
              },
              "43bdfba2-255b-3336-6436-f4fdb18c5031": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 6
              },
              "90699eb8-11d6-1064-c76e-eb4823c3e943": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 12
              },
              "5238616d-3d9e-71d8-6d23-1b3438242fe5": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 18
              },
              "c424f0b7-e12e-9b48-e6d3-221aee944128": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 24
              },
              "f78dce47-3bca-e586-5d6f-b26db759e832": {
                "sizeX": 6,
                "sizeY": 1,
                "row": 0,
                "col": 30
              },
              "71458d45-9faf-3da6-1312-f1f416913dc1": {
                "sizeX": 27,
                "sizeY": 18,
                "row": 1,
                "col": 0
              },
              "9a8ff90e-c07e-3ae7-7119-fd08305da5cc": {
                "sizeX": 9,
                "sizeY": 18,
                "row": 1,
                "col": 27
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "color": "rgba(0,0,0,0.870588)",
              "columns": 36,
              "margin": 8,
              "backgroundSizeMode": "100%",
              "autoFillHeight": true,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      }
    },
    "entityAliases": {
      "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d": {
        "id": "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
        "alias": "Sensors",
        "filter": {
          "type": "deviceType",
          "resolveMultiple": true,
          "deviceType": "Water Meter",
          "deviceNameFilter": ""
        }
      },
      "9da9bd9c-a7cc-244f-16ac-3e2045cff5b1": {
        "id": "9da9bd9c-a7cc-244f-16ac-3e2045cff5b1",
        "alias": "Tenant",
        "filter": {
          "type": "singleEntity",
          "resolveMultiple": false,
          "singleEntity": {
            "entityType": "CURRENT_TENANT",
            "id": "13814000-1dd2-11b2-8080-808080808080"
          }
        }
      },
      "2754dd92-28a3-a689-d65c-ab9001a86f73": {
        "id": "2754dd92-28a3-a689-d65c-ab9001a86f73",
        "alias": "State",
        "filter": {
          "type": "stateEntity",
          "resolveMultiple": false,
          "stateEntityParamName": "",
          "defaultStateEntity": {
            "entityType": "CURRENT_TENANT",
            "id": "13814000-1dd2-11b2-8080-808080808080"
          }
        }
      },
      "ff71fe5d-722e-fe0f-bf06-080b2b55cfae": {
        "id": "ff71fe5d-722e-fe0f-bf06-080b2b55cfae",
        "alias": "Users",
        "filter": {
          "type": "entitiesByGroupName",
          "resolveMultiple": true,
          "groupStateEntity": false,
          "stateEntityParamName": null,
          "groupType": "USER",
          "entityGroupNameFilter": "All"
        }
      },
      "e7bb2159-4857-ab22-921e-5290a8af4f4d": {
        "id": "e7bb2159-4857-ab22-921e-5290a8af4f4d",
        "alias": "Customers",
        "filter": {
          "type": "entitiesByGroupName",
          "resolveMultiple": true,
          "groupStateEntity": false,
          "stateEntityParamName": null,
          "groupType": "CUSTOMER",
          "entityGroupNameFilter": "Water Metering"
        }
      },
      "e8bf7353-e2d4-1343-d6d7-32e74bd260db": {
        "id": "e8bf7353-e2d4-1343-d6d7-32e74bd260db",
        "alias": "Selected Sensor",
        "filter": {
          "type": "stateEntity",
          "resolveMultiple": false,
          "stateEntityParamName": "device",
          "defaultStateEntity": {
            "entityType": "CURRENT_TENANT",
            "id": "13814000-1dd2-11b2-8080-808080808080"
          }
        }
      },
      "e56b6bda-c865-20b2-b740-ba33356ab9cb": {
        "id": "e56b6bda-c865-20b2-b740-ba33356ab9cb",
        "alias": "Customer Sensors",
        "filter": {
          "type": "deviceSearchQuery",
          "resolveMultiple": true,
          "rootStateEntity": true,
          "stateEntityParamName": null,
          "defaultStateEntity": null,
          "rootEntity": null,
          "direction": "FROM",
          "maxLevel": 1,
          "fetchLastLevelOnly": null,
          "relationType": "Owns",
          "deviceTypes": [
            "Water Meter"
          ]
        }
      },
      "35c08d08-d6bf-2908-c93b-cd38837c4dfa": {
        "id": "35c08d08-d6bf-2908-c93b-cd38837c4dfa",
        "alias": "Device Owner",
        "filter": {
          "type": "stateEntityOwner",
          "resolveMultiple": false,
          "stateEntityParamName": null,
          "defaultStateEntity": null
        }
      }
    },
    "timewindow": {
      "hideInterval": false,
      "hideAggregation": false,
      "hideAggInterval": false,
      "hideTimezone": false,
      "selectedTab": 0,
      "realtime": {
        "realtimeType": 1,
        "timewindowMs": 60000,
        "quickInterval": "CURRENT_WEEK_ISO",
        "interval": 86400000
      },
      "aggregation": {
        "type": "NONE",
        "limit": 50000
      },
      "timezone": "UTC"
    },
    "settings": {
      "stateControllerId": "entity",
      "showTitle": false,
      "showDashboardsSelect": false,
      "showEntitiesSelect": false,
      "showDashboardTimewindow": true,
      "showDashboardExport": true,
      "toolbarAlwaysOpen": true,
      "titleColor": "rgba(0,0,0,0.870588)",
      "showFilters": true
    },
    "filters": {
      "f5f657e4-89f6-c90d-fd0f-16d0d3bb91ec": {
        "id": "f5f657e4-89f6-c90d-fd0f-16d0d3bb91ec",
        "filter": "ActiveDevicesFilter",
        "keyFilters": [
          {
            "key": {
              "type": "ATTRIBUTE",
              "key": "active"
            },
            "valueType": "BOOLEAN",
            "predicates": [
              {
                "keyFilterPredicate": {
                  "operation": "EQUAL",
                  "value": {
                    "defaultValue": true,
                    "dynamicValue": null
                  },
                  "type": "BOOLEAN"
                },
                "userInfo": {
                  "editable": true,
                  "label": "",
                  "autogeneratedLabel": true,
                  "order": 0
                }
              }
            ]
          }
        ],
        "editable": false
      },
      "0f79c9b4-ffdb-f8fa-e860-a45095837597": {
        "id": "0f79c9b4-ffdb-f8fa-e860-a45095837597",
        "filter": "InactiveDeviceFilter",
        "keyFilters": [
          {
            "key": {
              "type": "ATTRIBUTE",
              "key": "active"
            },
            "valueType": "BOOLEAN",
            "predicates": [
              {
                "keyFilterPredicate": {
                  "type": "BOOLEAN",
                  "operation": "EQUAL",
                  "value": {
                    "defaultValue": false
                  }
                },
                "userInfo": {
                  "editable": true,
                  "label": "",
                  "autogeneratedLabel": true,
                  "order": 0
                }
              }
            ]
          }
        ],
        "editable": false
      },
      "c5135f23-0850-88ed-3176-bdcdb8fddcba": {
        "id": "c5135f23-0850-88ed-3176-bdcdb8fddcba",
        "filter": "LowBatteryFilter",
        "keyFilters": [
          {
            "key": {
              "type": "TIME_SERIES",
              "key": "battery"
            },
            "valueType": "NUMERIC",
            "predicates": [
              {
                "keyFilterPredicate": {
                  "operation": "LESS",
                  "value": {
                    "defaultValue": 20,
                    "dynamicValue": {
                      "sourceType": "CURRENT_TENANT",
                      "sourceAttribute": "lowBattThreshold",
                      "inherit": false
                    }
                  },
                  "type": "NUMERIC"
                },
                "userInfo": {
                  "editable": true,
                  "label": "",
                  "autogeneratedLabel": true,
                  "order": 0
                }
              }
            ]
          }
        ],
        "editable": false
      }
    }
  },
  "externalId": null,
  "name": "Water Metering Tenant Dashboard"
}